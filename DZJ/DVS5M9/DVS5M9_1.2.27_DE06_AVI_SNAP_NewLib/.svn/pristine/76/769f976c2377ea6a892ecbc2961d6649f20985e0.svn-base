/**************************************************************************
 *
 *        Copyright (c) 2006-2008 by Sunplus mMedia Inc., Ltd.
 *
 *  This software is copyrighted by and is the property of Sunplus
 *  mMedia Inc., Ltd. All rights are reserved by Sunplus mMedia
 *  Inc., Ltd. This software may only be used in accordance with the
 *  corresponding license agreement. Any unauthorized use, duplication,
 *  distribution, or disclosure of this software is expressly forbidden.
 *
 *  This Copyright notice MUST not be removed or modified without prior
 *  written consent of Sunplus mMedia Inc., Ltd.
 *
 *  Sunplus mMedia Inc., Ltd. reserves the right to modify this
 *  software without notice.
 *
 *  Sunplus mMedia Inc., Ltd.
 *  19-1, Innovation First Road, Science-Based Industrial Park,
 *  Hsin-Chu, Taiwan, R.O.C.
 *
 **************************************************************************/
#define HOST_DBG 0

#include "common.h"
#include <stdio.h>
#include <string.h>
#include "sp5k_cdsp_api.h"
#include "sp5k_gfx_api.h"
#include "sp5k_ae_api.h"
#include "sp5k_sensor_api.h"
#include "sp5k_capture_api.h"
#include "sp5k_cal_api.h"
#include "sp5k_msg_def.h"
#include "sp5k_modesw_api.h"

#include "app_com_api.h"
#include "app_com_debug.h"
#include "app_dbg_api.h"
#include "app_exif.h"
#include "app_osd_api.h"
#include "app_lens_api.h"
#include "app_view_param_def.h"
#include "app_view_param.h"
#include "app_user_setting.h"
#include "app_calib_api.h"
#include "app_flash_api.h"

#include "app_aaa.h"
#include "app_ae_private.h"
#include "app_face_detect_ex.h"
#include "app_3aalg.h"
#include "app_still_iq.h"
#include "app_diq.h"
#include "app_still.h"
#if ICAT_FCWS || ICAT_LDWS
#include "app_cvrws_api.h"
#endif
#include "app_awbalg_api.h"
#include "app_aealg_api.h"

/**************************************************************************
 *                           C O N S T A N T S                            *
 **************************************************************************/

#define FAST_AE_DO_NUM		2
#define FREQUENCE_MODE 	1


/**************************************************************************
 *                              M A C R O S                               *
 **************************************************************************/
#define DEFAULT_EXP		pv_tvidx_to_expidx(6*TV_UNIT)
#define DEFAULT_AGC		pv_svidx_to_agcidx(5*SV_UNIT)
#define CAP_STABILIZER_MAX_GAIN	(aeIso[UI_ISO_800])
#define FLASH_AE_ISO_MAX		(UI_ISO_50-1)
#define AE_CONVERGE_COARSE		(3)

#define AE_CONVERGE_COARSE_VIEW		(3)
#define AE_CONVERGE_COARSE_VIDEO	(4)

#define AE_CONVERGE_ACCEL_LIMIT     (8)
#define AE_CONVERGE_ACCEL_PARA      (1)

#define AE_CONVERGE_SPEED		    (8)	/*1= fastest, bigger = slowest */
#define AE_CONVERGE_FINE		    (2)

#define AE_STEP_CURVE_EN            (0)
#define CURVE_RATION                (128.0)
#define CPOINT                      (60)
#define EPOINT                      (64)

#define AE_FLICK_EN                 (1)
#define AE_FLICK_STEP0              (0)
#define AE_FLICK_STEP1              (1)
#define AE_TOO_BRIGHT               (2)
#define AE_TOO_DARK                 (4)
#define AE_FLICK_COUNT              (2)     /*bright and dark always switch-can't converge*/
#define AE_FLICK_STEP_RANGE         (1)
#define AE_FLICK_CONVERGE_COUNT     (10)

#if SP5K_SENSOR_OV9712 
#define AE_PV_30Fps_MIN_EXPAGC_ENTRY	26
#define AE_PV_60Fps_MIN_EXPAGC_ENTRY	41
#define AE_PV_120Fps_MIN_EXPAGC_ENTRY 46
#define AE_PV_MAX_EXPAGC_ENTRY	        198
#elif SP5K_SENSOR_OV5653
#define AE_PV_30Fps_MIN_EXPAGC_ENTRY	30//38 28
#define AE_PV_60Fps_MIN_EXPAGC_ENTRY	60
#define AE_PV_120Fps_MIN_EXPAGC_ENTRY 46
#define AE_PV_MAX_EXPAGC_ENTRY	        208//198
#elif SP5K_SENSOR_OV2715
#define AE_PV_30Fps_MIN_EXPAGC_ENTRY	33
#define AE_PV_60Fps_MIN_EXPAGC_ENTRY	(41+253-228)/*fan.xiao modify table index from 228 to 253*/
#define AE_PV_120Fps_MIN_EXPAGC_ENTRY   (22+253-228) //56
#define AE_PV_MAX_EXPAGC_ENTRY	        198
#elif SP5K_SENSOR_SONYIMX083
#define AE_PV_30Fps_MIN_EXPAGC_ENTRY	6
#define AE_PV_60Fps_MIN_EXPAGC_ENTRY	41
#define AE_PV_120Fps_MIN_EXPAGC_ENTRY 46
#define AE_PV_MAX_EXPAGC_ENTRY	        198
#elif SP5K_SENSOR_MT9F002
#define AE_PV_30Fps_MIN_EXPAGC_ENTRY	12
#define AE_PV_60Fps_MIN_EXPAGC_ENTRY	41
#define AE_PV_120Fps_MIN_EXPAGC_ENTRY 46
#define AE_PV_MAX_EXPAGC_ENTRY	        198
#elif SP5K_SENSOR_MI5100p
#define AE_PV_30Fps_MIN_EXPAGC_ENTRY	33
#define AE_PV_60Fps_MIN_EXPAGC_ENTRY	41
#define AE_PV_120Fps_MIN_EXPAGC_ENTRY   22
#define AE_PV_MAX_EXPAGC_ENTRY	        198
#elif SP5K_SENSOR_AR0330CS
#define AE_PV_30Fps_MIN_EXPAGC_ENTRY	28
#define AE_PV_60Fps_MIN_EXPAGC_ENTRY	41
#define AE_PV_120Fps_MIN_EXPAGC_ENTRY   46
#define AE_PV_MAX_EXPAGC_ENTRY	        198
#elif SP5K_SENSOR_OV8810
#define AE_PV_30Fps_MIN_EXPAGC_ENTRY	21
#define AE_PV_60Fps_MIN_EXPAGC_ENTRY	41
#define AE_PV_120Fps_MIN_EXPAGC_ENTRY   22
#define AE_PV_MAX_EXPAGC_ENTRY	        159
#else
#define AE_PV_30Fps_MIN_EXPAGC_ENTRY	28
#define AE_PV_60Fps_MIN_EXPAGC_ENTRY	41
#define AE_PV_120Fps_MIN_EXPAGC_ENTRY 46
#define AE_PV_MAX_EXPAGC_ENTRY	        198
#endif

#if SP5K_ALGORITHM_AE //lester 20120402
#define DEFAULT_EXPAGC_ENTRY		(90)/*54 */
#else
#define DEFAULT_EXPAGC_ENTRY		(30)/*54 */
#endif

//lester 20120612 s
//#define FLASH_ROLLING

#ifdef FLASH_ROLLING
#define STD_EXP_1_10				52
#define FAKE 						2
#endif
//lester 20120612 e

#define CAPTURE_EQUAL_PREVIEW       1//lyc@add
 #define ABS(a) (((a) < 0) ? -(a) : (a))
 #define MAX(a,b) ((a)>(b))?(a):(b)
 #define MIN(a,b) ((a)<(b))?(a):(b)
/**************************************************************************
 *                          D A T A    T Y P E S                          *
 **************************************************************************/
static int lester_step=0;
static int lester_lv=0;

BOOL aeFreqDbg=FALSE;
BOOL aeRunDump=FALSE;
static int	aeFreqDbgCnt, dbgTooDarkCnt=0, dbgTooBrightCnt=0;
UINT32	aeFreqDbgSlot;

#if CAM_TYPE_CVR
#if SP5K_ALGORITHM_AE //lester 20120402
static SINT32 aebiascmp[AE_BIAS_MAX] = { 2000,1000,0,-1000,-2000 };
#else
static SINT32 aebiascmp[AE_BIAS_MAX] = { -32,-16,0,16,32 };
#endif
#else
#if SP5K_ALGORITHM_AE //lester 20120402
static SINT32 aebiascmp[AE_BIAS_MAX] = { 2000,1700,1300,1000,700,300,0,-300,-700,-1000,-1300,-1700,-2000 };
#else
static SINT32 aebiascmp[AE_BIAS_MAX] = { -32,-27,-21,-16,-10,-5,0,5,10,16,21,27,32 };
#endif
#endif

static SINT32 ae50HzCapFlickerShut[AE_CAP_FLICKER_SHUT_NUM] = {CAP_EXP_50HZ_1_100,CAP_EXP_50HZ_1_50,CAP_EXP_50HZ_1_30,CAP_EXP_50HZ_1_20,CAP_EXP_50HZ_1_16,CAP_EXP_50HZ_1_8,CAP_EXP_50HZ_1_4,CAP_EXP_50HZ_1_2,CAP_EXP_50HZ_1_01};
static SINT32 ae60HzCapFlickerShut[AE_CAP_FLICKER_SHUT_NUM] = {CAP_EXP_60HZ_1_120,CAP_EXP_60HZ_1_60,CAP_EXP_60HZ_1_30,CAP_EXP_60HZ_1_20,CAP_EXP_60HZ_1_16,CAP_EXP_60HZ_1_8,CAP_EXP_60HZ_1_4,CAP_EXP_60HZ_1_2,CAP_EXP_60HZ_1_01};
static SINT32 aeIris[2] = { IRIS_STEP_1, IRIS_STEP_2};
static SINT32 aeIso[ISO_NUM] = {STD_ISO_50, STD_ISO_100, STD_ISO_200, STD_ISO_400, STD_ISO_800, STD_ISO_1600 };
static SINT32 aeshut[EXP_NUM] = { EXP_16_01,EXP_8_01, EXP_4_01, EXP_2_01, EXP_1_01, EXP_1_02, EXP_1_04, EXP_1_08, EXP_1_16,EXP_1_20,EXP_1_24,EXP_1_32,\
									EXP_1_64, EXP_1_128, EXP_1_256, EXP_1_512, EXP_1_1024, EXP_1_2048, EXP_1_4096, EXP_1_8192,EXP_1_16384 };
static SINT32 aesafeshut[AE_ZOOM_LEVEL_MAX] =  { EXP_1_16, EXP_1_16, EXP_1_16, EXP_1_16, EXP_1_16, EXP_1_16, EXP_1_16};

static SINT32 aeShortestShutter = EXP_BOUNDARY_H;
static SINT32 aeLongestShutter = EXP_BOUNDARY_L;

static SINT32 capShortestShutter = EXP_CAP_BOUNDARY_H;
static SINT32 capLongestShutter = EXP_CAP_BOUNDARY_L;

static SINT32 aeMaxGain = AGC_BOUNDARY_H;
static SINT32 aeMinGain = AGC_BOUNDARY_L;

static SINT32 capMaxGain = AGC_CAP_BOUNDARY_H;
static SINT32 capMinGain = AGC_CAP_BOUNDARY_L;

static SINT32 capSatAgc = DEFAULT_SAT_AGCIDX;
static SINT32 pvSatAgc = DEFAULT_PV_SAT_AGCIDX;

#ifdef DO_ISO_XSHIFT
static SINT32 capSatGainSVIDX = DEFAULT_SAT_AGCIDX
								-CAP_ISO_XSHIFT
								+ (STD_ISO_100-DEFAULT_CAP_ISO100); /* aeCapIsoOfs */
#else
static SINT32 capSatGainSVIDX = DEFAULT_SAT_AGCIDX
								+(STD_ISO_100-DEFAULT_CAP_ISO100); /* aeCapIsoOfs */
#endif

/**************************************************************************
 *                         G L O B A L    D A T A                         *
 **************************************************************************/
static appAeCb_t aeCb;
appAePara_t aePara;

static BOOL fAeEnable=1;
static BOOL fAeInfoEnable=0;
static BOOL fAeLock=0;

static UINT8 aeCalcCnt=0;
SINT16 aeViewIsoOfs=0;
SINT16 aeCapIsoOfs=0;

sp5kEvUnit_t evUnit;
sp5kExpLimit_t expLimitPv,expLimitCap;
sp5kAgcLimit_t agcLimitPv,agcLimitCap;
static SINT32 aeConvErr = AE_CONVERGE_FINE;

static SINT32 expidx, nextexp, step, rec_bstep, rec_dstep;
static SINT32 agcidx, nextagc, apeidx, nextape;
static UINT32 Convcount = 0;
static SINT32 nextEntry;
static UINT32 PvIsoShift= 0;
static UINT32 capIsoShift= 0;
static UINT32 aeFrameRateSel = 30;//4 //fan.xiao modified 2011-12-07 , 11:35:36
static UINT32 aeFlickerSel;

//4 //fan.xiao modified 2011-08-08 , 11:58:53
static SINT32 *pAeCapFlikrShut;

typedef struct 
{
	UINT16 idx;
	UINT16 expidx;
	UINT16 agcidx;
} aeExpAgcIdx_t;

static aeExpAgcIdx_t ae30Fps60HzExpAgcSet[253]=
{
	{0,		PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+120 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,156*/
	{1,		PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+119 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,155*/
	{2,		PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+118 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,154*/
	{3,		PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+117 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,153*/
	{4,		PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+116 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,152*/
	{5,		PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+115 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,151*/
	{6,		PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+114 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,150*/
	{7,		PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+113 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,149*/
	{8,		PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+112 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,156*/
	{9,		PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+111 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,155*/
	{10,		PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+110 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,154*/
	{11,		PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+109 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,153*/
	{12,		PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+108 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,152*/
	{13,		PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+107 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,151*/
	{14,		PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+106 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,150*/
	{15,		PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+105 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,149*/
	{16,		PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+104 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,148*/
	{17,		PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+103 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,147*/
	{18,		PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+102 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,146*/
	{19,		PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+101 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,145*/
	{20,		PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+100 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,144*/
	{21,		PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+99 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,143*/
	{22,		PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+98 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,142*/
	{23,		PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+97 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,141*/
	{24,		PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+96 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,140*/
	{25,		PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+95 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,156*/
	{26, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+94 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,155*/
	{27, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+93 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,154*/
	{28, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+92 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,153*/
	{29, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+91 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,152*/
	{30, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+90 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,151*/
	{31, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+89 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,150*/
	{32, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+88 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,149*/
	{33, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+87 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,148*/
	{34, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+86 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,147*/
	{35, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+85 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,146*/
	{36, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+84 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,145*/
	{37, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+83 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,144*/
	{38, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+82 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,143*/
	{39, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+81 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,142*/
	{40, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+80 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,141*/
	{41, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+79 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,140*/
	{42, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+78 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,139*/
	{43, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+77 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,138*/
	{44, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+76 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,137*/
	{45, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+75 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,136*/
	{46, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+74 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,135*/
	{47, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+73 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,134*/
	{48, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+72 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,133*/
	{49, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+71 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,132*/
	{50, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+70 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,131*/
	{51, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+69 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,130*/
	{52, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+68 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,129*/
	{53, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+67 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,128*/
	{54, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+66 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,127*/
	{55, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+65 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,126*/
	{56, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+64 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,125*/
	{57, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+63 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,124*/
	{58, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+62 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,123*/
	{59, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+61 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,122*/
	{60, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+60 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,121*/
	{61, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+59 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,120*/
	{62, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+58 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,119*/
	{63, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+57 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,118*/
	{64, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+56 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,117*/
	{65, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+55 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,116*/
	{66, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+54 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,115*/
	{67, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+53 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,114*/
	{68, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+52 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,113*/
	{69, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+51 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,112*/
	{70, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+50 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,111*/
	{71, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+49 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,110*/
	{72, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+48 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,109*/
	{73, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+47 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,108*/
	{74, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+46 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,107*/
	{75, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+45 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,106*/
	{76, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+44 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,105*/
	{77, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+43 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,104*/
	{78, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+42 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,103*/
	{79, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+41 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,102*/
	{80, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+40 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,101*/
	{81, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+39 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,100*/
	{82, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+38 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,99*/
	{83, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+37 - (113 - PRV_EXP_60HZ_1_30-1))},/*85,98*/
	{84, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+36 - (113 - PRV_EXP_60HZ_1_30-1))},/*96,108*/
	{85, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+35 - (113 - PRV_EXP_60HZ_1_30-1))},/*96,107*/
	{86, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+34 - (113 - PRV_EXP_60HZ_1_30-1))},/*96,106*/
	{87, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+33 - (113 - PRV_EXP_60HZ_1_30-1))},/*96,105*/
	{88, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+32 - (113 - PRV_EXP_60HZ_1_30-1))},/*96,104*/
	{89, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+31 - (113 - PRV_EXP_60HZ_1_30-1))},/*96,103*/
	{90, 	PRV_EXP_60HZ_1_30,	(PRV_AGC_MIN_IDX+30 - (113 - PRV_EXP_60HZ_1_30-1))},/*96,102*/
	{91, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+29 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,101*/
	{92, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+28 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,100*/
	{93, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+27 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,99*/
	{94, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+26 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,98*/
	{95, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+25 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,97*/
	{96, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+24 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,96*/
	{97, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+23 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,95*/
	{98, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+22 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,94*/
	{99, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+21 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,93*/
	{100,	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+20 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,92*/
	{101,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+19 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,106*/
	{102,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+18 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,105*/
	{103,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+17 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,104*/
	{104,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+16 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,103*/
	{105,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+15 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,102*/
	{106,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+14 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,101*/
	{107,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+13 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,100*/
	{108,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+12 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,99*/
	{109,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+11 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,98*/
	{110,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+10 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,97*/
	{111,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+9 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,96*/
	{112,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+8 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,95*/
	{113,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+7 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,94*/
	{114,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+6 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,93*/
	{115,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+5 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,92*/
	{116,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+4 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,91*/
	{117,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+3 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,90*/
	{118,	113,					(PRV_AGC_MIN_IDX+3)},/*113,91*/
	{119,	113,					(PRV_AGC_MIN_IDX+2)},/*113,90*/
	{120,	113,					(PRV_AGC_MIN_IDX+1)},/*113,89*/
	{121,	113,	PRV_AGC_MIN_IDX},/*113,88*/
	{122,	114,	PRV_AGC_MIN_IDX},
	{123,	115,	PRV_AGC_MIN_IDX},
	{124,	116,	PRV_AGC_MIN_IDX},
	{125,	117,	PRV_AGC_MIN_IDX},
	{126,	118,	PRV_AGC_MIN_IDX},
	{127,	119,	PRV_AGC_MIN_IDX},
	{128,	120,	PRV_AGC_MIN_IDX},
	{129,	121,	PRV_AGC_MIN_IDX},
	{130,	122,	PRV_AGC_MIN_IDX},
	{131,	123,	PRV_AGC_MIN_IDX},
	{132,	124,	PRV_AGC_MIN_IDX},
	{133,	125,	PRV_AGC_MIN_IDX},
	{134,	126,	PRV_AGC_MIN_IDX},
	{135,	127,	PRV_AGC_MIN_IDX},
	{136,	128,	PRV_AGC_MIN_IDX},
	{137,	129,	PRV_AGC_MIN_IDX},
	{138,	130,	PRV_AGC_MIN_IDX},
	{139,	131,	PRV_AGC_MIN_IDX},
	{140,	132,	PRV_AGC_MIN_IDX},
	{141,	133,	PRV_AGC_MIN_IDX},
	{142,	134,	PRV_AGC_MIN_IDX},
	{143,	135,	PRV_AGC_MIN_IDX},
	{144,	136,	PRV_AGC_MIN_IDX},
	{145,	137,	PRV_AGC_MIN_IDX},
	{146,	138,	PRV_AGC_MIN_IDX},
	{147,	139,	PRV_AGC_MIN_IDX},
	{148,	140,	PRV_AGC_MIN_IDX},
	{149,	141,	PRV_AGC_MIN_IDX},
	{150,	142,	PRV_AGC_MIN_IDX},
	{151,	143,	PRV_AGC_MIN_IDX},
	{152,	144,	PRV_AGC_MIN_IDX},
	{153,	145,	PRV_AGC_MIN_IDX},
	{154,	146,	PRV_AGC_MIN_IDX},
	{155,	147,	PRV_AGC_MIN_IDX},
	{156,	148,	PRV_AGC_MIN_IDX},
	{157,	149,	PRV_AGC_MIN_IDX},
	{158,	150,	PRV_AGC_MIN_IDX},
	{159,	151,	PRV_AGC_MIN_IDX},
	{160,	152,	PRV_AGC_MIN_IDX},
	{161,	153,	PRV_AGC_MIN_IDX},
	{162,	154,	PRV_AGC_MIN_IDX},
	{163,	155,	PRV_AGC_MIN_IDX},
	{164,	156,	PRV_AGC_MIN_IDX},
	{165,	157,	PRV_AGC_MIN_IDX},
	{166,	158,	PRV_AGC_MIN_IDX},
	{167,	159,	PRV_AGC_MIN_IDX},
	{168,	160,	PRV_AGC_MIN_IDX},
	{169,	161,	PRV_AGC_MIN_IDX},
	{170,	162,	PRV_AGC_MIN_IDX},
	{171,	163,	PRV_AGC_MIN_IDX},
	{172,	164,	PRV_AGC_MIN_IDX},
	{173,	165,	PRV_AGC_MIN_IDX},
	{174,	166,	PRV_AGC_MIN_IDX},
	{175,	167,	PRV_AGC_MIN_IDX},
	{176,	168,	PRV_AGC_MIN_IDX},
	{177,	169,	PRV_AGC_MIN_IDX},
	{178,	170,	PRV_AGC_MIN_IDX},
	{179,	171,	PRV_AGC_MIN_IDX},
	{180,	172,	PRV_AGC_MIN_IDX},
	{181,	173,	PRV_AGC_MIN_IDX},
	{182,	174,	PRV_AGC_MIN_IDX},
	{183,	175,	PRV_AGC_MIN_IDX},
	{184,	176,	PRV_AGC_MIN_IDX},
	{185,	177,	PRV_AGC_MIN_IDX},
	{186,	178,	PRV_AGC_MIN_IDX},
	{187,	179,	PRV_AGC_MIN_IDX},
	{188,	180,	PRV_AGC_MIN_IDX},
	{189,	181,	PRV_AGC_MIN_IDX},
	{190,	182,	PRV_AGC_MIN_IDX},
	{191,	183,	PRV_AGC_MIN_IDX},
	{192,	184,	PRV_AGC_MIN_IDX},
	{193,	185,	PRV_AGC_MIN_IDX},
	{194,	186,	PRV_AGC_MIN_IDX},
	{195,	187,	PRV_AGC_MIN_IDX},
	{196,	188,	PRV_AGC_MIN_IDX},
	{197,	189,	PRV_AGC_MIN_IDX},
	{198,	190,	PRV_AGC_MIN_IDX},
	{199,	191,	PRV_AGC_MIN_IDX},
	{200,	192,	PRV_AGC_MIN_IDX},
	{201,	193,	PRV_AGC_MIN_IDX},
	{202,	194,	PRV_AGC_MIN_IDX},
	{203,	195,	PRV_AGC_MIN_IDX},
	{204,	196,	PRV_AGC_MIN_IDX},
	{205,	197,	PRV_AGC_MIN_IDX},
	{206,	198,	PRV_AGC_MIN_IDX},
	{207,	199,	PRV_AGC_MIN_IDX},
	{208,	200,	PRV_AGC_MIN_IDX},
	{209,	201,	PRV_AGC_MIN_IDX},
	{210,	202,	PRV_AGC_MIN_IDX},
	{211,	203,	PRV_AGC_MIN_IDX},
	{212,	204,	PRV_AGC_MIN_IDX},
	{213,	205,	PRV_AGC_MIN_IDX},
	{214,	206,	PRV_AGC_MIN_IDX},
	{215,	207,	PRV_AGC_MIN_IDX},
	{216,	208,	PRV_AGC_MIN_IDX},
	{217,	209,	PRV_AGC_MIN_IDX},
	{218,	210,	PRV_AGC_MIN_IDX},
	{219,	211,	PRV_AGC_MIN_IDX},
	{220,	212,	PRV_AGC_MIN_IDX},
	{221,	213,	PRV_AGC_MIN_IDX},
	{222,	214,	PRV_AGC_MIN_IDX},
	{223,	215,	PRV_AGC_MIN_IDX},
	{224,	216,	PRV_AGC_MIN_IDX},
	{225,	217,	PRV_AGC_MIN_IDX},
	{226,	218,	PRV_AGC_MIN_IDX},
	{227,	219,	PRV_AGC_MIN_IDX},
	{228,	220,	PRV_AGC_MIN_IDX},
	{229,	221,	PRV_AGC_MIN_IDX},
	{230,	222,	PRV_AGC_MIN_IDX},
	{231,	223,	PRV_AGC_MIN_IDX},
	{232,	224,	PRV_AGC_MIN_IDX},
	{233,	225,	PRV_AGC_MIN_IDX},
	{234,	226,	PRV_AGC_MIN_IDX},
	{235,	227,	PRV_AGC_MIN_IDX},
	{236,	228,	PRV_AGC_MIN_IDX},
	{237,	229,	PRV_AGC_MIN_IDX},
	{238,	230,	PRV_AGC_MIN_IDX},
	{239,	231,	PRV_AGC_MIN_IDX},
	{240,	232,	PRV_AGC_MIN_IDX},
	{241,	233,	PRV_AGC_MIN_IDX},
	{242,	234,	PRV_AGC_MIN_IDX},
	{243,	235,	PRV_AGC_MIN_IDX},
	{244,	236,	PRV_AGC_MIN_IDX},
	{245,	237,	PRV_AGC_MIN_IDX},
	{246,	238,	PRV_AGC_MIN_IDX},
	{247,	239,	PRV_AGC_MIN_IDX},
	{248,	240,	PRV_AGC_MIN_IDX},
	{249,	241,	PRV_AGC_MIN_IDX},
	{250,	242,	PRV_AGC_MIN_IDX},
	{251,	243,	PRV_AGC_MIN_IDX},
	{252,	244,	PRV_AGC_MIN_IDX},	
};

static aeExpAgcIdx_t ae30Fps50HzExpAgcSet[253]=
{
	{0,		PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+116 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,152*/
	{1,		PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+115 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,151*/
	{2,		PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+114 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,150*/
	{3,		PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+113 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,149*/
	{4,		PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+112 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,156*/
	{5,		PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+111 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,155*/
	{6,		PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+110 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,154*/
	{7,		PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+109 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,153*/
	{8,		PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+108 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,152*/
	{9,		PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+107 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,151*/
	{10,		PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+106 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,150*/
	{11,		PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+105 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,149*/
	{12,		PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+104 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,148*/
	{13,		PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+103 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,147*/
	{14,		PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+102 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,146*/
	{15,		PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+101 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,145*/
	{16,		PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+100 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,144*/
	{17,		PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+99 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,143*/
	{18,		PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+98 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,142*/
	{19,		PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+97 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,141*/
	{20,		PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+96 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,140*/
	{21,		PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+95 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,156*/
	{22,		PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+94 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,155*/
	{23,		PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+93 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,154*/
	{24,		PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+92 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,153*/
	{25,		PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+91 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,152*/
	{26, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+90 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,151*/
	{27, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+89 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,150*/
	{28, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+88 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,149*/
	{29, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+87 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,148*/
	{30, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+86 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,147*/
	{31, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+85 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,146*/
	{32, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+84 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,145*/
	{33, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+83 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,144*/
	{34, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+82 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,143*/
	{35, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+81 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,142*/
	{36, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+80 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,141*/
	{37, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+79 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,140*/
	{38, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+78 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,139*/
	{39, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+77 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,138*/
	{40, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+76 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,137*/
	{41, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+75 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,136*/
	{42, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+74 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,135*/
	{43, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+73 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,134*/
	{44, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+72 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,133*/
	{45, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+71 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,132*/
	{46, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+70 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,131*/
	{47, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+69 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,130*/
	{48, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+68 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,129*/
	{49, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+67 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,128*/
	{50, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+66 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,127*/
	{51, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+65 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,126*/
	{52, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+64 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,125*/
	{53, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+63 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,124*/
	{54, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+62 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,123*/
	{55, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+61 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,122*/
	{56, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+60 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,121*/
	{57, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+59 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,120*/
	{58, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+58 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,119*/
	{59, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+57 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,118*/
	{60, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+56 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,117*/
	{61, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+55 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,116*/
	{62, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+54 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,115*/
	{63, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+53 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,114*/
	{64, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+52 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,113*/
	{65, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+51 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,112*/
	{66, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+50 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,111*/
	{67, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+49 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,110*/
	{68, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+48 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,109*/
	{69, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+47 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,108*/
	{70, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+46 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,107*/
	{71, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+45 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,106*/
	{72, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+44 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,105*/
	{73, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+43 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,104*/
	{74, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+42 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,103*/
	{75, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+41 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,102*/
	{76, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+40 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,101*/
	{77, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+39 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,100*/
	{78, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+38 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,99*/
	{79, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+37 - (109 - PRV_EXP_50HZ_1_30-1))},/*85,98*/
	{80, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+36 - (109 - PRV_EXP_50HZ_1_30-1))},/*96,108*/
	{81, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+35 - (109 - PRV_EXP_50HZ_1_30-1))},/*96,107*/
	{82, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+34 - (109 - PRV_EXP_50HZ_1_30-1))},/*96,106*/
	{83, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+33 - (109 - PRV_EXP_50HZ_1_30-1))},/*96,105*/
	{84, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+32 - (109 - PRV_EXP_50HZ_1_30-1))},/*96,104*/
	{85, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+31 - (109 - PRV_EXP_50HZ_1_30-1))},/*96,103*/
	{86, 	PRV_EXP_50HZ_1_30,	(PRV_AGC_MIN_IDX+30 - (109 - PRV_EXP_50HZ_1_30-1))},/*96,102*/
	{87, 	PRV_EXP_50HZ_1_50,	(PRV_AGC_MIN_IDX+29 - (109 - PRV_EXP_50HZ_1_50-1))},/*96,101*/
	{88, 	PRV_EXP_50HZ_1_50,	(PRV_AGC_MIN_IDX+28 - (109 - PRV_EXP_50HZ_1_50-1))},/*96,100*/
	{89, 	PRV_EXP_50HZ_1_50,	(PRV_AGC_MIN_IDX+27 - (109 - PRV_EXP_50HZ_1_50-1))},/*96,99*/
	{90, 	PRV_EXP_50HZ_1_50,	(PRV_AGC_MIN_IDX+26 - (109 - PRV_EXP_50HZ_1_50-1))},/*96,98*/
	{91, 	PRV_EXP_50HZ_1_50,	(PRV_AGC_MIN_IDX+25 - (109 - PRV_EXP_50HZ_1_50-1))},/*96,97*/
	{92, 	PRV_EXP_50HZ_1_50,	(PRV_AGC_MIN_IDX+24 - (109 - PRV_EXP_50HZ_1_50-1))},/*96,96*/
	{93, 	PRV_EXP_50HZ_1_50,	(PRV_AGC_MIN_IDX+23 - (109 - PRV_EXP_50HZ_1_50-1))},/*96,95*/
	{94, 	PRV_EXP_50HZ_1_50,	(PRV_AGC_MIN_IDX+22 - (109 - PRV_EXP_50HZ_1_50-1))},/*96,94*/
	{95, 	PRV_EXP_50HZ_1_50,	(PRV_AGC_MIN_IDX+21 - (109 - PRV_EXP_50HZ_1_50-1))},/*96,93*/
	{96, 	PRV_EXP_50HZ_1_50,	(PRV_AGC_MIN_IDX+20 - (109 - PRV_EXP_50HZ_1_50-1))},/*96,92*/
	{97, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+19 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,106*/
	{98, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+18 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,105*/
	{99, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+17 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,104*/
	{100,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+16 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,103*/
	{101,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+15 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,102*/
	{102,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+14 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,101*/
	{103,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+13 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,100*/
	{104,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+12 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,99*/
	{105,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+11 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,98*/
	{106,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+10 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,97*/
	{107,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+9 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,96*/
	{108,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+8 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,95*/
	{109,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+7 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,94*/
	{110,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+6 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,93*/
	{111,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+5 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,92*/
	{112,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+4 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,91*/
	{113,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+3 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,90*/
	{114, 	109, 				(PRV_AGC_MIN_IDX+3)},/*109,91*/
	{115, 	109, 				(PRV_AGC_MIN_IDX+2)},/*109,90*/
	{116, 	109, 				(PRV_AGC_MIN_IDX+1)},/*109,89*/
	{117, 	109, 				PRV_AGC_MIN_IDX},/*109,88*/
	{118, 	110,					PRV_AGC_MIN_IDX},/*110,88*/
	{119, 	111,					PRV_AGC_MIN_IDX},/*111,88*/
	{120, 	112,					PRV_AGC_MIN_IDX},/*112,88*/
	{121,	113,	PRV_AGC_MIN_IDX},/*113,88*/
	{122,	114,	PRV_AGC_MIN_IDX},
	{123,	115,	PRV_AGC_MIN_IDX},
	{124,	116,	PRV_AGC_MIN_IDX},
	{125,	117,	PRV_AGC_MIN_IDX},
	{126,	118,	PRV_AGC_MIN_IDX},
	{127,	119,	PRV_AGC_MIN_IDX},
	{128,	120,	PRV_AGC_MIN_IDX},
	{129,	121,	PRV_AGC_MIN_IDX},
	{130,	122,	PRV_AGC_MIN_IDX},
	{131,	123,	PRV_AGC_MIN_IDX},
	{132,	124,	PRV_AGC_MIN_IDX},
	{133,	125,	PRV_AGC_MIN_IDX},
	{134,	126,	PRV_AGC_MIN_IDX},
	{135,	127,	PRV_AGC_MIN_IDX},
	{136,	128,	PRV_AGC_MIN_IDX},
	{137,	129,	PRV_AGC_MIN_IDX},
	{138,	130,	PRV_AGC_MIN_IDX},
	{139,	131,	PRV_AGC_MIN_IDX},
	{140,	132,	PRV_AGC_MIN_IDX},
	{141,	133,	PRV_AGC_MIN_IDX},
	{142,	134,	PRV_AGC_MIN_IDX},
	{143,	135,	PRV_AGC_MIN_IDX},
	{144,	136,	PRV_AGC_MIN_IDX},
	{145,	137,	PRV_AGC_MIN_IDX},
	{146,	138,	PRV_AGC_MIN_IDX},
	{147,	139,	PRV_AGC_MIN_IDX},
	{148,	140,	PRV_AGC_MIN_IDX},
	{149,	141,	PRV_AGC_MIN_IDX},
	{150,	142,	PRV_AGC_MIN_IDX},
	{151,	143,	PRV_AGC_MIN_IDX},
	{152,	144,	PRV_AGC_MIN_IDX},
	{153,	145,	PRV_AGC_MIN_IDX},
	{154,	146,	PRV_AGC_MIN_IDX},
	{155,	147,	PRV_AGC_MIN_IDX},
	{156,	148,	PRV_AGC_MIN_IDX},
	{157,	149,	PRV_AGC_MIN_IDX},
	{158,	150,	PRV_AGC_MIN_IDX},
	{159,	151,	PRV_AGC_MIN_IDX},
	{160,	152,	PRV_AGC_MIN_IDX},
	{161,	153,	PRV_AGC_MIN_IDX},
	{162,	154,	PRV_AGC_MIN_IDX},
	{163,	155,	PRV_AGC_MIN_IDX},
	{164,	156,	PRV_AGC_MIN_IDX},
	{165,	157,	PRV_AGC_MIN_IDX},
	{166,	158,	PRV_AGC_MIN_IDX},
	{167,	159,	PRV_AGC_MIN_IDX},
	{168,	160,	PRV_AGC_MIN_IDX},
	{169,	161,	PRV_AGC_MIN_IDX},
	{170,	162,	PRV_AGC_MIN_IDX},
	{171,	163,	PRV_AGC_MIN_IDX},
	{172,	164,	PRV_AGC_MIN_IDX},
	{173,	165,	PRV_AGC_MIN_IDX},
	{174,	166,	PRV_AGC_MIN_IDX},
	{175,	167,	PRV_AGC_MIN_IDX},
	{176,	168,	PRV_AGC_MIN_IDX},
	{177,	169,	PRV_AGC_MIN_IDX},
	{178,	170,	PRV_AGC_MIN_IDX},
	{179,	171,	PRV_AGC_MIN_IDX},
	{180,	172,	PRV_AGC_MIN_IDX},
	{181,	173,	PRV_AGC_MIN_IDX},
	{182,	174,	PRV_AGC_MIN_IDX},
	{183,	175,	PRV_AGC_MIN_IDX},
	{184,	176,	PRV_AGC_MIN_IDX},
	{185,	177,	PRV_AGC_MIN_IDX},
	{186,	178,	PRV_AGC_MIN_IDX},
	{187,	179,	PRV_AGC_MIN_IDX},
	{188,	180,	PRV_AGC_MIN_IDX},
	{189,	181,	PRV_AGC_MIN_IDX},
	{190,	182,	PRV_AGC_MIN_IDX},
	{191,	183,	PRV_AGC_MIN_IDX},
	{192,	184,	PRV_AGC_MIN_IDX},
	{193,	185,	PRV_AGC_MIN_IDX},
	{194,	186,	PRV_AGC_MIN_IDX},
	{195,	187,	PRV_AGC_MIN_IDX},
	{196,	188,	PRV_AGC_MIN_IDX},
	{197,	189,	PRV_AGC_MIN_IDX},
	{198,	190,	PRV_AGC_MIN_IDX},
	{199,	191,	PRV_AGC_MIN_IDX},
	{200,	192,	PRV_AGC_MIN_IDX},
	{201,	193,	PRV_AGC_MIN_IDX},
	{202,	194,	PRV_AGC_MIN_IDX},
	{203,	195,	PRV_AGC_MIN_IDX},
	{204,	196,	PRV_AGC_MIN_IDX},
	{205,	197,	PRV_AGC_MIN_IDX},
	{206,	198,	PRV_AGC_MIN_IDX},
	{207,	199,	PRV_AGC_MIN_IDX},
	{208,	200,	PRV_AGC_MIN_IDX},
	{209,	201,	PRV_AGC_MIN_IDX},
	{210,	202,	PRV_AGC_MIN_IDX},
	{211,	203,	PRV_AGC_MIN_IDX},
	{212,	204,	PRV_AGC_MIN_IDX},
	{213,	205,	PRV_AGC_MIN_IDX},
	{214,	206,	PRV_AGC_MIN_IDX},
	{215,	207,	PRV_AGC_MIN_IDX},
	{216,	208,	PRV_AGC_MIN_IDX},
	{217,	209,	PRV_AGC_MIN_IDX},
	{218,	210,	PRV_AGC_MIN_IDX},
	{219,	211,	PRV_AGC_MIN_IDX},
	{220,	212,	PRV_AGC_MIN_IDX},
	{221,	213,	PRV_AGC_MIN_IDX},
	{222,	214,	PRV_AGC_MIN_IDX},
	{223,	215,	PRV_AGC_MIN_IDX},
	{224,	216,	PRV_AGC_MIN_IDX},
	{225,	217,	PRV_AGC_MIN_IDX},
	{226,	218,	PRV_AGC_MIN_IDX},
	{227,	219,	PRV_AGC_MIN_IDX},
	{228,	220,	PRV_AGC_MIN_IDX},
	{229,	221,	PRV_AGC_MIN_IDX},
	{230,	222,	PRV_AGC_MIN_IDX},
	{231,	223,	PRV_AGC_MIN_IDX},
	{232,	224,	PRV_AGC_MIN_IDX},
	{233,	225,	PRV_AGC_MIN_IDX},
	{234,	226,	PRV_AGC_MIN_IDX},
	{235,	227,	PRV_AGC_MIN_IDX},
	{236,	228,	PRV_AGC_MIN_IDX},
	{237,	229,	PRV_AGC_MIN_IDX},
	{238,	230,	PRV_AGC_MIN_IDX},
	{239,	231,	PRV_AGC_MIN_IDX},
	{240,	232,	PRV_AGC_MIN_IDX},
	{241,	233,	PRV_AGC_MIN_IDX},
	{242,	234,	PRV_AGC_MIN_IDX},
	{243,	235,	PRV_AGC_MIN_IDX},
	{244,	236,	PRV_AGC_MIN_IDX},
	{245,	237,	PRV_AGC_MIN_IDX},
	{246,	238,	PRV_AGC_MIN_IDX},
	{247,	239,	PRV_AGC_MIN_IDX},
	{248,	240,	PRV_AGC_MIN_IDX},
	{249,	241,	PRV_AGC_MIN_IDX},
	{250,	242,	PRV_AGC_MIN_IDX},
	{251,	243,	PRV_AGC_MIN_IDX},
	{252,	244,	PRV_AGC_MIN_IDX},	
};

static aeExpAgcIdx_t ae60Fps60HzExpAgcSet[253]=
{
	{0,		PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+120 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,156*/
	{1,		PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+119 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,155*/
	{2,		PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+118 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,154*/
	{3,		PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+117 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,153*/
	{4,		PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+116 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,152*/
	{5,		PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+115 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,151*/
	{6,		PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+114 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,150*/
	{7,		PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+113 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,149*/
	{8,		PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+112 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,156*/
	{9,		PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+111 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,155*/
	{10,		PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+110 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,154*/
	{11,		PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+109 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,153*/
	{12,		PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+108 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,152*/
	{13,		PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+107 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,151*/
	{14,		PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+106 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,150*/
	{15,		PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+105 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,149*/
	{16,		PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+104 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,148*/
	{17,		PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+103 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,147*/
	{18,		PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+102 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,146*/
	{19,		PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+101 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,145*/
	{20,		PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+100 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,144*/
	{21,		PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+99 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,143*/
	{22,		PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+98 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,142*/
	{23,		PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+97 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,141*/
	{24,		PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+96 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,140*/
	{25,		PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+95 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,156*/
	{26, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+94 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,155*/
	{27, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+93 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,154*/
	{28, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+92 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,153*/
	{29, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+91 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,152*/
	{30, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+90 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,151*/
	{31, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+89 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,150*/
	{32, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+88 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,149*/
	{33, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+87 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,148*/
	{34, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+86 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,147*/
	{35, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+85 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,146*/
	{36, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+84 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,145*/
	{37, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+83 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,144*/
	{38, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+82 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,143*/
	{39, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+81 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,142*/
	{40, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+80 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,141*/
	{41, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+79 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,140*/
	{42, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+78 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,139*/
	{43, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+77 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,138*/
	{44, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+76 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,137*/
	{45, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+75 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,136*/
	{46, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+74 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,135*/
	{47, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+73 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,134*/
	{48, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+72 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,133*/
	{49, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+71 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,132*/
	{50, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+70 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,131*/
	{51, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+69 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,130*/
	{52, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+68 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,129*/
	{53, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+67 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,128*/
	{54, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+66 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,127*/
	{55, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+65 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,126*/
	{56, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+64 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,125*/
	{57, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+63 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,124*/
	{58, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+62 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,123*/
	{59, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+61 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,122*/
	{60, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+60 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,121*/
	{61, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+59 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,120*/
	{62, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+58 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,119*/
	{63, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+57 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,118*/
	{64, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+56 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,117*/
	{65, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+55 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,116*/
	{66, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+54 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,115*/
	{67, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+53 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,114*/
	{68, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+52 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,113*/
	{69, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+51 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,112*/
	{70, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+50 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,111*/
	{71, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+49 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,110*/
	{72, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+48 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,109*/
	{73, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+47 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,108*/
	{74, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+46 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,107*/
	{75, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+45 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,106*/
	{76, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+44 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,105*/
	{77, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+43 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,104*/
	{78, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+42 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,103*/
	{79, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+41 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,102*/
	{80, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+40 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,101*/
	{81, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+39 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,100*/
	{82, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+38 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,99*/
	{83, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+37 - (113 - PRV_EXP_60HZ_1_60-1))},/*85,98*/
	{84, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+36 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,108*/
	{85, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+35 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,107*/
	{86, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+34 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,106*/
	{87, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+33 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,105*/
	{88, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+32 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,104*/
	{89, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+31 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,103*/
	{90, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+30 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,102*/
	{91, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+29 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,101*/
	{92, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+28 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,100*/
	{93, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+27 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,99*/
	{94, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+26 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,98*/
	{95, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+25 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,97*/
	{96, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+24 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,96*/
	{97, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+23 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,95*/
	{98, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+22 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,94*/
	{99, 	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+21 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,93*/
	{100,	PRV_EXP_60HZ_1_60,	(PRV_AGC_MIN_IDX+20 - (113 - PRV_EXP_60HZ_1_60-1))},/*96,92*/
	{101,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+19 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,106*/
	{102,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+18 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,105*/
	{103,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+17 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,104*/
	{104,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+16 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,103*/
	{105,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+15 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,102*/
	{106,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+14 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,101*/
	{107,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+13 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,100*/
	{108,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+12 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,99*/
	{109,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+11 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,98*/
	{110,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+10 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,97*/
	{111,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+9 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,96*/
	{112,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+8 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,95*/
	{113,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+7 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,94*/
	{114,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+6 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,93*/
	{115,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+5 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,92*/
	{116,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+4 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,91*/
	{117,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+3 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,90*/
	{118,	113,					(PRV_AGC_MIN_IDX+3)},/*113,91*/
	{119,	113,					(PRV_AGC_MIN_IDX+2)},/*113,90*/
	{120,	113,					(PRV_AGC_MIN_IDX+1)},/*113,89*/
	{121,	113,	PRV_AGC_MIN_IDX},/*113,88*/
	{122,	114,	PRV_AGC_MIN_IDX},
	{123,	115,	PRV_AGC_MIN_IDX},
	{124,	116,	PRV_AGC_MIN_IDX},
	{125,	117,	PRV_AGC_MIN_IDX},
	{126,	118,	PRV_AGC_MIN_IDX},
	{127,	119,	PRV_AGC_MIN_IDX},
	{128,	120,	PRV_AGC_MIN_IDX},
	{129,	121,	PRV_AGC_MIN_IDX},
	{130,	122,	PRV_AGC_MIN_IDX},
	{131,	123,	PRV_AGC_MIN_IDX},
	{132,	124,	PRV_AGC_MIN_IDX},
	{133,	125,	PRV_AGC_MIN_IDX},
	{134,	126,	PRV_AGC_MIN_IDX},
	{135,	127,	PRV_AGC_MIN_IDX},
	{136,	128,	PRV_AGC_MIN_IDX},
	{137,	129,	PRV_AGC_MIN_IDX},
	{138,	130,	PRV_AGC_MIN_IDX},
	{139,	131,	PRV_AGC_MIN_IDX},
	{140,	132,	PRV_AGC_MIN_IDX},
	{141,	133,	PRV_AGC_MIN_IDX},
	{142,	134,	PRV_AGC_MIN_IDX},
	{143,	135,	PRV_AGC_MIN_IDX},
	{144,	136,	PRV_AGC_MIN_IDX},
	{145,	137,	PRV_AGC_MIN_IDX},
	{146,	138,	PRV_AGC_MIN_IDX},
	{147,	139,	PRV_AGC_MIN_IDX},
	{148,	140,	PRV_AGC_MIN_IDX},
	{149,	141,	PRV_AGC_MIN_IDX},
	{150,	142,	PRV_AGC_MIN_IDX},
	{151,	143,	PRV_AGC_MIN_IDX},
	{152,	144,	PRV_AGC_MIN_IDX},
	{153,	145,	PRV_AGC_MIN_IDX},
	{154,	146,	PRV_AGC_MIN_IDX},
	{155,	147,	PRV_AGC_MIN_IDX},
	{156,	148,	PRV_AGC_MIN_IDX},
	{157,	149,	PRV_AGC_MIN_IDX},
	{158,	150,	PRV_AGC_MIN_IDX},
	{159,	151,	PRV_AGC_MIN_IDX},
	{160,	152,	PRV_AGC_MIN_IDX},
	{161,	153,	PRV_AGC_MIN_IDX},
	{162,	154,	PRV_AGC_MIN_IDX},
	{163,	155,	PRV_AGC_MIN_IDX},
	{164,	156,	PRV_AGC_MIN_IDX},
	{165,	157,	PRV_AGC_MIN_IDX},
	{166,	158,	PRV_AGC_MIN_IDX},
	{167,	159,	PRV_AGC_MIN_IDX},
	{168,	160,	PRV_AGC_MIN_IDX},
	{169,	161,	PRV_AGC_MIN_IDX},
	{170,	162,	PRV_AGC_MIN_IDX},
	{171,	163,	PRV_AGC_MIN_IDX},
	{172,	164,	PRV_AGC_MIN_IDX},
	{173,	165,	PRV_AGC_MIN_IDX},
	{174,	166,	PRV_AGC_MIN_IDX},
	{175,	167,	PRV_AGC_MIN_IDX},
	{176,	168,	PRV_AGC_MIN_IDX},
	{177,	169,	PRV_AGC_MIN_IDX},
	{178,	170,	PRV_AGC_MIN_IDX},
	{179,	171,	PRV_AGC_MIN_IDX},
	{180,	172,	PRV_AGC_MIN_IDX},
	{181,	173,	PRV_AGC_MIN_IDX},
	{182,	174,	PRV_AGC_MIN_IDX},
	{183,	175,	PRV_AGC_MIN_IDX},
	{184,	176,	PRV_AGC_MIN_IDX},
	{185,	177,	PRV_AGC_MIN_IDX},
	{186,	178,	PRV_AGC_MIN_IDX},
	{187,	179,	PRV_AGC_MIN_IDX},
	{188,	180,	PRV_AGC_MIN_IDX},
	{189,	181,	PRV_AGC_MIN_IDX},
	{190,	182,	PRV_AGC_MIN_IDX},
	{191,	183,	PRV_AGC_MIN_IDX},
	{192,	184,	PRV_AGC_MIN_IDX},
	{193,	185,	PRV_AGC_MIN_IDX},
	{194,	186,	PRV_AGC_MIN_IDX},
	{195,	187,	PRV_AGC_MIN_IDX},
	{196,	188,	PRV_AGC_MIN_IDX},
	{197,	189,	PRV_AGC_MIN_IDX},
	{198,	190,	PRV_AGC_MIN_IDX},
	{199,	191,	PRV_AGC_MIN_IDX},
	{200,	192,	PRV_AGC_MIN_IDX},
	{201,	193,	PRV_AGC_MIN_IDX},
	{202,	194,	PRV_AGC_MIN_IDX},
	{203,	195,	PRV_AGC_MIN_IDX},
	{204,	196,	PRV_AGC_MIN_IDX},
	{205,	197,	PRV_AGC_MIN_IDX},
	{206,	198,	PRV_AGC_MIN_IDX},
	{207,	199,	PRV_AGC_MIN_IDX},
	{208,	200,	PRV_AGC_MIN_IDX},
	{209,	201,	PRV_AGC_MIN_IDX},
	{210,	202,	PRV_AGC_MIN_IDX},
	{211,	203,	PRV_AGC_MIN_IDX},
	{212,	204,	PRV_AGC_MIN_IDX},
	{213,	205,	PRV_AGC_MIN_IDX},
	{214,	206,	PRV_AGC_MIN_IDX},
	{215,	207,	PRV_AGC_MIN_IDX},
	{216,	208,	PRV_AGC_MIN_IDX},
	{217,	209,	PRV_AGC_MIN_IDX},
	{218,	210,	PRV_AGC_MIN_IDX},
	{219,	211,	PRV_AGC_MIN_IDX},
	{220,	212,	PRV_AGC_MIN_IDX},
	{221,	213,	PRV_AGC_MIN_IDX},
	{222,	214,	PRV_AGC_MIN_IDX},
	{223,	215,	PRV_AGC_MIN_IDX},
	{224,	216,	PRV_AGC_MIN_IDX},
	{225,	217,	PRV_AGC_MIN_IDX},
	{226,	218,	PRV_AGC_MIN_IDX},
	{227,	219,	PRV_AGC_MIN_IDX},
	{228,	220,	PRV_AGC_MIN_IDX},
	{229,	221,	PRV_AGC_MIN_IDX},
	{230,	222,	PRV_AGC_MIN_IDX},
	{231,	223,	PRV_AGC_MIN_IDX},
	{232,	224,	PRV_AGC_MIN_IDX},
	{233,	225,	PRV_AGC_MIN_IDX},
	{234,	226,	PRV_AGC_MIN_IDX},
	{235,	227,	PRV_AGC_MIN_IDX},
	{236,	228,	PRV_AGC_MIN_IDX},
	{237,	229,	PRV_AGC_MIN_IDX},
	{238,	230,	PRV_AGC_MIN_IDX},
	{239,	231,	PRV_AGC_MIN_IDX},
	{240,	232,	PRV_AGC_MIN_IDX},
	{241,	233,	PRV_AGC_MIN_IDX},
	{242,	234,	PRV_AGC_MIN_IDX},
	{243,	235,	PRV_AGC_MIN_IDX},
	{244,	236,	PRV_AGC_MIN_IDX},
	{245,	237,	PRV_AGC_MIN_IDX},
	{246,	238,	PRV_AGC_MIN_IDX},
	{247,	239,	PRV_AGC_MIN_IDX},
	{248,	240,	PRV_AGC_MIN_IDX},
	{249,	241,	PRV_AGC_MIN_IDX},
	{250,	242,	PRV_AGC_MIN_IDX},
	{251,	243,	PRV_AGC_MIN_IDX},
	{252,	244,	PRV_AGC_MIN_IDX},	
};

static aeExpAgcIdx_t ae60Fps50HzExpAgcSet[253]=
{
	{0,		PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+116 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,152*/
	{1,		PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+115 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,151*/
	{2,		PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+114 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,150*/
	{3,		PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+113 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,149*/
	{4,		PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+112 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,156*/
	{5,		PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+111 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,155*/
	{6,		PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+110 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,154*/
	{7,		PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+109 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,153*/
	{8,		PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+108 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,152*/
	{9,		PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+107 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,151*/
	{10,		PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+106 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,150*/
	{11,		PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+105 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,149*/
	{12,		PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+104 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,148*/
	{13,		PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+103 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,147*/
	{14,		PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+102 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,146*/
	{15,		PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+101 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,145*/
	{16,		PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+100 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,144*/
	{17,		PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+99 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,143*/
	{18,		PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+98 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,142*/
	{19,		PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+97 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,141*/
	{20,		PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+96 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,140*/
	{21,		PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+95 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,156*/
	{22,		PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+94 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,155*/
	{23,		PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+93 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,154*/
	{24,		PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+92 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,153*/
	{25,		PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+91 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,152*/
	{26, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+90 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,151*/
	{27, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+89 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,150*/
	{28, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+88 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,149*/
	{29, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+87 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,148*/
	{30, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+86 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,147*/
	{31, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+85 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,146*/
	{32, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+84 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,145*/
	{33, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+83 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,144*/
	{34, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+82 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,143*/
	{35, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+81 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,142*/
	{36, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+80 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,141*/
	{37, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+79 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,140*/
	{38, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+78 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,139*/
	{39, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+77 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,138*/
	{40, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+76 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,137*/
	{41, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+75 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,136*/
	{42, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+74 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,135*/
	{43, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+73 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,134*/
	{44, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+72 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,133*/
	{45, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+71 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,132*/
	{46, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+70 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,131*/
	{47, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+69 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,130*/
	{48, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+68 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,129*/
	{49, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+67 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,128*/
	{50, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+66 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,127*/
	{51, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+65 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,126*/
	{52, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+64 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,125*/
	{53, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+63 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,124*/
	{54, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+62 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,123*/
	{55, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+61 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,122*/
	{56, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+60 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,121*/
	{57, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+59 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,120*/
	{58, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+58 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,119*/
	{59, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+57 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,118*/
	{60, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+56 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,117*/
	{61, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+55 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,116*/
	{62, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+54 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,115*/
	{63, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+53 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,114*/
	{64, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+52 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,113*/
	{65, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+51 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,112*/
	{66, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+50 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,111*/
	{67, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+49 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,110*/
	{68, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+48 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,109*/
	{69, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+47 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,108*/
	{70, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+46 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,107*/
	{71, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+45 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,106*/
	{72, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+44 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,105*/
	{73, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+43 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,104*/
	{74, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+42 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,103*/
	{75, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+41 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,102*/
	{76, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+40 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,101*/
	{77, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+39 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,100*/
	{78, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+38 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,99*/
	{79, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+37 - (109 - PRV_EXP_50HZ_1_100-1))},/*85,98*/
	{80, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+36 - (109 - PRV_EXP_50HZ_1_100-1))},/*96,108*/
	{81, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+35 - (109 - PRV_EXP_50HZ_1_100-1))},/*96,107*/
	{82, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+34 - (109 - PRV_EXP_50HZ_1_100-1))},/*96,106*/
	{83, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+33 - (109 - PRV_EXP_50HZ_1_100-1))},/*96,105*/
	{84, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+32 - (109 - PRV_EXP_50HZ_1_100-1))},/*96,104*/
	{85, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+31 - (109 - PRV_EXP_50HZ_1_100-1))},/*96,103*/
	{86, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+30 - (109 - PRV_EXP_50HZ_1_100-1))},/*96,102*/
	{87, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+29 - (109 - PRV_EXP_50HZ_1_100-1))},/*96,101*/
	{88, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+28 - (109 - PRV_EXP_50HZ_1_100-1))},/*96,100*/
	{89, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+27 - (109 - PRV_EXP_50HZ_1_100-1))},/*96,99*/
	{90, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+26 - (109 - PRV_EXP_50HZ_1_100-1))},/*96,98*/
	{91, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+25 - (109 - PRV_EXP_50HZ_1_100-1))},/*96,97*/
	{92, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+24 - (109 - PRV_EXP_50HZ_1_100-1))},/*96,96*/
	{93, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+23 - (109 - PRV_EXP_50HZ_1_100-1))},/*96,95*/
	{94, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+22 - (109 - PRV_EXP_50HZ_1_100-1))},/*96,94*/
	{95, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+21 - (109 - PRV_EXP_50HZ_1_100-1))},/*96,93*/
	{96, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+20 - (109 - PRV_EXP_50HZ_1_100-1))},/*96,92*/
	{97, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+19 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,106*/
	{98, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+18 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,105*/
	{99, 	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+17 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,104*/
	{100,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+16 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,103*/
	{101,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+15 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,102*/
	{102,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+14 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,101*/
	{103,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+13 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,100*/
	{104,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+12 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,99*/
	{105,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+11 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,98*/
	{106,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+10 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,97*/
	{107,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+9 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,96*/
	{108,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+8 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,95*/
	{109,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+7 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,94*/
	{110,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+6 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,93*/
	{111,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+5 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,92*/
	{112,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+4 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,91*/
	{113,	PRV_EXP_50HZ_1_100,	(PRV_AGC_MIN_IDX+3 - (109 - PRV_EXP_50HZ_1_100-1))},/*111,90*/
	{114, 	109, 				(PRV_AGC_MIN_IDX+3)},/*109,91*/
	{115, 	109, 				(PRV_AGC_MIN_IDX+2)},/*109,90*/
	{116, 	109, 				(PRV_AGC_MIN_IDX+1)},/*109,89*/
	{117, 	109, 				PRV_AGC_MIN_IDX},/*109,88*/
	{118, 	110,					PRV_AGC_MIN_IDX},/*110,88*/
	{119, 	111,					PRV_AGC_MIN_IDX},/*111,88*/
	{120, 	112,					PRV_AGC_MIN_IDX},/*112,88*/
	{121,	113,	PRV_AGC_MIN_IDX},/*113,88*/
	{122,	114,	PRV_AGC_MIN_IDX},
	{123,	115,	PRV_AGC_MIN_IDX},
	{124,	116,	PRV_AGC_MIN_IDX},
	{125,	117,	PRV_AGC_MIN_IDX},
	{126,	118,	PRV_AGC_MIN_IDX},
	{127,	119,	PRV_AGC_MIN_IDX},
	{128,	120,	PRV_AGC_MIN_IDX},
	{129,	121,	PRV_AGC_MIN_IDX},
	{130,	122,	PRV_AGC_MIN_IDX},
	{131,	123,	PRV_AGC_MIN_IDX},
	{132,	124,	PRV_AGC_MIN_IDX},
	{133,	125,	PRV_AGC_MIN_IDX},
	{134,	126,	PRV_AGC_MIN_IDX},
	{135,	127,	PRV_AGC_MIN_IDX},
	{136,	128,	PRV_AGC_MIN_IDX},
	{137,	129,	PRV_AGC_MIN_IDX},
	{138,	130,	PRV_AGC_MIN_IDX},
	{139,	131,	PRV_AGC_MIN_IDX},
	{140,	132,	PRV_AGC_MIN_IDX},
	{141,	133,	PRV_AGC_MIN_IDX},
	{142,	134,	PRV_AGC_MIN_IDX},
	{143,	135,	PRV_AGC_MIN_IDX},
	{144,	136,	PRV_AGC_MIN_IDX},
	{145,	137,	PRV_AGC_MIN_IDX},
	{146,	138,	PRV_AGC_MIN_IDX},
	{147,	139,	PRV_AGC_MIN_IDX},
	{148,	140,	PRV_AGC_MIN_IDX},
	{149,	141,	PRV_AGC_MIN_IDX},
	{150,	142,	PRV_AGC_MIN_IDX},
	{151,	143,	PRV_AGC_MIN_IDX},
	{152,	144,	PRV_AGC_MIN_IDX},
	{153,	145,	PRV_AGC_MIN_IDX},
	{154,	146,	PRV_AGC_MIN_IDX},
	{155,	147,	PRV_AGC_MIN_IDX},
	{156,	148,	PRV_AGC_MIN_IDX},
	{157,	149,	PRV_AGC_MIN_IDX},
	{158,	150,	PRV_AGC_MIN_IDX},
	{159,	151,	PRV_AGC_MIN_IDX},
	{160,	152,	PRV_AGC_MIN_IDX},
	{161,	153,	PRV_AGC_MIN_IDX},
	{162,	154,	PRV_AGC_MIN_IDX},
	{163,	155,	PRV_AGC_MIN_IDX},
	{164,	156,	PRV_AGC_MIN_IDX},
	{165,	157,	PRV_AGC_MIN_IDX},
	{166,	158,	PRV_AGC_MIN_IDX},
	{167,	159,	PRV_AGC_MIN_IDX},
	{168,	160,	PRV_AGC_MIN_IDX},
	{169,	161,	PRV_AGC_MIN_IDX},
	{170,	162,	PRV_AGC_MIN_IDX},
	{171,	163,	PRV_AGC_MIN_IDX},
	{172,	164,	PRV_AGC_MIN_IDX},
	{173,	165,	PRV_AGC_MIN_IDX},
	{174,	166,	PRV_AGC_MIN_IDX},
	{175,	167,	PRV_AGC_MIN_IDX},
	{176,	168,	PRV_AGC_MIN_IDX},
	{177,	169,	PRV_AGC_MIN_IDX},
	{178,	170,	PRV_AGC_MIN_IDX},
	{179,	171,	PRV_AGC_MIN_IDX},
	{180,	172,	PRV_AGC_MIN_IDX},
	{181,	173,	PRV_AGC_MIN_IDX},
	{182,	174,	PRV_AGC_MIN_IDX},
	{183,	175,	PRV_AGC_MIN_IDX},
	{184,	176,	PRV_AGC_MIN_IDX},
	{185,	177,	PRV_AGC_MIN_IDX},
	{186,	178,	PRV_AGC_MIN_IDX},
	{187,	179,	PRV_AGC_MIN_IDX},
	{188,	180,	PRV_AGC_MIN_IDX},
	{189,	181,	PRV_AGC_MIN_IDX},
	{190,	182,	PRV_AGC_MIN_IDX},
	{191,	183,	PRV_AGC_MIN_IDX},
	{192,	184,	PRV_AGC_MIN_IDX},
	{193,	185,	PRV_AGC_MIN_IDX},
	{194,	186,	PRV_AGC_MIN_IDX},
	{195,	187,	PRV_AGC_MIN_IDX},
	{196,	188,	PRV_AGC_MIN_IDX},
	{197,	189,	PRV_AGC_MIN_IDX},
	{198,	190,	PRV_AGC_MIN_IDX},
	{199,	191,	PRV_AGC_MIN_IDX},
	{200,	192,	PRV_AGC_MIN_IDX},
	{201,	193,	PRV_AGC_MIN_IDX},
	{202,	194,	PRV_AGC_MIN_IDX},
	{203,	195,	PRV_AGC_MIN_IDX},
	{204,	196,	PRV_AGC_MIN_IDX},
	{205,	197,	PRV_AGC_MIN_IDX},
	{206,	198,	PRV_AGC_MIN_IDX},
	{207,	199,	PRV_AGC_MIN_IDX},
	{208,	200,	PRV_AGC_MIN_IDX},
	{209,	201,	PRV_AGC_MIN_IDX},
	{210,	202,	PRV_AGC_MIN_IDX},
	{211,	203,	PRV_AGC_MIN_IDX},
	{212,	204,	PRV_AGC_MIN_IDX},
	{213,	205,	PRV_AGC_MIN_IDX},
	{214,	206,	PRV_AGC_MIN_IDX},
	{215,	207,	PRV_AGC_MIN_IDX},
	{216,	208,	PRV_AGC_MIN_IDX},
	{217,	209,	PRV_AGC_MIN_IDX},
	{218,	210,	PRV_AGC_MIN_IDX},
	{219,	211,	PRV_AGC_MIN_IDX},
	{220,	212,	PRV_AGC_MIN_IDX},
	{221,	213,	PRV_AGC_MIN_IDX},
	{222,	214,	PRV_AGC_MIN_IDX},
	{223,	215,	PRV_AGC_MIN_IDX},
	{224,	216,	PRV_AGC_MIN_IDX},
	{225,	217,	PRV_AGC_MIN_IDX},
	{226,	218,	PRV_AGC_MIN_IDX},
	{227,	219,	PRV_AGC_MIN_IDX},
	{228,	220,	PRV_AGC_MIN_IDX},
	{229,	221,	PRV_AGC_MIN_IDX},
	{230,	222,	PRV_AGC_MIN_IDX},
	{231,	223,	PRV_AGC_MIN_IDX},
	{232,	224,	PRV_AGC_MIN_IDX},
	{233,	225,	PRV_AGC_MIN_IDX},
	{234,	226,	PRV_AGC_MIN_IDX},
	{235,	227,	PRV_AGC_MIN_IDX},
	{236,	228,	PRV_AGC_MIN_IDX},
	{237,	229,	PRV_AGC_MIN_IDX},
	{238,	230,	PRV_AGC_MIN_IDX},
	{239,	231,	PRV_AGC_MIN_IDX},
	{240,	232,	PRV_AGC_MIN_IDX},
	{241,	233,	PRV_AGC_MIN_IDX},
	{242,	234,	PRV_AGC_MIN_IDX},
	{243,	235,	PRV_AGC_MIN_IDX},
	{244,	236,	PRV_AGC_MIN_IDX},
	{245,	237,	PRV_AGC_MIN_IDX},
	{246,	238,	PRV_AGC_MIN_IDX},
	{247,	239,	PRV_AGC_MIN_IDX},
	{248,	240,	PRV_AGC_MIN_IDX},
	{249,	241,	PRV_AGC_MIN_IDX},
	{250,	242,	PRV_AGC_MIN_IDX},
	{251,	243,	PRV_AGC_MIN_IDX},
	{252,	244,	PRV_AGC_MIN_IDX},	
};

static aeExpAgcIdx_t ae120Fps60HzExpAgcSet[253]=
{
	{0,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+120 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,156*/
	{1,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+119 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,155*/
	{2,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+118 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,154*/
	{3,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+117 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,153*/
	{4,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+116 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,152*/
	{5,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+115 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,151*/
	{6,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+114 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,150*/
	{7,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+113 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,149*/
	{8,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+112 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,156*/
	{9,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+111 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,155*/
	{10,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+110 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,154*/
	{11,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+109 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,153*/
	{12,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+108 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,152*/
	{13,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+107 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,151*/
	{14,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+106 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,150*/
	{15,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+105 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,149*/
	{16,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+104 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,148*/
	{17,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+103 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,147*/
	{18,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+102 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,146*/
	{19,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+101 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,145*/
	{20,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+100 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,144*/
	{21,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+99 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,143*/
	{22,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+98 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,142*/
	{23,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+97 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,141*/
	{24,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+96 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,140*/
	{25,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+95 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,156*/
	{26, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+94 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,155*/
	{27, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+93 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,154*/
	{28, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+92 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,153*/
	{29, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+91 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,152*/
	{30, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+90 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,151*/
	{31, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+89 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,150*/
	{32, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+88 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,149*/
	{33, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+87 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,148*/
	{34, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+86 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,147*/
	{35, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+85 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,146*/
	{36, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+84 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,145*/
	{37, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+83 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,144*/
	{38, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+82 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,143*/
	{39, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+81 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,142*/
	{40, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+80 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,141*/
	{41, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+79 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,140*/
	{42, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+78 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,139*/
	{43, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+77 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,138*/
	{44, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+76 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,137*/
	{45, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+75 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,136*/
	{46, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+74 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,135*/
	{47, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+73 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,134*/
	{48, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+72 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,133*/
	{49, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+71 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,132*/
	{50, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+70 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,131*/
	{51, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+69 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,130*/
	{52, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+68 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,129*/
	{53, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+67 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,128*/
	{54, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+66 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,127*/
	{55, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+65 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,126*/
	{56, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+64 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,125*/
	{57, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+63 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,124*/
	{58, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+62 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,123*/
	{59, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+61 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,122*/
	{60, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+60 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,121*/
	{61, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+59 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,120*/
	{62, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+58 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,119*/
	{63, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+57 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,118*/
	{64, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+56 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,117*/
	{65, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+55 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,116*/
	{66, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+54 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,115*/
	{67, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+53 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,114*/
	{68, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+52 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,113*/
	{69, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+51 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,112*/
	{70, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+50 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,111*/
	{71, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+49 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,110*/
	{72, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+48 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,109*/
	{73, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+47 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,108*/
	{74, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+46 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,107*/
	{75, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+45 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,106*/
	{76, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+44 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,105*/
	{77, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+43 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,104*/
	{78, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+42 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,103*/
	{79, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+41 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,102*/
	{80, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+40 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,101*/
	{81, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+39 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,100*/
	{82, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+38 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,99*/
	{83, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+37 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,98*/
	{84, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+36 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,108*/
	{85, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+35 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,107*/
	{86, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+34 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,106*/
	{87, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+33 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,105*/
	{88, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+32 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,104*/
	{89, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+31 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,103*/
	{90, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+30 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,102*/
	{91, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+29 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,101*/
	{92, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+28 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,100*/
	{93, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+27 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,99*/
	{94, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+26 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,98*/
	{95, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+25 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,97*/
	{96, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+24 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,96*/
	{97, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+23 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,95*/
	{98, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+22 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,94*/
	{99, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+21 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,93*/
	{100,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+20 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,92*/
	{101,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+19 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,106*/
	{102,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+18 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,105*/
	{103,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+17 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,104*/
	{104,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+16 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,103*/
	{105,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+15 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,102*/
	{106,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+14 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,101*/
	{107,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+13 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,100*/
	{108,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+12 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,99*/
	{109,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+11 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,98*/
	{110,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+10 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,97*/
	{111,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+9 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,96*/
	{112,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+8 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,95*/
	{113,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+7 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,94*/
	{114,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+6 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,93*/
	{115,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+5 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,92*/
	{116,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+4 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,91*/
	{117,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+3 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,90*/
	{118,	113,					(PRV_AGC_MIN_IDX+3)},/*113,91*/
	{119,	113,					(PRV_AGC_MIN_IDX+2)},/*113,90*/
	{120,	113,					(PRV_AGC_MIN_IDX+1)},/*113,89*/
	{121,	113,	PRV_AGC_MIN_IDX},/*113,88*/
	{122,	114,	PRV_AGC_MIN_IDX},
	{123,	115,	PRV_AGC_MIN_IDX},
	{124,	116,	PRV_AGC_MIN_IDX},
	{125,	117,	PRV_AGC_MIN_IDX},
	{126,	118,	PRV_AGC_MIN_IDX},
	{127,	119,	PRV_AGC_MIN_IDX},
	{128,	120,	PRV_AGC_MIN_IDX},
	{129,	121,	PRV_AGC_MIN_IDX},
	{130,	122,	PRV_AGC_MIN_IDX},
	{131,	123,	PRV_AGC_MIN_IDX},
	{132,	124,	PRV_AGC_MIN_IDX},
	{133,	125,	PRV_AGC_MIN_IDX},
	{134,	126,	PRV_AGC_MIN_IDX},
	{135,	127,	PRV_AGC_MIN_IDX},
	{136,	128,	PRV_AGC_MIN_IDX},
	{137,	129,	PRV_AGC_MIN_IDX},
	{138,	130,	PRV_AGC_MIN_IDX},
	{139,	131,	PRV_AGC_MIN_IDX},
	{140,	132,	PRV_AGC_MIN_IDX},
	{141,	133,	PRV_AGC_MIN_IDX},
	{142,	134,	PRV_AGC_MIN_IDX},
	{143,	135,	PRV_AGC_MIN_IDX},
	{144,	136,	PRV_AGC_MIN_IDX},
	{145,	137,	PRV_AGC_MIN_IDX},
	{146,	138,	PRV_AGC_MIN_IDX},
	{147,	139,	PRV_AGC_MIN_IDX},
	{148,	140,	PRV_AGC_MIN_IDX},
	{149,	141,	PRV_AGC_MIN_IDX},
	{150,	142,	PRV_AGC_MIN_IDX},
	{151,	143,	PRV_AGC_MIN_IDX},
	{152,	144,	PRV_AGC_MIN_IDX},
	{153,	145,	PRV_AGC_MIN_IDX},
	{154,	146,	PRV_AGC_MIN_IDX},
	{155,	147,	PRV_AGC_MIN_IDX},
	{156,	148,	PRV_AGC_MIN_IDX},
	{157,	149,	PRV_AGC_MIN_IDX},
	{158,	150,	PRV_AGC_MIN_IDX},
	{159,	151,	PRV_AGC_MIN_IDX},
	{160,	152,	PRV_AGC_MIN_IDX},
	{161,	153,	PRV_AGC_MIN_IDX},
	{162,	154,	PRV_AGC_MIN_IDX},
	{163,	155,	PRV_AGC_MIN_IDX},
	{164,	156,	PRV_AGC_MIN_IDX},
	{165,	157,	PRV_AGC_MIN_IDX},
	{166,	158,	PRV_AGC_MIN_IDX},
	{167,	159,	PRV_AGC_MIN_IDX},
	{168,	160,	PRV_AGC_MIN_IDX},
	{169,	161,	PRV_AGC_MIN_IDX},
	{170,	162,	PRV_AGC_MIN_IDX},
	{171,	163,	PRV_AGC_MIN_IDX},
	{172,	164,	PRV_AGC_MIN_IDX},
	{173,	165,	PRV_AGC_MIN_IDX},
	{174,	166,	PRV_AGC_MIN_IDX},
	{175,	167,	PRV_AGC_MIN_IDX},
	{176,	168,	PRV_AGC_MIN_IDX},
	{177,	169,	PRV_AGC_MIN_IDX},
	{178,	170,	PRV_AGC_MIN_IDX},
	{179,	171,	PRV_AGC_MIN_IDX},
	{180,	172,	PRV_AGC_MIN_IDX},
	{181,	173,	PRV_AGC_MIN_IDX},
	{182,	174,	PRV_AGC_MIN_IDX},
	{183,	175,	PRV_AGC_MIN_IDX},
	{184,	176,	PRV_AGC_MIN_IDX},
	{185,	177,	PRV_AGC_MIN_IDX},
	{186,	178,	PRV_AGC_MIN_IDX},
	{187,	179,	PRV_AGC_MIN_IDX},
	{188,	180,	PRV_AGC_MIN_IDX},
	{189,	181,	PRV_AGC_MIN_IDX},
	{190,	182,	PRV_AGC_MIN_IDX},
	{191,	183,	PRV_AGC_MIN_IDX},
	{192,	184,	PRV_AGC_MIN_IDX},
	{193,	185,	PRV_AGC_MIN_IDX},
	{194,	186,	PRV_AGC_MIN_IDX},
	{195,	187,	PRV_AGC_MIN_IDX},
	{196,	188,	PRV_AGC_MIN_IDX},
	{197,	189,	PRV_AGC_MIN_IDX},
	{198,	190,	PRV_AGC_MIN_IDX},
	{199,	191,	PRV_AGC_MIN_IDX},
	{200,	192,	PRV_AGC_MIN_IDX},
	{201,	193,	PRV_AGC_MIN_IDX},
	{202,	194,	PRV_AGC_MIN_IDX},
	{203,	195,	PRV_AGC_MIN_IDX},
	{204,	196,	PRV_AGC_MIN_IDX},
	{205,	197,	PRV_AGC_MIN_IDX},
	{206,	198,	PRV_AGC_MIN_IDX},
	{207,	199,	PRV_AGC_MIN_IDX},
	{208,	200,	PRV_AGC_MIN_IDX},
	{209,	201,	PRV_AGC_MIN_IDX},
	{210,	202,	PRV_AGC_MIN_IDX},
	{211,	203,	PRV_AGC_MIN_IDX},
	{212,	204,	PRV_AGC_MIN_IDX},
	{213,	205,	PRV_AGC_MIN_IDX},
	{214,	206,	PRV_AGC_MIN_IDX},
	{215,	207,	PRV_AGC_MIN_IDX},
	{216,	208,	PRV_AGC_MIN_IDX},
	{217,	209,	PRV_AGC_MIN_IDX},
	{218,	210,	PRV_AGC_MIN_IDX},
	{219,	211,	PRV_AGC_MIN_IDX},
	{220,	212,	PRV_AGC_MIN_IDX},
	{221,	213,	PRV_AGC_MIN_IDX},
	{222,	214,	PRV_AGC_MIN_IDX},
	{223,	215,	PRV_AGC_MIN_IDX},
	{224,	216,	PRV_AGC_MIN_IDX},
	{225,	217,	PRV_AGC_MIN_IDX},
	{226,	218,	PRV_AGC_MIN_IDX},
	{227,	219,	PRV_AGC_MIN_IDX},
	{228,	220,	PRV_AGC_MIN_IDX},
	{229,	221,	PRV_AGC_MIN_IDX},
	{230,	222,	PRV_AGC_MIN_IDX},
	{231,	223,	PRV_AGC_MIN_IDX},
	{232,	224,	PRV_AGC_MIN_IDX},
	{233,	225,	PRV_AGC_MIN_IDX},
	{234,	226,	PRV_AGC_MIN_IDX},
	{235,	227,	PRV_AGC_MIN_IDX},
	{236,	228,	PRV_AGC_MIN_IDX},
	{237,	229,	PRV_AGC_MIN_IDX},
	{238,	230,	PRV_AGC_MIN_IDX},
	{239,	231,	PRV_AGC_MIN_IDX},
	{240,	232,	PRV_AGC_MIN_IDX},
	{241,	233,	PRV_AGC_MIN_IDX},
	{242,	234,	PRV_AGC_MIN_IDX},
	{243,	235,	PRV_AGC_MIN_IDX},
	{244,	236,	PRV_AGC_MIN_IDX},
	{245,	237,	PRV_AGC_MIN_IDX},
	{246,	238,	PRV_AGC_MIN_IDX},
	{247,	239,	PRV_AGC_MIN_IDX},
	{248,	240,	PRV_AGC_MIN_IDX},
	{249,	241,	PRV_AGC_MIN_IDX},
	{250,	242,	PRV_AGC_MIN_IDX},
	{251,	243,	PRV_AGC_MIN_IDX},
	{252,	244,	PRV_AGC_MIN_IDX},	
};

static aeExpAgcIdx_t ae120Fps50HzExpAgcSet[253]=
{
	{0,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+120 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,156*/
	{1,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+119 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,155*/
	{2,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+118 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,154*/
	{3,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+117 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,153*/
	{4,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+116 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,152*/
	{5,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+115 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,151*/
	{6,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+114 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,150*/
	{7,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+113 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,149*/
	{8,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+112 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,156*/
	{9,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+111 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,155*/
	{10,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+110 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,154*/
	{11,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+109 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,153*/
	{12,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+108 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,152*/
	{13,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+107 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,151*/
	{14,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+106 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,150*/
	{15,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+105 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,149*/
	{16,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+104 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,148*/
	{17,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+103 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,147*/
	{18,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+102 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,146*/
	{19,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+101 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,145*/
	{20,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+100 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,144*/
	{21,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+99 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,143*/
	{22,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+98 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,142*/
	{23,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+97 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,141*/
	{24,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+96 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,140*/
	{25,		PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+95 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,156*/
	{26, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+94 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,155*/
	{27, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+93 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,154*/
	{28, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+92 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,153*/
	{29, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+91 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,152*/
	{30, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+90 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,151*/
	{31, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+89 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,150*/
	{32, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+88 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,149*/
	{33, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+87 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,148*/
	{34, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+86 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,147*/
	{35, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+85 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,146*/
	{36, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+84 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,145*/
	{37, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+83 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,144*/
	{38, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+82 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,143*/
	{39, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+81 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,142*/
	{40, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+80 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,141*/
	{41, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+79 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,140*/
	{42, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+78 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,139*/
	{43, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+77 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,138*/
	{44, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+76 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,137*/
	{45, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+75 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,136*/
	{46, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+74 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,135*/
	{47, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+73 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,134*/
	{48, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+72 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,133*/
	{49, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+71 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,132*/
	{50, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+70 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,131*/
	{51, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+69 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,130*/
	{52, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+68 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,129*/
	{53, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+67 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,128*/
	{54, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+66 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,127*/
	{55, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+65 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,126*/
	{56, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+64 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,125*/
	{57, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+63 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,124*/
	{58, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+62 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,123*/
	{59, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+61 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,122*/
	{60, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+60 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,121*/
	{61, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+59 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,120*/
	{62, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+58 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,119*/
	{63, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+57 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,118*/
	{64, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+56 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,117*/
	{65, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+55 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,116*/
	{66, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+54 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,115*/
	{67, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+53 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,114*/
	{68, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+52 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,113*/
	{69, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+51 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,112*/
	{70, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+50 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,111*/
	{71, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+49 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,110*/
	{72, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+48 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,109*/
	{73, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+47 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,108*/
	{74, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+46 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,107*/
	{75, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+45 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,106*/
	{76, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+44 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,105*/
	{77, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+43 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,104*/
	{78, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+42 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,103*/
	{79, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+41 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,102*/
	{80, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+40 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,101*/
	{81, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+39 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,100*/
	{82, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+38 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,99*/
	{83, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+37 - (113 - PRV_EXP_60HZ_1_120-1))},/*85,98*/
	{84, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+36 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,108*/
	{85, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+35 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,107*/
	{86, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+34 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,106*/
	{87, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+33 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,105*/
	{88, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+32 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,104*/
	{89, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+31 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,103*/
	{90, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+30 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,102*/
	{91, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+29 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,101*/
	{92, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+28 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,100*/
	{93, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+27 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,99*/
	{94, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+26 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,98*/
	{95, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+25 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,97*/
	{96, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+24 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,96*/
	{97, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+23 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,95*/
	{98, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+22 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,94*/
	{99, 	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+21 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,93*/
	{100,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+20 - (113 - PRV_EXP_60HZ_1_120-1))},/*96,92*/
	{101,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+19 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,106*/
	{102,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+18 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,105*/
	{103,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+17 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,104*/
	{104,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+16 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,103*/
	{105,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+15 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,102*/
	{106,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+14 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,101*/
	{107,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+13 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,100*/
	{108,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+12 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,99*/
	{109,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+11 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,98*/
	{110,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+10 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,97*/
	{111,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+9 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,96*/
	{112,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+8 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,95*/
	{113,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+7 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,94*/
	{114,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+6 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,93*/
	{115,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+5 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,92*/
	{116,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+4 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,91*/
	{117,	PRV_EXP_60HZ_1_120,	(PRV_AGC_MIN_IDX+3 - (113 - PRV_EXP_60HZ_1_120-1))},/*111,90*/
	{118,	113,					(PRV_AGC_MIN_IDX+3)},/*113,91*/
	{119,	113,					(PRV_AGC_MIN_IDX+2)},/*113,90*/
	{120,	113,					(PRV_AGC_MIN_IDX+1)},/*113,89*/
	{121,	113,	PRV_AGC_MIN_IDX},/*113,88*/
	{122,	114,	PRV_AGC_MIN_IDX},
	{123,	115,	PRV_AGC_MIN_IDX},
	{124,	116,	PRV_AGC_MIN_IDX},
	{125,	117,	PRV_AGC_MIN_IDX},
	{126,	118,	PRV_AGC_MIN_IDX},
	{127,	119,	PRV_AGC_MIN_IDX},
	{128,	120,	PRV_AGC_MIN_IDX},
	{129,	121,	PRV_AGC_MIN_IDX},
	{130,	122,	PRV_AGC_MIN_IDX},
	{131,	123,	PRV_AGC_MIN_IDX},
	{132,	124,	PRV_AGC_MIN_IDX},
	{133,	125,	PRV_AGC_MIN_IDX},
	{134,	126,	PRV_AGC_MIN_IDX},
	{135,	127,	PRV_AGC_MIN_IDX},
	{136,	128,	PRV_AGC_MIN_IDX},
	{137,	129,	PRV_AGC_MIN_IDX},
	{138,	130,	PRV_AGC_MIN_IDX},
	{139,	131,	PRV_AGC_MIN_IDX},
	{140,	132,	PRV_AGC_MIN_IDX},
	{141,	133,	PRV_AGC_MIN_IDX},
	{142,	134,	PRV_AGC_MIN_IDX},
	{143,	135,	PRV_AGC_MIN_IDX},
	{144,	136,	PRV_AGC_MIN_IDX},
	{145,	137,	PRV_AGC_MIN_IDX},
	{146,	138,	PRV_AGC_MIN_IDX},
	{147,	139,	PRV_AGC_MIN_IDX},
	{148,	140,	PRV_AGC_MIN_IDX},
	{149,	141,	PRV_AGC_MIN_IDX},
	{150,	142,	PRV_AGC_MIN_IDX},
	{151,	143,	PRV_AGC_MIN_IDX},
	{152,	144,	PRV_AGC_MIN_IDX},
	{153,	145,	PRV_AGC_MIN_IDX},
	{154,	146,	PRV_AGC_MIN_IDX},
	{155,	147,	PRV_AGC_MIN_IDX},
	{156,	148,	PRV_AGC_MIN_IDX},
	{157,	149,	PRV_AGC_MIN_IDX},
	{158,	150,	PRV_AGC_MIN_IDX},
	{159,	151,	PRV_AGC_MIN_IDX},
	{160,	152,	PRV_AGC_MIN_IDX},
	{161,	153,	PRV_AGC_MIN_IDX},
	{162,	154,	PRV_AGC_MIN_IDX},
	{163,	155,	PRV_AGC_MIN_IDX},
	{164,	156,	PRV_AGC_MIN_IDX},
	{165,	157,	PRV_AGC_MIN_IDX},
	{166,	158,	PRV_AGC_MIN_IDX},
	{167,	159,	PRV_AGC_MIN_IDX},
	{168,	160,	PRV_AGC_MIN_IDX},
	{169,	161,	PRV_AGC_MIN_IDX},
	{170,	162,	PRV_AGC_MIN_IDX},
	{171,	163,	PRV_AGC_MIN_IDX},
	{172,	164,	PRV_AGC_MIN_IDX},
	{173,	165,	PRV_AGC_MIN_IDX},
	{174,	166,	PRV_AGC_MIN_IDX},
	{175,	167,	PRV_AGC_MIN_IDX},
	{176,	168,	PRV_AGC_MIN_IDX},
	{177,	169,	PRV_AGC_MIN_IDX},
	{178,	170,	PRV_AGC_MIN_IDX},
	{179,	171,	PRV_AGC_MIN_IDX},
	{180,	172,	PRV_AGC_MIN_IDX},
	{181,	173,	PRV_AGC_MIN_IDX},
	{182,	174,	PRV_AGC_MIN_IDX},
	{183,	175,	PRV_AGC_MIN_IDX},
	{184,	176,	PRV_AGC_MIN_IDX},
	{185,	177,	PRV_AGC_MIN_IDX},
	{186,	178,	PRV_AGC_MIN_IDX},
	{187,	179,	PRV_AGC_MIN_IDX},
	{188,	180,	PRV_AGC_MIN_IDX},
	{189,	181,	PRV_AGC_MIN_IDX},
	{190,	182,	PRV_AGC_MIN_IDX},
	{191,	183,	PRV_AGC_MIN_IDX},
	{192,	184,	PRV_AGC_MIN_IDX},
	{193,	185,	PRV_AGC_MIN_IDX},
	{194,	186,	PRV_AGC_MIN_IDX},
	{195,	187,	PRV_AGC_MIN_IDX},
	{196,	188,	PRV_AGC_MIN_IDX},
	{197,	189,	PRV_AGC_MIN_IDX},
	{198,	190,	PRV_AGC_MIN_IDX},
	{199,	191,	PRV_AGC_MIN_IDX},
	{200,	192,	PRV_AGC_MIN_IDX},
	{201,	193,	PRV_AGC_MIN_IDX},
	{202,	194,	PRV_AGC_MIN_IDX},
	{203,	195,	PRV_AGC_MIN_IDX},
	{204,	196,	PRV_AGC_MIN_IDX},
	{205,	197,	PRV_AGC_MIN_IDX},
	{206,	198,	PRV_AGC_MIN_IDX},
	{207,	199,	PRV_AGC_MIN_IDX},
	{208,	200,	PRV_AGC_MIN_IDX},
	{209,	201,	PRV_AGC_MIN_IDX},
	{210,	202,	PRV_AGC_MIN_IDX},
	{211,	203,	PRV_AGC_MIN_IDX},
	{212,	204,	PRV_AGC_MIN_IDX},
	{213,	205,	PRV_AGC_MIN_IDX},
	{214,	206,	PRV_AGC_MIN_IDX},
	{215,	207,	PRV_AGC_MIN_IDX},
	{216,	208,	PRV_AGC_MIN_IDX},
	{217,	209,	PRV_AGC_MIN_IDX},
	{218,	210,	PRV_AGC_MIN_IDX},
	{219,	211,	PRV_AGC_MIN_IDX},
	{220,	212,	PRV_AGC_MIN_IDX},
	{221,	213,	PRV_AGC_MIN_IDX},
	{222,	214,	PRV_AGC_MIN_IDX},
	{223,	215,	PRV_AGC_MIN_IDX},
	{224,	216,	PRV_AGC_MIN_IDX},
	{225,	217,	PRV_AGC_MIN_IDX},
	{226,	218,	PRV_AGC_MIN_IDX},
	{227,	219,	PRV_AGC_MIN_IDX},
	{228,	220,	PRV_AGC_MIN_IDX},
	{229,	221,	PRV_AGC_MIN_IDX},
	{230,	222,	PRV_AGC_MIN_IDX},
	{231,	223,	PRV_AGC_MIN_IDX},
	{232,	224,	PRV_AGC_MIN_IDX},
	{233,	225,	PRV_AGC_MIN_IDX},
	{234,	226,	PRV_AGC_MIN_IDX},
	{235,	227,	PRV_AGC_MIN_IDX},
	{236,	228,	PRV_AGC_MIN_IDX},
	{237,	229,	PRV_AGC_MIN_IDX},
	{238,	230,	PRV_AGC_MIN_IDX},
	{239,	231,	PRV_AGC_MIN_IDX},
	{240,	232,	PRV_AGC_MIN_IDX},
	{241,	233,	PRV_AGC_MIN_IDX},
	{242,	234,	PRV_AGC_MIN_IDX},
	{243,	235,	PRV_AGC_MIN_IDX},
	{244,	236,	PRV_AGC_MIN_IDX},
	{245,	237,	PRV_AGC_MIN_IDX},
	{246,	238,	PRV_AGC_MIN_IDX},
	{247,	239,	PRV_AGC_MIN_IDX},
	{248,	240,	PRV_AGC_MIN_IDX},
	{249,	241,	PRV_AGC_MIN_IDX},
	{250,	242,	PRV_AGC_MIN_IDX},
	{251,	243,	PRV_AGC_MIN_IDX},
	{252,	244,	PRV_AGC_MIN_IDX},	
};

UINT16 aeExpAgcEntry;

aeExpAgcIdx_t *paeIdx;



appFdResult_t Aefd;
/**************************************************************************
 *                 E X T E R N A L    R E F E R E N C E S                 *
 **************************************************************************/
static void _aePASMSet(void);
static void _capturePASMSet(void);
void appExif_MN_BufClear(UINT8 bufID);
UINT32  appExif_MN_Printf(UINT8 bufID, const char *szFmt, ...);
void dbgOsd_Print(UINT32 row, const char *format, ...);
/*
extern void awbCurLvSet(UINT16 aelv);
extern void awbCurLumaSet(UINT16 aeluma);
extern void awbCurContrastSet(UINT16 aeContrast);
extern void awbCurAeInfoSet(	UINT16 aelv,	UINT16 luma,	UINT16 contrast);
*/
extern void awbCurAeInfoSet(UINT16* pInfo);
extern UINT16 aeCurContrastGet(	void);
extern UINT8 IsHDR,IsHDRNightScene;
extern void appAEALG_ParamSet(UINT32 selector,SINT32 value);
extern void appAeAlgFlickerModeSet(aeExpAgcIdx_t *paeIdx);
extern void appAeAlgPreviewReset(UINT8 sel, SINT32 expIdx, UINT32 agcIdx);
extern SINT32 appAEALGLib_ResultGet(UINT32 param, aeResult_t *presult);

/**************************************************************************
 *               F U N C T I O N    D E C L A R A T I O N S               *
 **************************************************************************/
#define _ae_dbg_null_func()		do {} while(0)
#ifdef AE_FREQ_DBG
static void _ae_freq_dbg_clock_tick(void)
{
	aeFreqDbgCnt = (aeFreqDbgCnt==AE_FREQ_DBG_FREQ-1) ? 0 : aeFreqDbgCnt+1;
	aeFreqDbgSlot = (0x01UL<<aeFreqDbgCnt);
}
#else
#define _ae_freq_dbg_clock_tick()	_ae_dbg_null_func()
#endif

#ifdef AE_FREQ_DBG
#define _ae_freq_dbg_lv_info_dump(isDump)	\
{ \
	if (isDump) { \
		printf("\n** AE: APEX LV calc **************************\n"); \
		printf_x("expidx(%d), agcidx(%d), apeidx(%d), aeStep(%d)-->>step(%d) \n", nextexp, nextagc, nextape, aeResult.aeStep, step); \
		printf_x("LVIDX = AVIDX + TVIDX - SVIDX + (5*16) + aeStep \n"); \
		printf("LVIDX(%d), AVIDX(%d), TVIDX(%d), SVIDX(%d), aeStep(%d) \n", \
				aeCb.lvidx, \
				apeidx, \
				pv_expidx_to_tvidx((SINT32)expidx), \
				pv_agcidx_to_svidx((SINT32)agcidx), \
				aeResult.aeStep); \
		printf("Result aeLuma=%d \n", aeCb.luma); \
		printf("\n"); \
	} \
}
#else
#define _ae_freq_dbg_lv_info_dump(a) _ae_dbg_null_func()
#endif

#ifdef AE_FREQ_DBG
#define _ae_freq_dbg_too_dark_alert(isDump) \
{ \
	if (isDump) { \
	printf("\nTOO DARK (0x%08x) !! LV(%d.%d), iris(%d), exp(%d), agc(%d), step(%d) ~~\n\n", \
			aeCb.frameid, aeCb.lvidx/16, (aeCb.lvidx%16)*100/16, aeCb.iris_stop, \
			aeCb.expidx, aeCb.agcidx, aeCb.aeStep); \
	} \
}
#else
#define _ae_freq_dbg_too_dark_alert(a) _ae_dbg_null_func()
#endif

#ifdef AE_FREQ_DBG
#define _ae_freq_dbg_post_adj(isDump) \
{ \
	if (isDump) { \
		printf("POST ADJ (0x%08x): exp(%d), agc(%d), ape(%d), iris_stop(%d) \n", \
				aeCb.frameid, nextexp, nextagc, nextape, aeCb.iris_stop); \
	} \
}
#else
#define _ae_freq_dbg_post_adj(a) _ae_dbg_null_func()
#endif

#ifdef AE_FREQ_DBG
#define _ae_freq_dbg_too_bright_alert(isDump) \
{ \
	if (isDump) { \
	printf("\nTOO BRIGHT (0x%08x) !! LV(%d.%d), iris(%d), exp(%d), agc(%d), aeStep(%d) ~~\n\n", \
			aeCb.frameid, aeCb.lvidx/16, (aeCb.lvidx%16)*100/16, aeCb.iris_stop, \
			aeCb.expidx, aeCb.agcidx, aeCb.aeStep); \
	} \
}
#else
#define _ae_freq_dbg_too_bright_alert(a) _ae_dbg_null_func()
#endif

#ifdef AE_FREQ_DBG
#define _ae_freq_dbg_conv_alert(isDump) \
{ \
	if (isDump) { \
		printf("\n>>>> AE Conv (0x%08x) ~~~~ LV(%d.%d, %d), aeLuma(%d)\n",	\
				aeCb.frameid, aeCb.lvidx/16, (aeCb.lvidx%16)*100/16, aeCb.lvidx, aeCb.luma); \
		printf("expidx(%d), agcidx(%d), apeidx(%d), aeStep(%d)-->>step(%d) \n\n", nextexp, nextagc, nextape, aeResult.aeStep, step); \
	} \
}
#else
#define _ae_freq_dbg_conv_alert(a) _ae_dbg_null_func()
#endif

#ifdef AE_FREQ_DBG
#define _ae_freq_dbg_preview_ae_set(isDump) \
{ \
	if (isDump) { \
		printf("\nAE Set : lvidx(%d), exp(%d), agc(%d), ape(%d) \n", \
				aeCb.lvidx, nextexp, nextagc, nextape); \
		printf("\n\n"); \
	} \
}
#else
#define _ae_freq_dbg_preview_ae_set(a) _ae_dbg_null_func()
#endif

SINT32 pv_apeidx_to_avidx(SINT32 apeidx)
{
	return (SINT32)(apeidx);
}
UINT8 svidx_to_aeIso_tblidx(SINT32 svidx)
{
	SINT32 sv10;
	UINT8	idx;

	sv10 = (svidx*10)/evUnit.evUnit;

	idx = 0;
	if (sv10 <= 40) { /*-- iso-50 */ return idx; }
	idx++;
	if (sv10 <= 50) { /*-- iso-100 */ return idx; }
	idx++;
	if (sv10 <= 60) { /*-- iso-200 */ return idx; }
	idx++;
	if (sv10 <= 70) { /*-- iso-400 */ return idx; }
	idx++;
	if (sv10 <= 80) { /*-- iso-800 */ return idx; }
	idx++;
	if (sv10 <= 90) { /*-- iso-1600 */ return idx; }
	idx++;
	if (sv10 <= 1000) { /*-- iso-1600 */ return idx; }

	/*-- out of aeIso[] */
	DBG_PRINT("!!! Out of scope of aeIso[] !! \n");
	idx = 0;
	return idx;
}
SINT32 pv_agcidx_to_svidx(SINT32 agcidx)
{
#ifdef DO_ISO_XSHIFT
	agcidx -= PvIsoShift;
#endif
	/*-- aeViewIsoOffSet = apex_iso_100-calib_iso_100 */
	return (SINT32)(agcidx+aeViewIsoOfs+evUnit.agcIdx0Unit);
}
SINT32 pv_svidx_to_agcidx(SINT32 svidx)
{
#ifdef DO_ISO_XSHIFT
	/*-- aeViewIsoOffSet = apex_iso_100-calib_iso_100 */
	SINT32 agcidx;
	agcidx = (svidx-aeViewIsoOfs-evUnit.agcIdx0Unit);
	agcidx += PvIsoShift;
	if (agcidx < agcLimitPv.agcIdxMin) 
	{
		agcidx = agcLimitPv.agcIdxMin;
	}
#else
	/*-- aeViewIsoOffSet = apex_iso_100-calib_iso_100 */
	SINT32 agcidx;
	agcidx = (svidx-aeViewIsoOfs-evUnit.agcIdx0Unit);
	if (agcidx < agcLimitPv.agcIdxMin) 
	{
		agcidx = agcLimitPv.agcIdxMin;
	}

	/*printf("pv_svidx_to_agcidx:%d,%d,%d,%d\n",agcidx,svidx,aeViewIsoOfs,evUnit.agcIdx0Unit);*/

#endif
	return agcidx;
}
SINT32 cap_agcidx_to_svidx(SINT32 agcidx)
{
#ifdef DO_ISO_XSHIFT
	agcidx -= capIsoShift;
#endif

	/*printf("cap_agcidx_to_svidx:%d,%d,%d,%d\n",agcidx,aeCapIsoOfs,evUnit.agcIdx0Unit);*/

	return (SINT32)(agcidx+aeCapIsoOfs+evUnit.agcIdx0Unit);
}
SINT32 cap_svidx_to_agcidx(SINT32 svidx)
{
#ifdef DO_CAP_SAT_GAIN_COMPENSATION
	/*--- captureminimum saturation gainA
	 * nCminimum sat. gainISOAHYun
	 * HvgainC
	 */
	svidx = (svidx < capSatGainSVIDX) ? capSatGainSVIDX : svidx;

#endif

#ifdef DO_ISO_XSHIFT
	svidx += capIsoShift;
#endif

	/*printf("cap_svidx_to_agcidx:%d,%d,%d,%d\n",svidx,aeCapIsoOfs,evUnit.agcIdx0Unit);*/

	return (SINT32)(svidx-aeCapIsoOfs-evUnit.agcIdx0Unit);
}
SINT32 cap_svidx_to_expidx_offset(SINT32 svidx)
{
	SINT32 offset=0;
#ifdef DO_CAP_SAT_GAIN_COMPENSATION
	/*--- captureminimum saturation gainA
	 * nCminimum sat. gainISOAHYun
	 * HvgainCTV += (this_offset)
	 */
	offset = (svidx < capSatGainSVIDX) ? (capSatGainSVIDX-svidx) : 0;
	printf_x("capSatGainSVIDX = %d, returning offset = %d \n", capSatGainSVIDX, offset);
#endif
	return offset;
}
SINT32 pv_expidx_to_tvidx(SINT32 expidx)
{
#ifdef DO_ISO_XSHIFT
	expidx -= PvIsoShift;
#endif

		return (SINT32)(expidx+evUnit.expIdx0Unit);

}
SINT32 pv_tvidx_to_expidx(SINT32 tvidx)
{
	return (SINT32)(tvidx-evUnit.expIdx0Unit);
}
SINT32 cap_tvidx_to_expidx(SINT32 tvidx)
{
		return (SINT32)(tvidx-evUnit.expIdx0Unit);
}
SINT32 cap_expidx_to_tvidx(SINT32 expidx)
{
	return (SINT32)(expidx+evUnit.expIdx0Unit);	
}

SINT16 APEX_Calc(void)
{
    #ifdef DO_ISO_XSHIFT
        return (SINT16) (apeidx
        				+ pv_expidx_to_tvidx((SINT32)expidx)
		                - pv_agcidx_to_svidx((SINT32)agcidx)
		                + 5*evUnit.evUnit
        				+ PvIsoShift);
    #else
        return (SINT16) (apeidx
        				+ pv_expidx_to_tvidx((SINT32)expidx)
		                - pv_agcidx_to_svidx((SINT32)agcidx)
		                + 5*evUnit.evUnit
        				);
    #endif
}
static SINT16 cap_tvidx_to_ui_shutter_idx(SINT32 tvidx)
{
	return ((tvidx-evUnit.expIdx0Unit)/evUnit.evUnit)+(SHUTTER_1S-SHUTTER_AUTO);
}

#if !FREQUENCE_MODE
static BOOL ae_allow_to_small_iris(SINT32 iris_stop)
{
	//if (iris_stop<(IRIS_STEP-1) && aeCb.aeset.iris==AE_IRIS_AUTO && KIT_WITH_IRIS) {
	if (iris_stop<(IRIS_STEP-1) && KIT_WITH_IRIS) 
	{
		return TRUE;
	} 
	else 
	{
		return FALSE;
	}
}
static BOOL ae_allow_to_large_iris(SINT32 iris_stop)
{
	//if (iris_stop>0 && aeCb.aeset.iris==AE_IRIS_AUTO && KIT_WITH_IRIS) {
	if (iris_stop>0 && KIT_WITH_IRIS) 
	{
		return TRUE;
	} 
	else 
	{
		return FALSE;
	}
}
#endif
static __inline__ BOOL is_ae_exceed_longest_shutter(SINT32 expidx)
{
	return (expidx<aeLongestShutter);
}
static __inline__ BOOL is_ae_exceed_shortest_shutter(SINT32 expidx)
{
	return (expidx>aeShortestShutter);
}
static __inline__ BOOL is_ae_not_yet_longest_shutter(SINT32 expidx)
{
	return (expidx>aeLongestShutter);
}
static __inline__ BOOL is_ae_not_yet_shortest_shutter(SINT32 expidx)
{
	return (expidx<aeShortestShutter);
}
static __inline__ BOOL is_ae_exceed_max_gain(SINT32 agcidx)
{
	return (agcidx>aeMaxGain);
}
static __inline__ BOOL is_ae_exceed_min_gain(SINT32 agcidx)
{

	return (agcidx<aeMinGain);
}
static __inline__ BOOL is_ae_not_yet_max_gain(SINT32 agcidx)
{
	return (agcidx<aeMaxGain);
}
static __inline__ BOOL is_ae_not_yet_min_gain(SINT32 agcidx)
{
	return (agcidx>aeMinGain);
}
static __inline__ void ae_set_min_gain(SINT32 *agcidx)
{
	*agcidx = aeMinGain;
}
static __inline__ void ae_set_max_gain(SINT32 *agcidx)
{
	*agcidx = aeMaxGain;
}
static __inline__ void ae_set_shortest_shutter(SINT32 *expidx)
{
	*expidx = aeShortestShutter;
}
static __inline__ void ae_set_longest_shutter(SINT32 *expidx)
{
	*expidx = aeLongestShutter;
}

static __inline__ BOOL is_cap_exceed_longest_shutter(SINT32 expidx)
{
	return (expidx<capLongestShutter);
}
static __inline__ BOOL is_cap_exceed_shortest_shutter(SINT32 expidx)
{
	return (expidx>capShortestShutter);
}
static __inline__ BOOL is_cap_not_yet_longest_shutter(SINT32 expidx)
{
	return (expidx>capLongestShutter);
}
static __inline__ BOOL is_cap_not_yet_shortest_shutter(SINT32 expidx)
{
	return (expidx<capShortestShutter);
}
static __inline__ BOOL is_cap_exceed_max_gain(SINT32 agcidx)
{
	return (agcidx>capMaxGain);
}
static __inline__ BOOL is_cap_exceed_min_gain(SINT32 agcidx)
{
	return (agcidx<capMinGain);
}
static __inline__ BOOL is_cap_not_yet_max_gain(SINT32 agcidx)
{
	return (agcidx<capMaxGain);
}
static __inline__ BOOL is_cap_not_yet_min_gain(SINT32 agcidx)
{
	return (agcidx>capMinGain);
}
static __inline__ void cap_set_min_gain(SINT32 *agcidx)
{
	*agcidx = capMinGain;
}
static __inline__ void cap_set_max_gain(SINT32 *agcidx)
{
	*agcidx = capMaxGain;
}
static __inline__ void cap_set_shortest_shutter(SINT32 *expidx)
{

	*expidx = capShortestShutter;
}
static __inline__ void cap_set_longest_shutter(SINT32 *expidx)
{
	*expidx = capLongestShutter;
}


static __inline__ BOOL is_ae_not_yet_longest_Entry(SINT32 idxEntry)
{
	return (idxEntry>paeIdx[((aeFrameRateSel == 30)?AE_PV_30Fps_MIN_EXPAGC_ENTRY:((aeFrameRateSel == 60)?AE_PV_60Fps_MIN_EXPAGC_ENTRY:AE_PV_120Fps_MIN_EXPAGC_ENTRY))].idx); 
}

static __inline__ BOOL is_ae_exceed_longest_Entry(SINT32 idxEntry)
{
	return (idxEntry<paeIdx[((aeFrameRateSel == 30)?AE_PV_30Fps_MIN_EXPAGC_ENTRY:((aeFrameRateSel == 60)?AE_PV_60Fps_MIN_EXPAGC_ENTRY:AE_PV_120Fps_MIN_EXPAGC_ENTRY))].idx);
}

static __inline__ void ae_set_longest_Entry(SINT32 *idxEntry)
{
	*idxEntry = paeIdx[((aeFrameRateSel == 30)?AE_PV_30Fps_MIN_EXPAGC_ENTRY:((aeFrameRateSel == 60)?AE_PV_60Fps_MIN_EXPAGC_ENTRY:AE_PV_120Fps_MIN_EXPAGC_ENTRY))].idx;
}

/*s Modify by Aries 10/03/12*/
static __inline__ BOOL is_ae_not_yet_shortest_Entry(SINT32 idxEntry)
{

	if (pViewParam->pvflickermode==1)
	{
		return (idxEntry<paeIdx[AE_PV_MAX_EXPAGC_ENTRY].idx);
	}
	else
	{
		return (idxEntry<paeIdx[AE_PV_MAX_EXPAGC_ENTRY].idx);
	}
}

static __inline__ BOOL is_ae_exceed_shortest_Entry(SINT32 idxEntry)
{
	if (pViewParam->pvflickermode==1)
	{
		return (idxEntry>paeIdx[AE_PV_MAX_EXPAGC_ENTRY].idx);
	}
	else
	{
		return (idxEntry>paeIdx[AE_PV_MAX_EXPAGC_ENTRY].idx);
	}
}

static __inline__ void ae_set_shortest_Entry(SINT32 *idxEntry)
{
	if (pViewParam->pvflickermode==1)
	{
		*idxEntry = paeIdx[AE_PV_MAX_EXPAGC_ENTRY].idx;
	}
	else
	{
		*idxEntry = paeIdx[AE_PV_MAX_EXPAGC_ENTRY].idx;
	}
}
#if SP5K_SENSOR_OV8810
UINT16 appAeGetPvTblEntry(void)
{
	printf("!!!ae Entry %d \n", aeExpAgcEntry);
	return aeExpAgcEntry;
}
#endif

/**************************************************************************
 *               F U N C T I O N    D E C L A R A T I O N S               *
 **************************************************************************/
SINT32 appPreviewAeBvIdxGet(void)
{
	SINT32 retBV;

	/*-- BV = LV -5 (APEX) */
	lester_step = aeCb.aeStep;
	printf("\033[32mcapset : step = %d \033[0m\n",aeCb.aeStep);

    #ifdef DO_ISO_XSHIFT
	retBV = ((SINT16)APEX_Calc() + aeCb.aeStep - 5*evUnit.evUnit - PvIsoShift);
    #else
    retBV = ((SINT16)APEX_Calc() + aeCb.aeStep - 5*evUnit.evUnit);
    #endif

	return retBV;
}

appAeCb_t *appAeCbGet(void)
{    
    //sel only for dual sensor
	return &aeCb;
}

appAePara_t *appAeParaGet(void)
{
	return &aePara;
}

SINT32 appPreviewAeAvIdxGet(void)
{
	return aeCb.avidx;
}

SINT32 appPreviewAeAgcIdxGet(void)
{
	return aeCb.agcidx;
}

UINT8 appAeStableGet(void)
{
	return aeCb.stable;
}

void appAeStableReset(void)
{
	aeCb.stable = FALSE;
}

UINT16 appAeLumaGet(void)
{
	return aeCb.luma;
}

void appAeStableSet(void)
{
	aeCb.stable = TRUE;
}


UINT16 appAeTargetGet(void)
{
	return (UINT16)aeCb.target;
}
void appAeTargetSet(UINT8 target)
{
	aeCb.target = target;
	sp5kAeParamSet(SP5K_AE_TARGET_LUMA, (UINT32)aeCb.target);
}
SINT32 appAeMinCapGainGet(void)
{
	return capSatAgc;
}

appAeSet_t *appAeSetGet(
	void
)
{
	return (appAeSet_t *)&aeCb.aeset;
}

#if 0
void appAeIrisGet(
	UINT32 *numerator, UINT32 *denominator
)
{
	*numerator = (aeCb.capav * 100) / evUnit.evUnit;
	*denominator = 100;
}
#endif

void
appAeCapParaGet(
	SINT16 *piris,
	SINT16 *pshutter,
	SINT16 *piso
)
{
	*piris = aePara.ui_iris+APERTURE_2_8;
	*pshutter = cap_tvidx_to_ui_shutter_idx(aePara.cap_tv);
#if _D3_TDCA_
    *piso = aePara.ui_iso;
#else
	*piso = aePara.ui_iso+UI_ISO_50;
#endif
	printf_t("@@@@@@@@@@@@@@\n");
	printf_t("appAeCapParaGet\n");
	printf_t("iris = %d shutter = %d iso = %d \n",*piris,*pshutter,*piso);
}

void
appAeAgcObSet(
	UINT32 agcidx
)
{
}

void
appAeZoomLevelSet(
	UINT32 zml
)
{
	if(zml < AE_ZOOM_LEVEL_MAX)
	{
		aeCb.zml = zml;

	}
}

void
appAeCapShutterSet(
	UINT8 shutidx
)
{
	if(shutidx < SHUTTER_MAX)
	{
		aeCb.aeset.shutter = shutidx;
	}
	_aePASMSet();
}
#if SP5K_SENSOR_OV8810
enum {
	aUI_ISO_AUTO = 0,
  	aUI_ISO_50   = 1,        
	aUI_ISO_100  = 2,
	aUI_ISO_200  = 3,
	aUI_ISO_400  = 4,
	aUI_ISO_800  = 5,
	aUI_ISO_MAX,
    };
#endif
void
appAeCapIsoSet(
	UINT8 isoidx
)
{
	printf("@@@@@@@@@@@@@@@@@@@@@\n");
	printf("aeCapIsoSet: %d \n", isoidx);


	if (isoidx >= UI_ISO_MAX) 
	{
		printf_t("... invalid ISO requested \n");
		return;
	}
#if SP5K_SENSOR_OV8810
    else
    {
        switch(isoidx)
        {
            case UI_ISO_AUTO:
                isoidx = aUI_ISO_AUTO;
            break;

            case UI_ISO_100:
                isoidx = aUI_ISO_100;
            break;

            case UI_ISO_200:
                isoidx = aUI_ISO_200;
            break;

            case UI_ISO_400:
                isoidx = aUI_ISO_400;
            break;

            case UI_ISO_800:
                isoidx = aUI_ISO_800;
            break;
        }
    }
#endif
	aeCb.aeset.iso = isoidx;

	if (isoidx==UI_ISO_AUTO) 
	{
		capMaxGain = cap_svidx_to_agcidx(AGC_CAP_BOUNDARY_H);
		aeCb.cap_max_isoidx = svidx_to_aeIso_tblidx(AGC_CAP_BOUNDARY_H); // the index to aeIso[] !!
		return;
	}

	/*-- The following implementation would depend upon PRJ preferrence !
	 */
	capMaxGain = cap_svidx_to_agcidx(aeIso[isoidx-1]);
	aeCb.cap_max_isoidx = isoidx-1; // the index to aeIso[] !!
}

UINT32 appAeIrisSet(	UINT8 irisStop)
{
#if KIT_WITH_IRIS
	UINT32 ret = SUCCESS, curStop;

	curStop = appLensQuery(LENS_QUERY_IRIS_SEG_POS);

	if (curStop != irisStop)
	{
		if(irisStop==0)
		{
			sp5kSensorVvalidWait();
			printf_t("\n*********%s: Large IRIS \n\n", __FUNCTION__);
			ret = appIrisLargeSet();
		}
		else if (irisStop==1) 
		{
			sp5kSensorVvalidWait();
			printf_t("\n*********%s: Small IRIS \n\n", __FUNCTION__);
		   	ret = appIrisSmallSet();
		}
		else
		{
			printf_t("\n*********%s: Illegal IRIS !! \n\n", __FUNCTION__);
			ret = FAIL;
		}
	}

	if (ret==SUCCESS) 
	{
		printf_t("\n*********%s: declare IRIS (%d) \n\n", __FUNCTION__, aeIris[irisStop]);
		sp5kAeApertureDeclare(aeIris[irisStop]);
		aeCb.iris_stop = irisStop;
	}

	return ret;
#else
	return SUCCESS;
#endif
}

void
appAeCapIrisSet(
	UINT8 irisidx
)
{
	if( irisidx < APERTURE_MAX)
	{
		aeCb.aeset.iris = irisidx;
		if(irisidx == APERTURE_AUTO)
		{
			appAeIrisSet(APERTURE_2_8-1);
		}
		else
		{
			appAeIrisSet(irisidx-1);
		}
	}
}

void
appAeMeterSet(
	UINT8 bMeter
)
{

	if(bMeter < UI_METER_MAX)
	{
		aeCb.aeset.meter = bMeter;

		#if SP5K_ALGORITHM_AE //lester 20120402
		appAEALG_ParamSet(AE_PARA_METERINGSET, bMeter);
		#else
		sp5kAeWeightResourceSet(bMeter);
#endif

	}

}

void
appAeEvBiasSet(
	UINT8 bEvBias
)
{
	if(bEvBias< AE_BIAS_MAX)
	{

		aeCb.aeset.evbias = bEvBias;

#if SP5K_ALGORITHM_AE //lester 20120402
	appAEALG_ParamSet(AE_PARA_EVSET, aebiascmp[bEvBias]);
#else
		sp5kAeParamSet(SP5K_AE_COMPENSATION,aebiascmp[bEvBias]);
#endif

	}

}

void
appAeAebSet(
	UINT8 aeb
)
{
	printf("\033[32mAEB(%d)\033[0m\n",aeb);
	if(aeb < UI_AEB_MAX)
	{
		aeCb.aeset.aeb = aeb;

	}

}

void
appAeStabilizerSet(
	UINT8 stabilizer
)
{
	#ifdef HW_DIST
	if(stabilizer < UI_STABILIZER_MAX)
	{
		aeCb.aeset.dist = stabilizer;
	}
	#else
	if(stabilizer < UI_STABILIZER_MAX)
	{
		aeCb.aeset.stabilizer = stabilizer;
	}
	#endif
}

void
appAeDistStatusGet(
	UINT8 *dist
)
{
	#ifdef HW_DIST
	*dist=aeCb.aeset.dist;
	#else
	*dist=UI_STABILIZER_OFF;
	#endif

}

void
appAePreviewShutBoundarySet(
	UINT8 pasmv,UINT32 shH, UINT32 shL)
{
	printf("_AePvShBdSet: pasmv=%d, shH=%d, shL=%d\n", pasmv,shH,shL);

	// shH, shL: 0 is auto
	aeCb.aeset.pasm = pasmv;
	if(aeCb.aeset.pasm == VIDEO_MODE)
	{ //video  :  1/32 ~ 1/512
		aeShortestShutter = aeshut[shH-1];
		aeLongestShutter = aeshut[shL-1];
	}
	else
	{ //PASM   :  1/32 ~ 1/3000~
		aeShortestShutter = aeshut[shH-1];
		aeLongestShutter = aeshut[shL-1];
	}
}

void
appAePreviewIsoBoundarySet(
	UINT8 pasmv,UINT32 max, UINT32 min)
{
	// shH, shL: 0 is auto
	aeCb.aeset.pasm = pasmv;
	if(aeCb.aeset.pasm == VIDEO_MODE)
	{
		aeMinGain = pv_svidx_to_agcidx(min);
		aeMaxGain = pv_svidx_to_agcidx(max);
	}
	else
	{
		aeMinGain = pv_svidx_to_agcidx(min);
		aeMaxGain = pv_svidx_to_agcidx(max);
	}

}
void appAeFrameRateSet(UINT32 fps)
{
	UINT32 chgFrmRate;
	chgFrmRate = (aeFrameRateSel == fps)?0:1;
	
	if(fps == 60){
		aeFrameRateSel = 60;
		YPrintf("60FPS");
	}
	else if(fps == 30){
		aeFrameRateSel = 30;
		YPrintf("30FPS");
	}
	else if(fps == 90){
		aeFrameRateSel = 90;
		YPrintf("90FPS");
	}
	else{
		aeFrameRateSel = 120;
		YPrintf("120FPS");
	}
	if(chgFrmRate){
		appAeExpFlickerModeSet(aeFlickerSel);
		appAePvReset();
	}
}

void
appAeExpFlickerModeSet(
	UINT8 flickeridx
)
{
	aeFlickerSel = flickeridx;
	
	if(aeFrameRateSel == 60){
		if(flickeridx == 0){	/*50Hz*/
			paeIdx =  ae60Fps50HzExpAgcSet;
			printf("60FPS_50Hz\n");
		}
		else{	/*60Hz*/
			paeIdx =  ae60Fps60HzExpAgcSet;
			printf("60FPS_60Hz\n");
		}
	}
	else if(aeFrameRateSel == 30){
		if(flickeridx == 0){	/*50Hz*/
			paeIdx =  ae30Fps50HzExpAgcSet;
			printf("30FPS_50Hz\n");
		}
		else{	/*60Hz*/
			paeIdx =  ae30Fps60HzExpAgcSet;
			printf("30FPS_60Hz\n");
		}
	}
	else{
		if(flickeridx == 0){	/*50Hz*/
			paeIdx =  ae120Fps50HzExpAgcSet;
			printf("120FPS_50Hz\n");
		}
		else{	/*60Hz*/
			paeIdx =  ae120Fps60HzExpAgcSet;
			printf("120FPS_60Hz\n");
		}
	}

	if(flickeridx == 0){
		pAeCapFlikrShut = ae50HzCapFlickerShut;
	}
	else{
		pAeCapFlikrShut = ae60HzCapFlickerShut;
	}

	#if SP5K_ALGORITHM_AE //lester 20120402
	appAeAlgFlickerModeSet(paeIdx);
	#endif
}

void
appAePvReset(
	void
)
{

	nextEntry = aeExpAgcEntry;
	
	if(is_ae_exceed_longest_Entry(nextEntry)){
		ae_set_longest_Entry(&nextEntry);
	}
	
	nextexp = pv_tvidx_to_expidx(paeIdx[nextEntry].expidx);
	nextagc = pv_svidx_to_agcidx(paeIdx[nextEntry].agcidx);
	aeExpAgcEntry = nextEntry;
	sp5kPreviewExpAgcSet(nextexp, nextagc);

#if SP5K_ALGORITHM_AE //lester 20120402
	appAeAlgPreviewReset (1, nextexp, nextagc);
#endif
}

void
appAePvAutoExpTblSet(
	UINT8 idx_start, UINT8 step , UINT8 dir
)
{

	UINT16 i;	
	if (dir == 0)
	{
		for (i =idx_start; i<(idx_start+step); i++)
		{
			nextexp = pv_tvidx_to_expidx(paeIdx[i].expidx);
			nextagc = pv_svidx_to_agcidx(paeIdx[i].agcidx);
			sp5kPreviewExpAgcSet(nextexp, nextagc);
			appTimeDelayMs(100);
			printf(" index [%d], expidx[%d], AgcIdx[%d]\n", i, nextexp, nextagc);
		}
	}
	else
	{
		for (i =idx_start; i>(idx_start-step); i--)
		{
			nextexp = pv_tvidx_to_expidx(paeIdx[i].expidx);
			nextagc = pv_svidx_to_agcidx(paeIdx[i].agcidx);
			sp5kPreviewExpAgcSet(nextexp, nextagc);
			appTimeDelayMs(100);
			printf(" index [%d], expidx[%d], AgcIdx[%d]\n", i, nextexp, nextagc);
		}
	}	
}

void
appAePvAutoExpTblSingleSet(
	UINT8 idx
)
{
		aeExpAgcEntry = idx;
		nextexp = pv_tvidx_to_expidx(paeIdx[idx].expidx);
		nextagc = pv_svidx_to_agcidx(paeIdx[idx].agcidx);
		sp5kPreviewExpAgcSet(nextexp, nextagc);
		appTimeDelayMs(66);
		printf(" index [%d], expidx[%d], AgcIdx[%d]\n", idx, nextexp, nextagc);

}
void
appAePvAutoExpTblCurrIdxGet(
	void
)
{
	UINT32 flicker = 50;
	SINT32 expIdx,agcIdx;
	if(paeIdx == ae30Fps60HzExpAgcSet || paeIdx == ae60Fps60HzExpAgcSet)
	{
		flicker = 60;
	}
	sp5kPreviewExpAgcGet(&expIdx,&agcIdx);
	printf("%dHz, index [%d], expidx[%d], AgcIdx[%d]\n", flicker , aeExpAgcEntry, expIdx, agcIdx);
}

void
appAePvAutoExpTblSwapSet(
	UINT8 idx1, UINT8 idx2, UINT8 times
)
{

	UINT16 i=0;	
	while (i < times)
	{		
		nextexp = pv_tvidx_to_expidx(paeIdx[idx1].expidx);
		nextagc = pv_svidx_to_agcidx(paeIdx[idx1].agcidx);
		sp5kPreviewExpAgcSet(nextexp, nextagc);
		appTimeDelayMs(200);
		printf(" index [%d], expidx[%d], AgcIdx[%d]\n", idx1, nextexp, nextagc);
		nextexp = pv_tvidx_to_expidx(paeIdx[idx2].expidx);
		nextagc = pv_svidx_to_agcidx(paeIdx[idx2].agcidx);
		sp5kPreviewExpAgcSet(nextexp, nextagc);
		appTimeDelayMs(200);
		printf(" index [%d], expidx[%d], AgcIdx[%d]\n", idx2, nextexp, nextagc);
		i++;
	}
}



void appAePreviewShutBoundaryGet(
	UINT32 *pmax, UINT32 *pmin
)
{
	*pmax = aeShortestShutter;
	*pmin = aeLongestShutter;
}

void
appAeCapShutBoundarySet(
	UINT8 scene, UINT32 shH, UINT32 shL)
{
	printf("_AeCapShBdSet: scene=%d, shH=%d, shL=%d\n", scene,shH,shL);
	// shH, shL: 0 is auto
	if(aeCb.aeset.pasm==SCENE_MODE && scene<SCENE_MAX)
	{
		aeCb.aeset.scene = scene;
	}
	capShortestShutter = aeshut[shH-1];
	capLongestShutter = aeshut[shL-1];

}

void
appAeCapShutBoundaryGet(
	UINT32* shH, UINT32* shL)
{
	*shH = capShortestShutter;
	*shL = capLongestShutter;
}

void appAePreviewSet(void)
{
	SINT32 expidx;
	UINT32 agcidx;

	sp5kPreviewExpAgcGet(&expidx,& agcidx);
	sp5kPreviewExpAgcSet(expidx, agcidx);
}

void appAePreviewRestore(void)
{
   	fAeLock = 0; 
    
#if SP5K_ALGORITHM_AE
	//appAePreviewIdxRestore();	//lester 20120713
#else
	sp5kPreviewExpAgcSet(aeCb.expidx, aeCb.agcidx);
#endif   
}

void appAeViewIsoCalibSet(SINT16 iso100)
{
	if (iso100 < pvSatAgc) 
	{
		printf("\n\nWARNING : pvIso(%d) < pvSatAgc(%d) !!!!\n\n", iso100, pvSatAgc);
	}
	aeViewIsoOfs = STD_ISO_100-(iso100);
		// used to calculate APEX LV
}

void appAeCaptureIsoCalibSet(SINT16 iso100)
{
	/*-- Handling minimum saturation gain */
	if (iso100 < capSatAgc) 
	{
		printf("\n\nWARNING : capIso(%d) < MIN_CAP_GAIN(%d) !!!!\n\n", iso100, capSatAgc);
	}
	aeCapIsoOfs = STD_ISO_100 - iso100;

	capSatGainSVIDX = cap_agcidx_to_svidx(capSatAgc);
}

void
appAeInfo(
	void
)
{
	char buf[32];
	sprintf(buf,"L=%03d A=%02d T=%02d S=%02d B=%02d ",aeCb.lvidx, aeCb.avidx,aeCb.expidx,aeCb.agcidx,appPreviewAeBvIdxGet());
	appOsdLib_TextDraw(0,32,SP5K_GFX_ALIGN_TOP_LEFT,buf);
}

static void _aeInitReport(void)
{
	appCalibData_t *pCalib;

	pCalib = appCalibDataGet();

	printf("\n");
	printf("** aeInitReport ********************************************\n");
	printf(">>> OB : %d \n", aeCb.ob);
	printf(">>> TARGET_LUMA : %d \n", aeCb.target);

	printf(">>> PV ISO : pvIso=%d, aeViewIsoOfs=%d, pvSatAgc(%d) \n",
			aeCb.pviso, aeViewIsoOfs, pvSatAgc);
	printf(">>> CAP ISO : capIso=%d, aeCapIsoOfs=%d, capSatAgc(%d) \n",
			aeCb.capiso, aeCapIsoOfs, capSatAgc);
	printf("capSatGainSVIDX(%d) \n", capSatGainSVIDX);
	printf("irisDiff=%d, iris[1]=%d \n", pCalib->irisDiff, aeIris[1]);

	printf("\n>>> AE limit : \n");
	printf(" ae shutter [%d ~ %d] \n", aeShortestShutter, aeLongestShutter);
	printf(" ae gain [%d - %d] \n", aeMinGain, aeMaxGain);

	printf("\n>>> CAP limit : \n");
	printf(" cap shutter [%d ~ %d] \n", capShortestShutter, capLongestShutter);
	printf(" cap gain [%d - %d] \n", capMinGain, capMaxGain);

	#if 1
	printf("\n>>> ISO UI : \n");
	printf(" cap_max_isoidx(%d) \n", aeCb.cap_max_isoidx);
	printf("** End of aeInitReport ****************************************\n\n");
	#endif

	#if 0
	printf("\n>>> evUnit: %d \n", evUnit.evUnit);
	printf("expIdx0Unit: %d \n", evUnit.expIdx0Unit);
	printf("agcIdx0Unit: %d \n", evUnit.agcIdx0Unit);
	printf("aperIdx0Unit: %d \n", evUnit.aperIdx0Unit);
	printf("\n>>> Gain Limitation : \n");
	printf("View: min(%d), max(%d) \n", agcLimitPv.agcIdxMin, agcLimitPv.agcIdxMax);
	printf("Snap: min(%d), max(%d) \n", agcLimitCap.agcIdxMin, agcLimitCap.agcIdxMax);
	printf("\n>>> EXP Limitation Dump !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n");
	printf("View: min(%d), max(%d) \n", expLimitPv.expIdxTblMin, expLimitPv.expIdxMax);
	printf("Snap: min(%d), max(%d) \n", expLimitCap.expIdxTblMin, expLimitCap.expIdxMax);
	#endif

}

static appAeCBF_t pappAeCb;
/*-------------------------------------------------------------------------
 *  File Name : appAeConvergedCBRegister
 *------------------------------------------------------------------------*/
void appAeConvergedCBRegister(
	appAeCBF_t paeCBF
)
{
	pappAeCb=paeCBF;
}


/*-------------------------------------------------------------------------
 *  File Name : appAeConvergedCBSet
 *------------------------------------------------------------------------*/
void appAeConvergedCBSet(SINT32 expidx,SINT32 agcidx)
{

	appAeCBF_t paeCb = pappAeCb;
	if (paeCb!=NULL){
		(*paeCb)(expidx,agcidx); 
	}
}

/*-------------------------------------------------------------------------
 * Function : appAeInit
 *------------------------------------------------------------------------*/
void appAeInit(void)
{
	appCalibData_t *pCalib;
	memset(&aeCb, 0, sizeof(appAeCb_t));
	memset(&aePara, 0, sizeof(appAePara_t));
	sp5kAeModeSet(SP5K_AE_MODE_INFO_ONLY);
	sp5kAeEvUnitGet(&evUnit);

	/*-- Apply OB */
	pCalib = appCalibDataGet();
	appAeAgcObSet(DEFAULT_AGC);
	#if 0
	sp5kImgObModeCfgSet(SP5K_OB_MANUAL);
	aeCb.ob = (pCalib->ObSign && pCalib->Ob) ? pCalib->Ob : AE_DEFAULT_OB;
	sp5kImgObSet(aeCb.ob);
	#endif
	/*-- Apply ISO Calib result */
	capSatAgc = (pCalib->capSatGainSign) ? pCalib->capSatGain : DEFAULT_SAT_AGCIDX;
	aeCb.pviso = (SP5K_PVISO100>=0)?SP5K_PVISO100:((pCalib->IsoSign && pCalib->PvIso)? pCalib->PvIso : DEFAULT_VIEW_ISO100);
    PvIsoShift = (SP5K_PVISO100>=0)? 0 :(pCalib->IsoSign && pCalib->PvIso)? 0 : PV_ISO_XSHIFT;
  	appAeViewIsoCalibSet(aeCb.pviso);
    printf("<lester>aeCb.pviso = %d, %d, %d\n",aeCb.pviso, pCalib->IsoSign, pCalib->PvIso);

    aeCb.capiso = (SP5K_CAPISO100>=0)?SP5K_CAPISO100:((pCalib->IsoSign && pCalib->CapIso)? pCalib->CapIso : DEFAULT_CAP_ISO100);
    capIsoShift = (SP5K_CAPISO100>=0)? 0 :(pCalib->IsoSign && pCalib->CapIso)? 0 : CAP_ISO_XSHIFT;
	appAeCaptureIsoCalibSet(aeCb.capiso);
	printf("<lester>aeCb.capiso= %d, %d, %d\n",aeCb.capiso, pCalib->IsoSign, pCalib->CapIso);

	/*-- Revise IRIS apeidx */
    aeIris[0] = (SP5K_FNUMBER) ? SP5K_FNUMBER : IRIS_STEP_1;
	aeIris[1] = (pCalib->irisDiff) ? (aeIris[0]+pCalib->irisDiff) : aeIris[1];

	/*-- Re-calculate MIN/MAX gain according to calibration result */
	sp5kAeExpLimitGet(SP5K_SENSOR_MODE_PREVIEW, &expLimitPv);
	sp5kAeAgcLimitGet(SP5K_SENSOR_MODE_PREVIEW, &agcLimitPv);
	sp5kAeExpLimitGet(SP5K_SENSOR_MODE_SNAP, &expLimitCap);
	sp5kAeAgcLimitGet(SP5K_SENSOR_MODE_SNAP, &agcLimitCap);

	aeMinGain = pv_svidx_to_agcidx(AGC_BOUNDARY_L);
	aeMaxGain = pv_svidx_to_agcidx(AGC_BOUNDARY_H);

	capMinGain = cap_svidx_to_agcidx(AGC_CAP_BOUNDARY_L);
	capMaxGain = cap_svidx_to_agcidx(AGC_CAP_BOUNDARY_H);
	aeCb.cap_max_isoidx = svidx_to_aeIso_tblidx(AGC_CAP_BOUNDARY_H);

	/*printf("aeCb.cap_max_isoidx :%d\n",aeCb.cap_max_isoidx);*/

	if (aeMinGain<agcLimitPv.agcIdxMin || capMinGain<agcLimitCap.agcIdxMin)
	{
		/*-- IF YOU HAVE ENCOUNTERED THIS PROBLEM, CALL 911 :-)
		 * Just kidding, please review program.
		 * There must be something wrong !!
		 */
		printf("\n\n***************\n"
			   "MIN Gain idx error \n"
			   "***************\n\n");
		_aeInitReport();
		/*APP_SLEEP_MS(10*1000);*/
	}

	sp5kAeCfgSet(SP5K_AE_CONTINOUS_ENABLE,1); 
    sp5kAeCfgSet(SP5K_AE_ACCUM_PERIOD,1); 
    
	#if FREQUENCE_MODE
	aeCb.target = AE_TARGET;
	aeCb.zml = 0;
	aeCb.stable = FALSE;
	aeCb.mode = 1;
	aeCb.iris_stop = (appLensQuery(LENS_QUERY_IRIS_SEG_POS)==0) ? 0 : 1;
	aeCb.avidx = aeIris[aeCb.iris_stop];

      appAeExpFlickerModeSet(pUiSetting->lightFrequency);
	  
	aeCb.expidx =pv_tvidx_to_expidx(paeIdx[DEFAULT_EXPAGC_ENTRY].expidx);
	aeCb.agcidx =pv_svidx_to_agcidx(paeIdx[DEFAULT_EXPAGC_ENTRY].agcidx);
	aeExpAgcEntry =paeIdx[DEFAULT_EXPAGC_ENTRY].idx;
	nextEntry = aeExpAgcEntry;
	sp5kPreviewExpAgcSet((SINT32)aeCb.expidx, (UINT32)aeCb.agcidx);
	sp5kAeApertureDeclare(aeCb.avidx);
	sp5kAeParamSet(SP5K_AE_TARGET_LUMA, (UINT32)aeCb.target);
	#else
	aeCb.target = AE_TARGET;
	aeCb.expidx = DEFAULT_EXP;
	aeCb.agcidx = DEFAULT_AGC;
	aeCb.zml = 0;
	aeCb.stable = FALSE;
	aeCb.mode = 1;
	aeCb.iris_stop = (appLensQuery(LENS_QUERY_IRIS_SEG_POS)==0) ? 0 : 1;
	aeCb.avidx = aeIris[aeCb.iris_stop];
	sp5kPreviewExpAgcSet((SINT32)aeCb.expidx, (UINT32)aeCb.agcidx);
	sp5kAeApertureDeclare(aeCb.avidx);
	sp5kAeParamSet(SP5K_AE_TARGET_LUMA, (UINT32)aeCb.target);
	#endif
    
    appAEALG_AE_Install(appAeCbGet, appAePreviewAdjust, APEX_Calc);

    #ifdef ALGORITHM_G4_AWB
    appAWBALG_WBParamSet(AWB_PARA_FPTR_AEINFO,(UINT32)appAeCbGet);
    #endif
    app_DIQ_DynIso_Set();
	
	_aeInitReport();
}

#if SP5K_SENSOR_OV8810
void appAeLumaTargetChange(UINT16 target){

	#if SP5K_ALGORITHM_AE 


    #else
	aeCb.target = target;
	sp5kAeParamSet(SP5K_AE_TARGET_LUMA, (UINT32)aeCb.target);
	printf(" ae target change to %d \n", aeCb.target);
    #endif
	
}
#endif
    
/*-------------------------------------------------------------------------
 * Function : _aeTooDarkAdjust
 *------------------------------------------------------------------------*/
static void _aeTooDarkAdjust(void)
{
#if FREQUENCE_MODE
	aeCb.stable = FALSE;

	 if (is_ae_not_yet_longest_Entry(aeExpAgcEntry))
	 {
		nextEntry += step;
		if (is_ae_exceed_longest_Entry(nextEntry))
		{
			ae_set_longest_Entry(&nextEntry);
		}
		nextexp = pv_tvidx_to_expidx(paeIdx[nextEntry].expidx);
		nextagc = pv_svidx_to_agcidx(paeIdx[nextEntry].agcidx);
		aeExpAgcEntry = nextEntry;
		
		#if 0
		printf("\033[33mDark\033[0m\n");
		printf("aeExpAgcEntry:%d\n",aeExpAgcEntry);
		printf("nextEntry:%d\n",nextEntry);
		printf("nextexp:%d\n",nextexp);
		printf("nextagc :%d\n",nextagc);
		printf("nextexp A:%d\n",paeIdx[nextEntry].expidx);
		printf("nextagc  A:%d\n",paeIdx[nextEntry].agcidx);
		#endif

    	//aeConvErr = AE_CONVERGE_FINE;
    	_ae_freq_dbg_post_adj(IS_FREQ_DBG_4 && (dbgTooDarkCnt==0));
    
	 }
#else
	SINT32 tmp;

	aeCb.stable = FALSE;


	//if (aeCb.lvidx<=AE_LV10 && ae_allow_to_large_iris(aeCb.iris_stop))
	if (aeCb.expidx<=IRIS_S2L_SWITCH && ae_allow_to_large_iris(aeCb.iris_stop))
	{	/*-- change Large IRIS to compensate aeSteop.
		 */
		printf_t("Dark Case 1\n");
		if (IS_FREQ_DBG_4 && (dbgTooDarkCnt==0)) 
		{
			printf("DARK ((a)) \n");
		}
		aeCb.iris_stop--; /* enlarge IRIS */
		nextape = aeIris[aeCb.iris_stop];
		tmp = nextape - apeidx;  
		nextexp += (step - tmp);

		if (is_ae_exceed_shortest_shutter(nextexp))
		{	
			if (IS_FREQ_DBG_4 && (dbgTooDarkCnt==0)) {
				printf("DARK ((a-1)) \n");
			}
			nextagc -= (nextexp - aeShortestShutter);
			ae_set_shortest_shutter(&nextexp);

			if (is_ae_exceed_min_gain(nextagc))
			{	/*-- hit ae limitation, leave as it is */
				ae_set_min_gain(&nextagc);
			}
		}
		else if (is_ae_exceed_longest_shutter(nextexp))
		{	
			if (IS_FREQ_DBG_4 && (dbgTooDarkCnt==0)) 
			{
				printf("DARK ((a-2)) \n");
			}
			nextagc += (aeLongestShutter-nextexp);
			ae_set_longest_shutter(&nextexp);

			if (is_ae_exceed_max_gain(nextagc))
			{	/*-- has reached ae limitation, leave as it is */
				ae_set_max_gain(&nextagc);
			}
		}
	}
	else if (is_ae_not_yet_longest_shutter(expidx))
	{	/*-- shutteriHAAshutter
		 */
		printf_t("Dark Case 2\n");

		if (IS_FREQ_DBG_4 && (dbgTooDarkCnt==0)) 
		{
			printf("DARK ((b)) \n");
		}
		nextexp += step; /*-- dark case, step < 0 !! */
		if (is_ae_exceed_longest_shutter(nextexp))
		{	/*-- longest shutter, compensate Ae with gain
			 */
			nextagc += (aeLongestShutter-nextexp);
			ae_set_longest_shutter(&nextexp);

			if (is_ae_exceed_max_gain(nextagc))
			{	/*-- hit ae limitation, leave as it is */
				ae_set_max_gain(&nextagc);
			}
		}
	}
	else if (is_ae_not_yet_max_gain(agcidx))
	{	/*-- last trick, use gain to compensate AE
		 */
		printf_t("Dark Case 3\n");
		if (IS_FREQ_DBG_4 && (dbgTooDarkCnt==0)) 
		{
			printf("DARK ((c)) \n");
		}
		nextagc -= step; /*-- dark case, step < 0 !! */
		if (is_ae_exceed_max_gain(nextagc))
		{	/*-- hit ae limitation, leave as it is */
			ae_set_max_gain(&nextagc);
		}
	}
	else
	{
		printf_t("Dark Case 4\n");
		if (IS_FREQ_DBG_4 && (dbgTooDarkCnt==0)) 
		{
			printf("DARK ((XX)) \n");
		}
	}

	aeConvErr = AE_CONVERGE_FINE;

	_ae_freq_dbg_post_adj(IS_FREQ_DBG_4 && (dbgTooDarkCnt==0));
#endif
}

/*-------------------------------------------------------------------------
 * Function : _aeTooBrightAdjust
 *------------------------------------------------------------------------*/
static void _aeTooBrightAdjust(void)
{
#if FREQUENCE_MODE
	aeCb.stable = FALSE;

	 if (is_ae_not_yet_shortest_Entry(aeExpAgcEntry))
	 {
		nextEntry += step;
		if (is_ae_exceed_shortest_Entry(nextEntry))
		{
			ae_set_shortest_Entry(&nextEntry);
		}
		nextexp = pv_tvidx_to_expidx(paeIdx[nextEntry].expidx); ;
		nextagc = pv_svidx_to_agcidx(paeIdx[nextEntry].agcidx);
		aeExpAgcEntry = nextEntry;
        
		#if 0
		printf("\033[33mBright\033[0m\n");
		printf("aeExpAgcEntry:%d\n",aeExpAgcEntry);
		printf("nextEntry:%d\n",nextEntry);
		printf("nextexp:%d\n",nextexp);
		printf("nextagc :%d\n",nextagc);
		printf("nextexp A:%d\n",paeIdx[nextEntry].expidx);
		printf("nextagc  A:%d\n",paeIdx[nextEntry].agcidx);
		#endif

        //aeConvErr = AE_CONVERGE_FINE;
		_ae_freq_dbg_post_adj(IS_FREQ_DBG_4 &&(dbgTooBrightCnt==0));
	 }

#else
	SINT32 tmp;

	aeCb.stable = FALSE;

	if (aeCb.expidx>=IRIS_L2S_SWITCH && ae_allow_to_small_iris(aeCb.iris_stop))
	{	/*-- change to small IRIS to compensate AE.
		 */
		printf_t("Bright Case 1\n");
		if (IS_FREQ_DBG_4 &&(dbgTooBrightCnt==0)) 
		{
			printf("BRIGHT ((a)) \n");
		}
		aeCb.iris_stop++; /* shrink IRIS */
		nextape = aeIris[aeCb.iris_stop];
		tmp = nextape - apeidx; 
		nextexp += (step - tmp);
		if (is_ae_exceed_longest_shutter(nextexp))
		{	
			printf_t("Bright Case 2\n");
			if (IS_FREQ_DBG_4 &&(dbgTooBrightCnt==0)) 
			{
				printf("BRIGHT ((a-1)) \n");
			}
			nextagc += (aeLongestShutter-nextexp);
			ae_set_longest_shutter(&nextexp);

			if (is_ae_exceed_max_gain(nextagc))
			{	/*-- hit ae limitation, leave it as it is */
				ae_set_max_gain(&nextagc);
			}
		}
		else if (is_ae_exceed_shortest_shutter(nextexp))
		{	
		
			printf_t("Bright Case 3\n");
			if (IS_FREQ_DBG_4 &&(dbgTooBrightCnt==0)) 
			{
				printf("BRIGHT ((a-2)) \n");
			}
			nextagc -= (nextexp - aeShortestShutter);
			ae_set_shortest_shutter(&nextexp);

			if (is_ae_exceed_min_gain(nextagc))
			{	/*-- hit ae limitation, leave it as it is */
				ae_set_min_gain(&nextagc);
			}
		}
	}
	else if (is_ae_not_yet_min_gain(agcidx))
	{	/*-- GAiHAC gainAC gain
		 */
		printf_t("Bright Case 4\n");
		if (IS_FREQ_DBG_4 &&(dbgTooBrightCnt==0)) 
		{
			printf("BRIGHT ((b)) \n");
		}
		nextagc -= step; /* bright case: step > 0 */
		if (is_ae_exceed_min_gain(nextagc))
		{	/*-- exceeding min gain limitation,
			 * use shutter time to compensate.
			 */
			nextexp += (aeMinGain-nextagc); /* shorten shutter !!*/
			ae_set_min_gain(&nextagc);

			if (is_ae_exceed_shortest_shutter(nextexp))
			{	/*-- already hit ae limitation, leave as it is */
				ae_set_shortest_shutter(&nextexp);
			}
		}
	}
	else if (is_ae_not_yet_shortest_shutter(expidx))
	{	/*-- the last trick, to shorten the shutter
		 */
		printf_t("Bright Case 5\n");
		if (IS_FREQ_DBG_4 &&(dbgTooBrightCnt==0)) 
		{
			printf("BRIGHT ((c)) \n");
		}
		nextexp += step; /* bright case: step > 0 */
		if (is_ae_exceed_shortest_shutter(nextexp))
		{	/*-- hit ae limitation, leave as it is */
			ae_set_shortest_shutter(&nextexp);
		}
	}
	else
	{
		printf_t("Bright Case 6\n");
		if (IS_FREQ_DBG_4 &&(dbgTooBrightCnt==0))
		{
			printf("BRIGHT ((XX)) \n");
		}
	}

	aeConvErr = AE_CONVERGE_FINE;

	_ae_freq_dbg_post_adj(IS_FREQ_DBG_4 &&(dbgTooBrightCnt==0));
#endif
}

/*-------------------------------------------------------------------------
 * Function : appAeFlickAdjust
 *------------------------------------------------------------------------*/
#if AE_FLICK_EN
UINT32
appAeFlickAdjust(
	UINT32 param
)
{
    UINT16 max, min, max_cnt, min_cnt;
    max_cnt = MAX(dbgTooBrightCnt,dbgTooDarkCnt);
    min_cnt = MIN(dbgTooBrightCnt,dbgTooDarkCnt);    
    
    switch(param)
    {
        case (AE_TOO_BRIGHT|AE_FLICK_STEP0):
            max = MAX(ABS(step),ABS(rec_dstep));
            min = MIN(ABS(step),ABS(rec_dstep));
            
            if(dbgTooDarkCnt==0 && step!=rec_dstep) //record step
            {
                rec_dstep = step;
                dbgTooDarkCnt++;
                //printf("rec rec_dstep e %d %d\n",rec_dstep ,step);
            }
            else if((max-min)>AE_FLICK_STEP_RANGE)  //compare step:true->record step 
            {
                dbgTooDarkCnt = dbgTooBrightCnt =0;
                //printf("reset rec_dstep s %d %d \n ",max ,min);
            }
        break;

        case (AE_TOO_BRIGHT|AE_FLICK_STEP1):

            //printf("<lester>AE_TOO_BRIGHT BCnt= %d \n",dbgTooBrightCnt);
            //printf("<lester>AE_TOO_BRIGHT DCnt= %d \n",dbgTooDarkCnt);
            if(dbgTooDarkCnt>AE_FLICK_COUNT && dbgTooBrightCnt>AE_FLICK_COUNT)
            {
                //printf("b dont cagnge step=%d\n",step);
        		return SUCCESS;
            }
            else if(dbgTooDarkCnt>=1 && (max_cnt-min_cnt)==1)   //rec rec_dstep each other
                dbgTooDarkCnt++;
            else if(dbgTooDarkCnt>=2)
                dbgTooDarkCnt++;
            else
                dbgTooDarkCnt = dbgTooBrightCnt =0;
        break;

        case (AE_TOO_DARK|AE_FLICK_STEP0):

            max = MAX(ABS(step),ABS(rec_bstep));
            min = MIN(ABS(step),ABS(rec_bstep));

            if(dbgTooBrightCnt==0 && step!=rec_bstep)   //record step
            {
                 rec_bstep = step;
                 dbgTooBrightCnt++;
                 //printf("rec rec_bstep e %d %d\n",rec_bstep ,step);
            }
            else if((max-min)>AE_FLICK_STEP_RANGE) //compare step:true->record step 
            {                
                dbgTooBrightCnt = dbgTooDarkCnt = 0;          
                //printf("reset rec_bstep s %d %d\n",max ,min);
            }
        break;

        case (AE_TOO_DARK|AE_FLICK_STEP1):

            //printf("<lester>AE_TOO_DARK BCnt= %d \n",dbgTooBrightCnt);
            //printf("<lester>AE_TOO_DARK DCnt= %d \n",dbgTooDarkCnt);
            if(dbgTooDarkCnt>AE_FLICK_COUNT && dbgTooBrightCnt>AE_FLICK_COUNT)
            {
                //printf("d dont cagnge step=%d\n",step);
        		return SUCCESS;                
            }
            else if(dbgTooBrightCnt>=1 && (max_cnt-min_cnt)==1) //rec rec_dstep each other
                dbgTooBrightCnt++;
            else if(dbgTooBrightCnt>=2)
                dbgTooBrightCnt++;
            else
                dbgTooDarkCnt = dbgTooBrightCnt =0;
        break;
    }
    return FAIL;
}
#endif

#if AE_STEP_CURVE_EN
UINT32 appAeStepAdjust(UINT32 step)
{
	UINT32 S,C,E,T;
	float temp;
	S = C = E = T = 0;  //SPOINT

	if(step==0)
		return 1;
	else if(step>128)
		step = 128;

	C = CPOINT*step;
	E = EPOINT*step;
	temp  = (step/CURVE_RATION);

	T = (UINT32)(temp*128);
	UINT32 result = ((UINT32)((128-T)*T*C)<<1)+(T*T*E);

    //printf("step:%d C:%d E:%d T:%d temp:%f \n",step,C,E,T,temp);

	if(step==128)
		return ((UINT32)result>>21);
	else
		return ((UINT32)result>>21)+1;
}
#endif

/*-------------------------------------------------------------------------
 * Function : appAePreviewAdjust
 *------------------------------------------------------------------------*/
UINT32
appAePreviewAdjust(
	UINT32 param
)
{
	aeResult_t aeResult;

#if (SP5K_SENSOR_MI5100p || SP5K_SENSOR_MI5100)
    UINT32 mode;
    sp5kAeCustomSts_t senCb;
#endif

	SINT32 ret;
    static BOOL first_run=TRUE;
	static SINT32 lastExp=0xffffffff;
	static UINT32 lastAgc=0xffffffff;
	static SINT8 lastStep=0xff;
    /*s Add by Aries 09/07/27*/
	UINT16 awbAeInfo[10];
	UINT32 exp;
    UINT32 agc;
    UINT8 converge_state;

	_ae_freq_dbg_clock_tick();

	#if SP5K_ALGORITHM_AE //lester 20120402
        if(first_run)
        {
            first_run = FALSE;
            appAEALG_ParamSet(AE_PARA_ISOOFFSET, aeCb.pviso-PvIsoShift);
        }
		ret = appAEALGLib_ResultGet(param,&aeResult);
	#else
		ret = sp5kAePreviewResultGet(param,&aeResult);
	#endif

	if (ret != SUCCESS ||	!(aeResult.valid & AAA_INFO_RESULT_AE_VALID)) 
	{
		printf("ae result invalid(%d)\n",ret);
        //profLogPrintf(2, "frm:%d", param);
		return FAIL;
	}

	aeCb.frameid = param;
	aeCb.aeStep = step = (SINT32)aeResult.aeStep;	
    //profLogPrintf(2, "frm:%d, %d, %d, %d(%d)", param, aeResult.evInfo.expIdx, aeResult.evInfo.agcIdx, aeResult.evInfo.aperIdx, step);
    
	/*-- Retrieve aeResult parameters
	 */
	 /*Work around for don't why aeResult.evInfo.expIdx =1024?*/
	nextexp = expidx = (SINT32)aeResult.evInfo.expIdx;
	nextagc = agcidx = (SINT32)aeResult.evInfo.agcIdx;
	nextape = apeidx = (SINT32)aeResult.evInfo.aperIdx;
	aeCb.expidx = expidx;
	aeCb.agcidx = agcidx;
    
	/*-- LV measurement
	 * LV = BV + 5 = AV+TV-SV + 5 (APEX) + aeStep
	 */
	aeCb.lvidx = (SINT16)APEX_Calc() + aeResult.aeDevStep;


	lester_lv = aeCb.lvidx;
	aeCb.luma = aeResult.aeLuma;
    //printf("<lester>lv %d\n",lester_lv);
	//printf("lum=%d lv=%d iris=%d,exp=%d agc=%d step=%d(%d)\n",aeResult.aeLuma,aeCb.lvidx,apeidx,pv_expidx_to_tvidx((SINT32)expidx),pv_agcidx_to_svidx((SINT32)agcidx),aeResult.aeStep,step);
	if(aeCb.lvidx < 0) aeCb.lvidx = 0;

	#if ICAT_FCWS
	appForwardCollisionWarningDayNightExchange((UINT16)aeCb.lvidx);
	#endif

	/*s Modify by Aries 09/07/27*/
	awbAeInfo[0]=(UINT16)aeCb.lvidx;
	awbAeInfo[1]=(UINT16)aeCb.luma;
	awbAeInfo[2]=(UINT16)aeCurContrastGet();
	awbCurAeInfoSet(awbAeInfo);
    /*e Modify by Aries 09/07/27*/

	/*-- Ae debug session */
	if (fAeInfoEnable && (expidx!=lastExp || agcidx!=(SINT32)lastAgc || lastStep!=aeResult.aeStep||(SINT32)aeCb.avidx!=apeidx)) 
	{
		lastExp = expidx; lastAgc = agcidx; lastStep = aeResult.aeStep;
		printf("lum=%d lv=%d iris=%d,exp=%d agc=%d step=%d(%d)\n",aeResult.aeLuma,aeCb.lvidx,apeidx,expidx,agcidx,aeResult.aeStep,step);
	}

	#if 0
	unsigned char Luma[16];
	unsigned char lv[16];
	unsigned char exp[16];
	unsigned char agc[16];
	unsigned char resStep[16];
	unsigned char tep[16];

	appOsd_ColorDrawShapeColorSet(PAL_NOCOLOR, PAL_BLEND_100, PAL_NOCOLOR, PAL_BLEND_100);
	appOsdLib_OsdLayerShapeDraw(APP_OSD_SHAPE_RECT, 30, 60,200, 180, 0, 0);
	appOsd_ColorDrawTextColorSet(PAL_YELLOWGREEN, PAL_NOCOLOR, PAL_NOCOLOR, PAL_BLEND_100);

	memset(Luma, 0, 16);
	memset(lv, 0, 16);
	memset(exp, 0, 16);
	memset(agc, 0, 16);
	memset(resStep, 0, 16);
	memset(tep, 0, 16);

	appOsdLib_TextDraw(30,60,SP5K_GFX_ALIGN_TOP_LEFT,"Luma:");
	sprintf(Luma, "%d", aeCb.luma);
	appOsdLib_TextDraw(110,60,SP5K_GFX_ALIGN_TOP_LEFT,Luma);

	appOsdLib_TextDraw(30,90,SP5K_GFX_ALIGN_TOP_LEFT,"lv:");
	sprintf(lv, "%d", aeCb.lvidx);
	appOsdLib_TextDraw(110,90,SP5K_GFX_ALIGN_TOP_LEFT,lv);

	appOsdLib_TextDraw(30,120,SP5K_GFX_ALIGN_TOP_LEFT,"expidx:");
	sprintf(exp, "%d", expidx);
	appOsdLib_TextDraw(110,120,SP5K_GFX_ALIGN_TOP_LEFT,exp);

	appOsdLib_TextDraw(30,150,SP5K_GFX_ALIGN_TOP_LEFT,"agcidx:");
	sprintf(agc, "%d", agcidx);
	appOsdLib_TextDraw(110,150,SP5K_GFX_ALIGN_TOP_LEFT,agc);

	appOsdLib_TextDraw(30,180,SP5K_GFX_ALIGN_TOP_LEFT,"ResStep:");
	sprintf(resStep, "%d", aeCb.aeStep);
	appOsdLib_TextDraw(110,180,SP5K_GFX_ALIGN_TOP_LEFT,resStep);

	appOsdLib_TextDraw(30,210,SP5K_GFX_ALIGN_TOP_LEFT,"step:");
	sprintf(tep, "%d",step);
	appOsdLib_TextDraw(110,210,SP5K_GFX_ALIGN_TOP_LEFT,tep);

	/*printf("lum=%d lv=%d iris=%d,exp=%d agc=%d step=%d(%d)\n",aeResult.aeLuma,aeCb.lvidx,apeidx,expidx,agcidx,aeResult.aeStep,step);*/
	#endif

	if (fAeEnable==0 || fAeLock==1)
	{
		printf("AE Locked %d %d!!!\n",fAeEnable ,fAeLock);
		return SUCCESS;
	}

#if (SP5K_SENSOR_MI5100p || SP5K_SENSOR_MI5100) 
    //lester for sensor cb s   

    mode = appActiveStateGet();
    //printf("<lester> mode = %d \n",mode);
    if(IS_VIEW_GROUP(mode) || IS_VIDEO_GROUP(mode))
    {
        sp5kPreviewExpAgcGet(&exp,&agc); 
        senCb.agcIdx = agc;
        senCb.expIdx = exp;
        senCb.irise  = 48;
        
        switch(mode)
        {
            case APP_STATE_STILL_PREVIEW:
                mode = SP5K_MODE_STILL_PREVIEW;
                senCb.isovalue = _IqGetCurrISO(OPSTATE_PV);
            break;

            case APP_STATE_STILL_CAPTURE:
                mode = SP5K_MODE_STILL_SNAP;
                senCb.isovalue = _IqGetCurrISO(OPSTATE_SNAP);
            break;

            case APP_STATE_VIDEO_PREVIEW:
                mode = SP5K_MODE_VIDEO_PREVIEW;
                senCb.isovalue = _IqGetCurrISO(OPSTATE_PV);
            break;  

            case APP_STATE_VIDEO_REC:
                mode = SP5K_MODE_VIDEO_RECORD;
                senCb.isovalue = _IqGetCurrISO(OPSTATE_VIDEO);
            break;
        }

        senCb.lv     = aeCb.lvidx* 1000 /evUnit.evUnit;//aeCb.lvidx <=0  ? 0 : (aeCb.lvidx * 1000 /evUnit.evUnit);
        sp5kAeStsSet(mode ,senCb);

        #if 0
        printf("lv=%d %d, iris=%d,exp=%d agc=%d iso=%d\n",aeCb.lvidx, senCb.lv,senCb.irise,\
               senCb.expIdx, senCb.agcIdx, senCb.isovalue);
        #endif
    }
    //lester for sensor cb e
#endif

   // aeCb.aeStep = aeConvErr; //use aestep record conv range to aealg    

	/***************************************************
	 * TOO DARK Adjustment
	 ***************************************************/	 
	if (step < (0-aeConvErr))
	{
		//printf("--- DARK (%d)\n",step);
        converge_state = AE_TOO_BRIGHT;
        
		#if 0
		dbgTooBrightCnt=0; /* clear previous state */
		aeRunDump = TRUE;
		_ae_freq_dbg_too_dark_alert(IS_FREQ_DBG_4 && (dbgTooDarkCnt==0));
        #endif
        
#if AE_FLICK_EN 
        appAeFlickAdjust(AE_TOO_BRIGHT|AE_FLICK_STEP0);
#endif

#if AE_STEP_CURVE_EN
        step = -(appAeStepAdjust(ABS(step)));
#else
/*
        if((-step) > AE_CONVERGE_SPEED<<1){
			step = step/(AE_CONVERGE_SPEED>>1);
		}
		else
*/
		if((-step) > AE_CONVERGE_SPEED){
			step = step/AE_CONVERGE_SPEED;
		}
		else{
			step = -1;
		}
#endif
		_aeTooDarkAdjust();
       
        #if 0		
        dbgTooDarkCnt++;
		dbgTooDarkCnt = (dbgTooDarkCnt==15) ? 0: dbgTooDarkCnt;
        #endif
	}
	/***************************************************
	 * TOO BRIGHT Adjustment
	 ***************************************************/
	else if (step > aeConvErr)
	{
		//printf("--- BRIGHT (%d)\n",step);
        converge_state = AE_TOO_DARK;
        
		#if 0
		dbgTooDarkCnt=0;  /* clear previous state */
		aeRunDump = TRUE;
		_ae_freq_dbg_too_bright_alert(IS_FREQ_DBG_4 &&(dbgTooBrightCnt==0));
        #endif

#if AE_FLICK_EN 
        appAeFlickAdjust(AE_TOO_DARK|AE_FLICK_STEP0);
#endif

#if AE_STEP_CURVE_EN
        step = appAeStepAdjust(ABS(step));
#else
/*
        if(step > AE_CONVERGE_SPEED<<1){
			step = step/(AE_CONVERGE_SPEED>>1);
		}
		else
*/
        if(step > AE_CONVERGE_SPEED){
			step = step/AE_CONVERGE_SPEED;
		}
		else{
			step = 1;
		}
#endif
		_aeTooBrightAdjust();

        #if 0
        dbgTooBrightCnt++;
		dbgTooBrightCnt = (dbgTooBrightCnt==15) ? 0: dbgTooBrightCnt;
        #endif
	}
	/***************************************************
	 * Converged
	 ***************************************************/
	else
	{
        //printf("--- Converged (%d)\n",step);
        #if 0
		_ae_freq_dbg_conv_alert(IS_FREQ_DBG_4);
		dbgTooDarkCnt = dbgTooBrightCnt = 0;
		aeRunDump=FALSE;
        #endif
        
		aeCb.stable = TRUE;     
        
#if AE_FLICK_EN 
        Convcount++;
        //printf("<lester>Convcount %d %d %d \n",dbgTooDarkCnt,dbgTooBrightCnt,Convcount);
        if(Convcount == AE_FLICK_CONVERGE_COUNT)   
            Convcount = rec_dstep = rec_bstep = dbgTooBrightCnt = dbgTooDarkCnt= 0;                     
#endif

    	if (aeCb.aeset.pasm == VIDEO_MODE)
    		aeConvErr = AE_CONVERGE_COARSE_VIDEO;
    	else 
    		aeConvErr = AE_CONVERGE_COARSE_VIEW;
		
        app_DIQ_DynIso_Set();
		return SUCCESS;
	}
                      
	/*remain unchanged while next exptime & agcgain are the same as previous*/
	expidx = aeResult.evInfo.expIdx;
	agcidx = aeResult.evInfo.agcIdx;
        
	if (expidx == nextexp)
		nextexp = SP5K_AE_EXP_AGC_DONT_CHANGE;
	else
		aeCb.expidx = nextexp;        

	if (agcidx == nextagc) 
		nextagc = SP5K_AE_EXP_AGC_DONT_CHANGE;
	else 
		aeCb.agcidx = nextagc;

	if (fAeInfoEnable &&
		(nextexp!=SP5K_AE_EXP_AGC_DONT_CHANGE ||
		nextagc!=SP5K_AE_EXP_AGC_DONT_CHANGE))
	{
		printf("set exp,agc=");
		if (nextexp==SP5K_AE_EXP_AGC_DONT_CHANGE) printf("---,");
		else printf("%03d,", nextexp);
		if (nextagc==SP5K_AE_EXP_AGC_DONT_CHANGE) printf("---\n");
		else printf("%03d\n", nextagc);
	}

#if AE_FLICK_EN
    Convcount = 0;
    if(converge_state==AE_TOO_BRIGHT)
    {
        if(appAeFlickAdjust(AE_TOO_BRIGHT|AE_FLICK_STEP1)==SUCCESS)
        {
            if (aeCb.aeset.pasm == VIDEO_MODE)
    	    	aeConvErr = AE_CONVERGE_COARSE_VIDEO;
        	else 
        		aeConvErr = AE_CONVERGE_COARSE_VIEW;
            
            app_DIQ_DynIso_Set();
        	return SUCCESS;
        }
    }
    else if(converge_state==AE_TOO_DARK)
    {
        if(appAeFlickAdjust(AE_TOO_DARK|AE_FLICK_STEP1)==SUCCESS)
        {
            if (aeCb.aeset.pasm == VIDEO_MODE)
    	    	aeConvErr = AE_CONVERGE_COARSE_VIDEO;
        	else 
        		aeConvErr = AE_CONVERGE_COARSE_VIEW;
            
            app_DIQ_DynIso_Set();
        	return SUCCESS;
        }
    }
#endif 

    profLogPrintf(2, "<lester> exp:%d agc:%d", nextexp, nextagc);      
    //printf("<lester> exp:%d agc:%d", nextexp, nextagc);   
	sp5kPreviewExpAgcSet(nextexp, nextagc);
    app_DIQ_DynIso_Set();

	if(apeidx != nextape)
	{
		printf_t("\n*** IRIS change %d***\n\n",nextape);
		aeCb.avidx = nextape;
		appAeIrisSet(aeCb.iris_stop);
	}
    
	return SUCCESS;
}


/* ae with agc fixed */
UINT32
appAePreviewExpAdjust(
	UINT32 param,
	SINT32 *pstep
)
{
	UINT32 ret;
	aeResult_t aeResult;
	SINT32 expidx, step, nextexp;
	UINT32 agcidx, nextagc;

#if SP5K_ALGORITHM_AE //lester 20120402
	ret = appAEALGLib_ResultGet(param,&aeResult);
#else
	ret = sp5kAePreviewResultGet(param,&aeResult);
#endif

	if (ret != SUCCESS ||	!(aeResult.valid & AAA_INFO_RESULT_AE_VALID))
	{
		DBG_PRINT("ae result invalid \n");
		return FAIL;
	}

	step = aeResult.aeStep;
	if (step<=-3 || 3<step) step = step*2/3;
	expidx = aeResult.evInfo.expIdx;
	agcidx = aeResult.evInfo.agcIdx;
	aeCb.lvidx = expidx - (SINT32)agcidx /*+ aeResult.evInfo.aperIdx*/ + aeResult.aeStep;

	*pstep = aeResult.aeStep;
	if (fAeInfoEnable)
	{
		printf("expagc=%d,%d step=%d, lum=%d\n", expidx,agcidx, aeResult.aeStep, aeResult.aeLuma);
	}
	if (fAeEnable==0)
	{
		return SUCCESS;
	}
	if (step < -evUnit.evUnit/5) 
	{ /* too dark */
		nextexp = expidx + step;
		if (nextexp < expLimitPv.expIdxSysMin) 
		{
			nextexp = expLimitPv.expIdxSysMin;
		}
	}
	else if (step > evUnit.evUnit/5) 
	{ /* too bright */
		nextexp = expidx + step;
		if (nextexp > expLimitPv.expIdxMax) 
		{
			nextexp = expLimitPv.expIdxMax;
		}
	}
	else 
	{ /* stable */
		return SUCCESS;
	}
	nextagc = SP5K_AE_EXP_AGC_DONT_CHANGE;
	/*remain unchanged while next exptime & agcgain are the same as previous*/
	sp5kPreviewExpAgcGet(&expidx,&agcidx);
	/* EXP_EXP = nextexp; */
	if (expidx == nextexp)
	{
		nextexp = SP5K_AE_EXP_AGC_DONT_CHANGE;
	}
	if (fAeInfoEnable) 
	{
		printf("set exp/agc=%d,%d\n", nextexp, nextagc);
	}
	sp5kPreviewExpAgcSet(nextexp, nextagc);
	return SUCCESS;
}

void
appAeEnable(
	BOOL fEnable
)
{
	fAeEnable = fEnable;
}

void
appAeInfoEnable(
	BOOL fEnable
)
{
	fAeInfoEnable = fEnable;
}
#if 0
/*-------------------------------------------------------------------------
 *  Function Name : _ae_PAmode_APEX_calc
 *------------------------------------------------------------------------*/
static void _ae_PAmode_APEX_calc(
	UINT8 iris,UINT8 iso,
	SINT32 *pbv, SINT32 *psv, SINT32 *pav, SINT32 *ptv
)
{
	*pbv = appPreviewAeBvIdxGet();
	*pav = (SINT32)aeIris[iris];
	*psv = (SINT32)aeIso[iso];
	*ptv = *pbv + *psv - *pav;
}
/*-------------------------------------------------------------------------
 *  Function Name : _ae_para_set
 *------------------------------------------------------------------------*/
static void _ae_para_set (
	UINT8 iris, UINT8 iso, SINT32 sv, SINT32 av, SINT32 tv
)
{
	aePara.sv = sv;
	aePara.tv = tv;
	aePara.av = av;
	aePara.ui_iris = iris;
	aePara.ui_iso = iso;
	printf_t("iris=%d iso=%d\n", aePara.ui_iris, aePara.ui_iso);
	printf_t("tv = %d sv = %d av = %d >\n\n",aePara.tv,aePara.sv,aePara.av);
}
/*-------------------------------------------------------------------------
 *  Function Name : _aePAmodeIrisCalc
 *------------------------------------------------------------------------*/
static void _aePAmodeIrisCalc(UINT8 iris,UINT8 iso)
{
	SINT32 tv,bv,av,sv;

	printf_t("<A %d iris = %d iso = %d\n",aeCalcCnt,iris,iso);
	aeCalcCnt++;

	_ae_PAmode_APEX_calc(iris, iso, &bv, &sv, &av, &tv);
	printf_t("bv=%d av=%d sv=%d ssh=%d tv=%d >= I%d\n",bv,av,sv,aesafeshut[aeCb.zml],tv,IRIS_SWITCH);

	if (tv >= aesafeshut[aeCb.zml]&& tv >= IRIS_SWITCH && iris < IRIS_STEP-1) {
		iris ++;
		_aePAmodeIrisCalc(iris,iso);
	}else {
		_ae_para_set(iris, iso, sv, av, tv);
	}
}
/*-------------------------------------------------------------------------
 *  Function Name : _aePAmodeParaCalc
 *------------------------------------------------------------------------*/
static void _aePAmodeParaCalc(UINT8 iris,UINT8 iso)
{
	SINT32 tv,bv,av,sv;

	printf_t("<B %d iris = %d iso = %d *****\n",aeCalcCnt,iris,iso);
	aeCalcCnt++;

	_ae_PAmode_APEX_calc(iris, iso, &bv, &sv, &av, &tv);
	printf_t("bv=%d av=%d sv=%d ssh=%d tv=%d >= I%d\n",bv,av,sv,aesafeshut[aeCb.zml],tv,IRIS_SWITCH);

	if (tv >= aesafeshut[aeCb.zml] &&
		tv >= IRIS_SWITCH &&
		aeIso[iso] <= STD_ISO_50 &&
		iris < IRIS_STEP-1)
	{	/*-- change to small IRIS */
		iris ++;
		_aePAmodeParaCalc(iris,iso);
	}
	else if (tv < aesafeshut[aeCb.zml] &&
			iso < (aeCb.aeset.stabilizer ? (UI_ISO_MAX-2): aeCb.ae_max_isoidx))
	{
	 	iso ++;
	 	_aePAmodeParaCalc(iris,iso);
	}
	else
	{
		_ae_para_set(iris, iso, sv, av, tv);
	}
}
/*-------------------------------------------------------------------------
 *  Function Name : _aePAmodeIsoCalc
 *------------------------------------------------------------------------*/
static void _aePAmodeIsoCalc(UINT8 iris,UINT8 iso)
{
	SINT32 tv,bv,av,sv;

	printf_t("<C %d iris = %d iso = %d\n",aeCalcCnt,iris,iso);
	aeCalcCnt++;

	_ae_PAmode_APEX_calc(iris, iso, &bv, &sv, &av, &tv);
	printf_t("bv=%d av=%d sv=%d ssh=%d tv=%d >= I%d\n",bv,av,sv,aesafeshut[aeCb.zml],tv,IRIS_SWITCH);

	if (tv < aesafeshut[aeCb.zml] && iso < ISO_NUM-1) {
	 	iso ++;
	 	_aePAmodeIsoCalc(iris,iso);
	}else {
		_ae_para_set(iris, iso, sv, av, tv);
	}
}
/*-------------------------------------------------------------------------
 *  Function Name : _aeSmodeIrisCalc
 *------------------------------------------------------------------------*/
static void _aeSmodeIrisCalc(UINT8 iris,UINT8 iso,UINT8 shut)
{
	SINT32 tv,bv,av,sv, bv1;

	printf_t("<D %d iris = %d iso = %d\n",aeCalcCnt,iris,iso);
	aeCalcCnt++;

	bv = appPreviewAeBvIdxGet();
	av = (SINT32)aeIris[iris];
	sv = (SINT32)aeIso[iso];
	tv = (SINT32)aeshut[shut];
	bv1 = av + tv - sv;

	if (bv > bv1 && iris < IRIS_STEP-1) {
		iris ++;
		_aeSmodeIrisCalc(iris,iso,shut);
	}else {
		_ae_para_set(iris, iso, sv, av, tv);
	}
}
/*-------------------------------------------------------------------------
 *  Function Name : _aeMmodeIsoCalc
 *------------------------------------------------------------------------*/
static void _aeMmodeIsoCalc(UINT8 iris,UINT8 iso,UINT8 shut)
{
	SINT32 tv,bv,av,sv, bv1;

	printf_t("<E %d iris = %d iso = %d\n",aeCalcCnt,iris,iso);
	aeCalcCnt++;

	bv = appPreviewAeBvIdxGet();
	av = (SINT32)aeIris[iris];
	sv = (SINT32)aeIso[iso];
	tv = (SINT32)aeshut[shut];
	bv1 = av + tv - sv;
	printf_t("bv=%d bv1=%d av=%d tv=%d sv=%d\n", bv, bv1, av, tv, sv);

	if (bv < bv1 && iso < ISO_NUM-1) {
	 	iso ++;
	 	_aeMmodeIsoCalc(iris,iso,shut);
	}else {
		_ae_para_set(iris, iso, sv, av, tv);
	}
}
/*-------------------------------------------------------------------------
 *  Function Name : _aeSmodeParaCalc
 *------------------------------------------------------------------------*/
static void _aeSmodeParaCalc(UINT8 iris,UINT8 iso,UINT8 shut)
{
	SINT32 tv,bv,av,sv, bv1;

	printf_t("<F %d iris = %d iso = %d shut=%d\n",aeCalcCnt,iris,iso,shut);
	aeCalcCnt++;

	bv = appPreviewAeBvIdxGet();
	av = (SINT32)aeIris[iris];
	sv = (SINT32)aeIso[iso];
	tv = (SINT32)aeshut[shut];
	bv1 = av + tv - sv;
	printf_t("bv=%d bv1=%d av=%d tv=%d sv=%d\n", bv, bv1, av, tv, sv);

	if (bv > bv1 && iris < IRIS_STEP-1) {
		iris ++;
		_aeSmodeParaCalc(iris,iso,shut);
	}else if (bv < bv1 && iso < ISO_NUM-1){
	 	iso ++;
	 	_aeSmodeParaCalc(iris,iso,shut);
	}else {
		_ae_para_set(iris, iso, sv, av, tv);
	}
}
/*-------------------------------------------------------------------------
 *  Function Name : _aeParaCalc
 *------------------------------------------------------------------------*/
static void _aeParaCalc(UINT8 iris,UINT8 iso,UINT8 shut)
{
	SINT32 tv,bv,av,sv;

	printf_t("calc: %d %d %d \n",iris,iso,shut);

	if(shut == AE_SHUTTER_AUTO) {
		if(iris == AE_IRIS_AUTO && iso == AE_ISO_AUTO){
			_aePAmodeParaCalc(iris,iso);
		}
		else if(iris == AE_IRIS_AUTO){
			iso-=1;
			_aePAmodeIrisCalc(iris,iso);
		}
		else if(iso == AE_ISO_AUTO){
			iris-=1;
			_aePAmodeIsoCalc(iris,iso);
		}else{
			iris-=1; iso-=1;
			_ae_PAmode_APEX_calc(iris, iso, &bv, &sv, &av, &tv);

			_ae_para_set(iris, iso, sv, av, tv);
		}
	}else if(iris == AE_IRIS_AUTO) {
		if(iso == AE_ISO_AUTO){
			shut-=1;
			_aeSmodeParaCalc(iris,iso,shut);
		}
		else {
			shut-=1; iso-=1;
			_aeSmodeIrisCalc(iris,iso,shut);
		}
	}else{
		if(iso == AE_ISO_AUTO){
			iris-=1; shut-=1;
			_aeMmodeIsoCalc(iris,iso,shut);
		}
		else{
			iris-=1; shut-=1; iso-=1;
			sv = aeIso[iso];
			av = aeIris[iris];
			tv = aeshut[shut];
			_ae_para_set(iris, iso, sv, av, tv);
		}
	}

	aeCb.evdiff = appPreviewAeBvIdxGet() + aePara.sv - aePara.av - aePara.tv;
	printf_t("*** calc: evdiff(%d), av = %d tv = %d sv = %d\n\n",
				aeCb.evdiff, aePara.av,aePara.tv,aePara.sv);

	aeCalcCnt=0;

}
#endif
/*-------------------------------------------------------------------------
 *  Function Name : _aePASMSet
 *------------------------------------------------------------------------*/
static void _aePASMSet(void)
{
#if 0
	switch (aeCb.aeset.pasm){
	case PASM_PROGRAM:
		if(aeCb.aeset.iso == UI_ISO_AUTO)
			_aeParaCalc(AE_IRIS_AUTO, AE_ISO_AUTO, AE_SHUTTER_AUTO);
		else
			_aeParaCalc(AE_IRIS_AUTO, aeCb.aeset.iso, AE_SHUTTER_AUTO);
		break;
	case PASM_APERTURE:
		if(aeCb.aeset.iso == UI_ISO_AUTO)
			_aeParaCalc(aeCb.aeset.iris, AE_ISO_AUTO, AE_SHUTTER_AUTO);
		else
			_aeParaCalc(aeCb.aeset.iris, aeCb.aeset.iso, AE_SHUTTER_AUTO);
		break;
   case PASM_SHUTTER:
		if(aeCb.aeset.iso == UI_ISO_AUTO)
			_aeParaCalc(AE_IRIS_AUTO, AE_ISO_AUTO, aeCb.aeset.shutter);
		else
			_aeParaCalc(AE_IRIS_AUTO, aeCb.aeset.iso, aeCb.aeset.shutter);
		break;
   case PASM_MANUAL:
		if(aeCb.aeset.iso == UI_ISO_AUTO)
			_aeParaCalc(aeCb.aeset.iris, AE_ISO_AUTO, aeCb.aeset.shutter);
		else
			_aeParaCalc(aeCb.aeset.iris, aeCb.aeset.iso, aeCb.aeset.shutter);
		break;
	}
#endif
}
/*-------------------------------------------------------------------------
 *  Function Name : _capture_ev_diff_calc
 *------------------------------------------------------------------------*/
static SINT32 _capture_ev_diff_calc(SINT32 sv, SINT32 tv, SINT32 av)
{
	/*-- evdiff
	 * evdiffOOASM Moden
	 * |PGthEVC
	 * WuM-Mode|i{b]w|P
	 * AEGtZhAHKHvC
	 * -->> aeBV + aePara.cap_sv - (aePara.cap_av + aePara.cap_tv).
	 * evdiff > 0 : Capture will be over-exposured.
	 * evdiff < 0 : Capture will be under-exposured.
	 */

	printf_t("@@@@@@@@@@@@@@\n");
	printf_t("_capture_ev_diff_calc\n");

	printf_t("<diff : bv(%d) sv(%d) av(%d) tv(%d) *****\n",
			appPreviewAeBvIdxGet(), sv, av, tv);
#ifdef DO_CAP_SAT_GAIN_COMPENSATION
	tv -= cap_svidx_to_expidx_offset(sv);
	printf_t("<diff : bv(%d) sv(%d) av(%d) tv(%d) *****\n",
			appPreviewAeBvIdxGet(), sv, av, tv);
#endif

#ifdef DO_ISO_XSHIFT
	tv -= capIsoShift;
	printf_t("<diff : bv(%d) sv(%d) av(%d) tv(%d) *****\n",
			appPreviewAeBvIdxGet(), sv, av, tv);
#endif

	return	(SINT32)(appPreviewAeBvIdxGet() + sv - (av + tv)) ;
}
/*-------------------------------------------------------------------------
 *  Function Name : _capture_evdiff2sv_adjust
 *------------------------------------------------------------------------*/
static SINT32 _capture_evdiff2sv_adjust(SINT32 sv, SINT32 tv, SINT32 av)
{
	SINT32 ev_diff;

	ev_diff = _capture_ev_diff_calc(sv, tv, av);
	//printf("...cF : __prior__ ev_diff(%d) \n", ev_diff);
	sv -= ev_diff;
	if (sv < capSatGainSVIDX) 
	{ 
		sv = capSatGainSVIDX; 
	}
	else if (sv > aeIso[aeCb.cap_max_isoidx]+SV_UNIT/4) 
	{
		sv = aeIso[aeCb.cap_max_isoidx]+SV_UNIT/4;
	}
	//ev_diff = _capture_ev_diff_calc(sv, tv, av);
	//printf("...cF : __post__ ev_diff(%d) \n", ev_diff);
	return sv;
}
/*-------------------------------------------------------------------------
 *  Function Name : _capture_PAmode_APEX_calc
 *------------------------------------------------------------------------*/
static void _capture_PAmode_APEX_calc(
	UINT8 iris,UINT8 iso,
	SINT32 *pbv, SINT32 *psv, SINT32 *pav, SINT32 *ptv
)
{
	SINT32 tv;

	*pbv = appPreviewAeBvIdxGet();
	*pav = (SINT32)aeIris[iris];
	*psv = (SINT32)aeIso[iso];
	tv = *pbv + *psv - *pav;
	#ifdef DO_ISO_XSHIFT
	tv += (capIsoShift);
	#endif
	#ifdef DO_CAP_SAT_GAIN_COMPENSATION
	tv += cap_svidx_to_expidx_offset(*psv);
	#endif
	*ptv = tv;
}

/*-------------------------------------------------------------------------
 *  Function Name : _capture_para_set
 *------------------------------------------------------------------------*/
static void _capture_para_set (
	UINT8 iris, UINT8 iso, SINT32 sv, SINT32 av, SINT32 tv
)
{
	printf_t("@@@@@@@@@@@@@@\n");
	printf_t("_capture_para_set\n");

	aePara.cap_sv = sv;
	aePara.cap_tv = tv;
	aePara.cap_av = av;
	aePara.ui_iris = iris;
	aePara.ui_iso = iso;
	printf_t("iris=%d iso=%d\n", aePara.ui_iris, aePara.ui_iso);
	printf_t("tv = %d sv = %d av = %d >\n\n",aePara.cap_tv,aePara.cap_sv,aePara.cap_av);
}
/*-------------------------------------------------------------------------
 *  Function Name : _capturePAmodeIsoCalc
 *------------------------------------------------------------------------*/
static void _capturePAmodeIsoCalc(UINT8 iris,UINT8 iso)
{
	SINT32 tv,bv,sv,av;
	printf_t("<cC %d iris = %d iso = %d\n",aeCalcCnt,iris,iso);
	aeCalcCnt++;

	_capture_PAmode_APEX_calc(iris, iso, &bv, &sv, &av, &tv);
	printf_t("bv=%d av=%d sv=%d ssh=%d tv=%d >= I%d\n",bv,av,sv,aesafeshut[aeCb.zml],tv,IRIS_SWITCH);

	if (tv < aesafeshut[aeCb.zml] &&
		aeIso[iso] <(aeCb.aeset.stabilizer ? CAP_STABILIZER_MAX_GAIN : capMaxGain)) 
	{ //iso < ISO_NUM-1) {
	 	iso ++;
	 	_capturePAmodeIsoCalc(iris,iso);
	}
	else 
	{
		_capture_para_set(iris, iso, sv, av, tv);
	}
}
/*-------------------------------------------------------------------------
 *  Function Name : _capturePAmodeIrisCalc
 *------------------------------------------------------------------------*/
static void _capturePAmodeIrisCalc(UINT8 iris,UINT8 iso)
{
	SINT32 tv,bv,av,sv;
	printf_t("<cA %d iris = %d iso = %d\n",aeCalcCnt,iris,iso);
	aeCalcCnt++;

	_capture_PAmode_APEX_calc(iris, iso, &bv, &sv, &av, &tv);
	printf_t("bv=%d av=%d sv=%d ssh=%d tv=%d >= I%d\n",bv,av,sv,aesafeshut[aeCb.zml],tv,IRIS_SWITCH);

#if IRIS_STEP<=1  /*use for clean warning only*/
	if (0)
#else
	if (tv >= aesafeshut[aeCb.zml]&& tv >= IRIS_SWITCH && iris < IRIS_STEP-1) 
#endif		
	{
		iris ++;
		_capturePAmodeIrisCalc(iris,iso);
	}
	else 
	{
		_capture_para_set(iris, iso, sv, av, tv);
	}
}
/*-------------------------------------------------------------------------
 *  Function Name : _capturePAmodeParaCalc
 *------------------------------------------------------------------------*/
static void _capturePAmodeParaCalc(UINT8 iris,UINT8 iso)
{
	SINT32 av,tv,sv,bv;
	SINT32 maxIsoStop;

	printf_t("<cB %d iris = %d iso = %d *****\n",aeCalcCnt,iris,iso);
	aeCalcCnt++;

	_capture_PAmode_APEX_calc(iris, iso, &bv, &sv, &av, &tv);
	printf_t("bv=%d av=%d sv=%d tv=%d >= ssh=%d, I%d \n",bv,av,sv,tv,aesafeshut[aeCb.zml], IRIS_SWITCH);

	#if SP5K_SENSOR_OV9712 
	maxIsoStop = aeCb.aeset.stabilizer? (UI_ISO_MAX-2): (aeCb.aeset.iso == AE_ISO_AUTO)? UI_ISO_400-UI_ISO_50: aeCb.cap_max_isoidx;
	#elif SP5K_SENSOR_OV2715
	maxIsoStop = aeCb.aeset.stabilizer? (UI_ISO_MAX-2): (aeCb.aeset.iso == AE_ISO_AUTO)? UI_ISO_1600-UI_ISO_50: aeCb.cap_max_isoidx;
    #elif SP5K_SENSOR_OV5653
	maxIsoStop = UI_ISO_200;//aeCb.aeset.stabilizer? (UI_ISO_MAX-2): (aeCb.aeset.iso == AE_ISO_AUTO)? UI_ISO_1600-UI_ISO_50: aeCb.cap_max_isoidx;
	#elif SP5K_SENSOR_SONYIMX083
	maxIsoStop = aeCb.aeset.stabilizer? (UI_ISO_MAX-2): (aeCb.aeset.iso == AE_ISO_AUTO)? UI_ISO_1600-UI_ISO_50: aeCb.cap_max_isoidx;
    #elif SP5K_SENSOR_OV8810
    maxIsoStop = aeCb.aeset.stabilizer? (UI_ISO_MAX-2): (aeCb.aeset.iso == AE_ISO_AUTO)? UI_ISO_800: aeCb.cap_max_isoidx;
	#else 
	maxIsoStop = aeCb.aeset.stabilizer? (UI_ISO_MAX-2): (aeCb.aeset.iso == AE_ISO_AUTO)? UI_ISO_800-UI_ISO_50: aeCb.cap_max_isoidx;

	#endif	

	if (aeCb.aeset.flash < UI_FLASH_OFF) 
	{
		maxIsoStop = (maxIsoStop>FLASH_AE_ISO_MAX) ? FLASH_AE_ISO_MAX : maxIsoStop;
		printf("<lester> aeCb.aeset.flash < UI_FLASH_OFF = %d %d",aeCb.aeset.flash,maxIsoStop);
	}

	printf_t("ParaCalc A\n");
#if IRIS_STEP<=1
	if(0)
#else
	if (tv >= aesafeshut[aeCb.zml] &&
		tv >= IRIS_SWITCH &&
		aeIso[iso] <= STD_ISO_50 &&
		iris < IRIS_STEP-1)
#endif		
	{	/*-- change to small IRIS */
		printf_t("ParaCalc B\n");
		iris ++;
		_capturePAmodeParaCalc(iris,iso);
	}
	else if (tv < aesafeshut[aeCb.zml] && iso < maxIsoStop)
	{
		printf_t("ParaCalc C\n");

	 	iso ++;
	 	_capturePAmodeParaCalc(iris,iso);
	}
	else
	{	
		#if 1
		if(pAeCapFlikrShut != NULL){
			UINT32 i,aeCapFlickerIdx = 0;
			SINT32 aeShutDiff = 0;

			printf("\033[32m Before aeCapFlickerIdx :TV(%u),SV(%u)\033[0m\n",tv,sv);
			if (tv < pAeCapFlikrShut[AE_CAP_FLICKER_SHUT_NUM - 1]){
				tv = pAeCapFlikrShut[AE_CAP_FLICKER_SHUT_NUM - 1];
			}
			
			if(tv < pAeCapFlikrShut[aeCapFlickerIdx])
			{/*TV is longer than shortest flicker time*/
				for(i = 0 ; i < AE_CAP_FLICKER_SHUT_NUM ; i++)
				{
					if(tv >= pAeCapFlikrShut[i])
					{
						if(iso < maxIsoStop && tv != pAeCapFlikrShut[i])
						{
							aeCapFlickerIdx = i -1;
						}
						else
						{
							aeCapFlickerIdx = i;
						}
						break;
					} 
				}
				aeShutDiff = tv - pAeCapFlikrShut[aeCapFlickerIdx];
				sv = sv - aeShutDiff;
				tv = pAeCapFlikrShut[aeCapFlickerIdx];
				iso = svidx_to_aeIso_tblidx(sv);
			}
			else if(tv - pAeCapFlikrShut[aeCapFlickerIdx] < aeIso[iso] - aeIso[0])
			{/*TV is shorter than shortest flicker time , but ISO is not the Lowest ISO*/
				aeShutDiff = tv - pAeCapFlikrShut[aeCapFlickerIdx];
				sv = sv - aeShutDiff;
				tv = pAeCapFlikrShut[aeCapFlickerIdx];
				iso = svidx_to_aeIso_tblidx(sv);
			}
			printf("\033[32m aeCapFlickerIdx = %d,TV(%u),SV(%u)\033[0m\n",aeCapFlickerIdx,tv,sv);
		}
		#endif
		printf_t("ParaCalc D\n");
		_capture_para_set(iris, iso, sv, av, tv);
	}
}
/*-------------------------------------------------------------------------
 *  Function Name : _captureSmodeIrisCalc
 *------------------------------------------------------------------------*/
static void _captureSmodeIrisCalc(UINT8 iris,UINT8 iso,UINT8 shut)
{
	SINT32 bv,bv1,tv,sv,av;
	printf_t("<cD %d iris = %d iso = %d\n",aeCalcCnt,iris,iso);
	aeCalcCnt++;

	bv = appPreviewAeBvIdxGet();
	sv = (SINT32)aeIso[iso];
	av = (SINT32)aeIris[iris];
	tv = (SINT32)aeshut[shut];
	bv1 = av + tv -sv;
#if IRIS_STEP<=1
	if(0)
#else
	if (bv > bv1 && iris < IRIS_STEP-1)
#endif		
	{
		iris ++;
		_captureSmodeIrisCalc(iris,iso,shut);
	}
	else
	{
		_capture_para_set(iris, iso, sv, av, tv);
	}
}
/*-------------------------------------------------------------------------
 *  Function Name : _captureSmodeParaCalc
 *------------------------------------------------------------------------*/
static void _captureSmodeParaCalc(UINT8 iris,UINT8 iso,UINT8 shut)
{
	SINT32 bv,bv1,tv,sv,av;

	printf_t("<cF %d iris = %d iso = %d shut=%d\n",aeCalcCnt,iris,iso,shut);
	aeCalcCnt++;

	bv = appPreviewAeBvIdxGet();
	sv = (SINT32)aeIso[iso];
	av = (SINT32)aeIris[iris];
	tv = (SINT32)aeshut[shut];
	bv1 = av + tv - sv;
	printf_t("bv = %d bv1 = %d iso = %d shut=%d\n",bv,bv1,sv,aeshut[shut]);
#if IRIS_STEP<=1
	if(0)
#else
	if (bv > bv1 && iris < IRIS_STEP-1) 
#endif		
	{
		iris ++;
		_captureSmodeParaCalc(iris,iso,shut);
	}
	else if (bv < bv1 &&iso < (aeCb.aeset.stabilizer ? (UI_ISO_MAX-2) : aeCb.cap_max_isoidx))
	{
	 	iso ++;
	 	_captureSmodeParaCalc(iris,iso,shut);
	}
	else 
	{
		sv = _capture_evdiff2sv_adjust(sv, tv, av);
		_capture_para_set(iris, iso, sv, av, tv);
	}
}
/*-------------------------------------------------------------------------
 *  Function Name : _captureParaCalc
 *------------------------------------------------------------------------*/
static void _captureMmodeIsoCalc(UINT8 iris,UINT8 iso,UINT8 shut)
{
	SINT32 bv,bv1,tv,sv,av;

	printf_t("<cE %d iris = %d iso = %d\n",aeCalcCnt,iris,iso);
	aeCalcCnt++;

	bv = appPreviewAeBvIdxGet();
	sv = (SINT32)aeIso[iso];
	av = (SINT32)aeIris[iris];
	tv = (SINT32)aeshut[shut];
	bv1 = av + tv - sv;
	if (bv < bv1 && iso < ISO_NUM-1) 
	{
	 	iso ++;
	 	_captureMmodeIsoCalc(iris,iso,shut);
	}
	else 
	{
		sv = _capture_evdiff2sv_adjust(sv, tv, av);
		_capture_para_set(iris, iso, sv, av, tv);
	}
}
/*-------------------------------------------------------------------------
 *  Function Name : _captureParaCalc
 *------------------------------------------------------------------------*/
static void _captureParaCalc(UINT8 iris,UINT8 iso,UINT8 shut)
{
	SINT32 tv,bv,sv,av;

	printf_t("@@@@@@@@@@@@@@\n");
	printf_t("_captureParaCalc\n");

	printf_t("cap_calc: %d %d %d \n",iris,iso,shut);

	if(shut == AE_SHUTTER_AUTO)
	{
		/********************************************
		 * P & A Mode
		 ********************************************/
		if(iris == AE_IRIS_AUTO && iso == AE_ISO_AUTO)
		{
			/*-- P-Mode, AUTO ISO */
			_capturePAmodeParaCalc(iris,iso);
		}
		else if(iris == AE_IRIS_AUTO)
		{
			/*-- P-Mode, USER ISO */
			iso-=1;
			_capturePAmodeIrisCalc(iris,iso);
		}
		else if(iso == AE_ISO_AUTO)
		{
			/*-- A-Mode, AUTO ISO */
			iris-=1;
			_capturePAmodeIsoCalc(iris,iso);
		}else
		{
			/*-- A-Mode, USER ISO */
			iris-=1; iso-=1;

			_capture_PAmode_APEX_calc(iris, iso, &bv, &sv, &av, &tv);

			#if 0 /* it will be done at end of _captureParaCalc() */
			if (tv<capLongestShutter) tv = capLongestShutter;
			else if (tv>capShortestShutter) tv = capShortestShutter;
			#endif
			_capture_para_set(iris, iso, sv, av, tv);
		}
	}
	else if(iris == AE_IRIS_AUTO)
	{
		/********************************************
		 * S Mode
		 ********************************************/
		if(iso == AE_ISO_AUTO)
		{
			/*-- S-Mode, AUTO ISO */
			shut-=1;
			_captureSmodeParaCalc(iris,iso,shut);
		}
		else 
		{
			/*-- S-Mode, USER ISO */
			shut-=1; iso-=1;
			_captureSmodeIrisCalc(iris,iso,shut);
		}
	}
	else
	{
		/********************************************
		 * M Mode
		 ********************************************/
		if(iso == AE_ISO_AUTO)
		{
			iris-=1; shut-=1;
			_captureMmodeIsoCalc(iris,iso,shut);
		}
		else
		{
			iris-=1; shut-=1; iso-=1;
			_capture_para_set(iris, iso, aeIso[iso], aeIris[iris], aeshut[shut]);
		}
	}

	/********************************************
	 * Chcek limiation
	 ********************************************/
	if (is_cap_exceed_shortest_shutter(aePara.cap_tv)) 
	{
		printf_t("SH H: %d\n", aePara.cap_tv);
		cap_set_shortest_shutter(&aePara.cap_tv);
	}

	if (is_cap_exceed_longest_shutter(aePara.cap_tv)) 
	{
		printf_t("SH L: %d\n", aePara.tv);
		cap_set_longest_shutter(&aePara.cap_tv);
		/*Add for HDR avoid  flicker test START*/
		if(IsHDR){
			if(aeFlickerSel == 0){
				aePara.cap_tv = CAP_EXP_50HZ_1_25;
			}
			else{
				aePara.cap_tv = CAP_EXP_60HZ_1_30;
			}
		}
		/*Add for HDR avoid  flicker test END*/
	}

	/********************************************
	 * AEB, HDR Night scene EV Biasing
	 ********************************************/
	 #define AEB_AE_DIFF_INDEX 16
	 if(aeCb.aeset.aeb){		/*AEB*/
	 	printf("AEB AE CAL\n");
		tv = aePara.cap_tv + AEB_AE_DIFF_INDEX;
		sv = aePara.cap_sv;
		if (is_cap_exceed_shortest_shutter(tv)) 
		{
			sv -= (tv - capShortestShutter);
			tv = capShortestShutter;

			if (sv < aeIso[0]) 
			{
				sv = aeIso[0]; /* system limitation !! */
			}
		}
		aeCb.capaebagc[0] = sv;
		aeCb.capaebexp[0] = tv;

		/*-- Zero EV bias of AEB, HDR */
		aeCb.capaebexp[1] = aePara.cap_tv;
		aeCb.capaebagc[1] = aePara.cap_sv;

		/*-- Positive EV bias of AEB, HDR */
		tv = aePara.cap_tv - AEB_AE_DIFF_INDEX;
		sv = aePara.cap_sv;
		if(is_cap_exceed_longest_shutter(tv)) 
		{
			sv += (capLongestShutter - tv);
			tv = capLongestShutter;

			if (sv > aeIso[ISO_NUM-2]) 
			{
				sv = aeIso[ISO_NUM-2]; /* sys limitation !! */
			}
		}
		aeCb.capaebagc[2] = sv;
		aeCb.capaebexp[2] = tv;
		
		printf("\033[32m [AEB] aeCb.capaebexp[0] = %d ,aeCb.capaebagc[0] = %d \033[0m\n",aeCb.capaebexp[0],aeCb.capaebagc[0]);
		printf("\033[32m [AEB] aeCb.capaebexp[1] = %d ,aeCb.capaebagc[1] = %d \033[0m\n",aeCb.capaebexp[1],aeCb.capaebagc[1]);
		printf("\033[32m [AEB] aeCb.capaebexp[2] = %d ,aeCb.capaebagc[2] = %d \033[0m\n",aeCb.capaebexp[2],aeCb.capaebagc[2]);						
	}
	else if(IsHDR){ /*HDR*/
		#if 0
		//extern UINT32 HDR_EV_BIAS_UI_SET;
		UINT32 HDR_EvBias[4]={16,21,27,32}; /* 1,1.3,1.7,2*/
		UINT32 targetEvBias;
		UINT32 diffEV,tmpDiff;
		targetEvBias = HDR_EvBias[0]*2;
		
			{
			printf("[HDR] target EV bias:%d\n",targetEvBias);	
			printf("\033[32m aePara.cap_tv = %d ,aePara.cap_sv = %d\033[0m\n",aePara.cap_tv , aePara.cap_sv); 

			#if 0 /* XiaoFan*/
			if((aePara.cap_tv -16) < capLongestShutter){				
				if(aePara.cap_sv <= (aeIso[ISO_NUM-3] + (aePara.cap_tv - capLongestShutter))){
					printf("[HDR] case 1\n");
					aeCb.capaebexp[0] = aePara.cap_tv + 32 -(aePara.cap_tv - capLongestShutter);
					aeCb.capaebagc[0] = aePara.cap_sv + 16 -(aePara.cap_tv - capLongestShutter);
					aeCb.capaebexp[1] = aePara.cap_tv + 16 -(aePara.cap_tv - capLongestShutter);
					aeCb.capaebagc[1] = aeCb.capaebagc[0];
					aeCb.capaebexp[2] = aePara.cap_tv -(aePara.cap_tv - capLongestShutter);
					aeCb.capaebagc[2] = aeCb.capaebagc[0];
					#if 0
					printf("\033[32m aeCb.capaebexp[0] = %d ,aeCb.capaebagc[0] = %d \033[0m\n",aeCb.capaebexp[0],aeCb.capaebagc[0]);
					printf("\033[32m aeCb.capaebexp[1] = %d ,aeCb.capaebagc[1] = %d \033[0m\n",aeCb.capaebexp[1],aeCb.capaebagc[1]);
					printf("\033[32m aeCb.capaebexp[2] = %d ,aeCb.capaebagc[2] = %d \033[0m\n",aeCb.capaebexp[2],aeCb.capaebagc[2]);
					#endif
				}
				else{
					printf("[HDR] case 2\n");
					aeCb.capaebexp[0] = aePara.cap_tv + 16 + (aeIso[ISO_NUM-2] - aePara.cap_sv) ;
					aeCb.capaebagc[0] = aeIso[ISO_NUM-2];
					aeCb.capaebexp[1] = aePara.cap_tv + (aeIso[ISO_NUM-2] - aePara.cap_sv) ;
					aeCb.capaebagc[1] = aeCb.capaebagc[0];
					aeCb.capaebexp[2] = aePara.cap_tv;
					aeCb.capaebagc[2] = aeCb.capaebagc[0];
					#if 0
					printf("\033[33m aeCb.capaebexp[0] = %d ,aeCb.capaebagc[0] = %d \033[0m\n",aeCb.capaebexp[0],aeCb.capaebagc[0]);
					printf("\033[33m aeCb.capaebexp[1] = %d ,aeCb.capaebagc[1] = %d \033[0m\n",aeCb.capaebexp[1],aeCb.capaebagc[1]);
					printf("\033[33m aeCb.capaebexp[2] = %d ,aeCb.capaebagc[2] = %d \033[0m\n",aeCb.capaebexp[2],aeCb.capaebagc[2]);
					#endif
				}
			}
			else if((aePara.cap_tv + 16) >  capLongestShutter){
				printf("[HDR] case 3\n");
				aeCb.capaebexp[0] = aePara.cap_tv -16;
				aeCb.capaebagc[0] = aePara.cap_sv;
				aeCb.capaebexp[1] = aePara.cap_tv;
				aeCb.capaebagc[1] = aeCb.capaebagc[0];
				aeCb.capaebexp[2] = aePara.cap_tv + (capLongestShutter - aePara.cap_tv);
				aeCb.capaebagc[2] = aeCb.capaebagc[0];
			}
			else{
				printf("[HDR] case 4\n");
				aeCb.capaebexp[0] = aePara.cap_tv -16;
				aeCb.capaebagc[0] = aePara.cap_sv;
				aeCb.capaebexp[1] = aePara.cap_tv;
				aeCb.capaebagc[1] = aeCb.capaebagc[0];
				aeCb.capaebexp[2] = aePara.cap_tv + 16;
				aeCb.capaebagc[2] = aeCb.capaebagc[0];
			}		
		
		printf("\033[32m aeCb.capaebexp[0] = %d ,aeCb.capaebagc[0] = %d \033[0m\n",aeCb.capaebexp[0],aeCb.capaebagc[0]);
		printf("\033[32m aeCb.capaebexp[1] = %d ,aeCb.capaebagc[1] = %d \033[0m\n",aeCb.capaebexp[1],aeCb.capaebagc[1]);
		printf("\033[32m aeCb.capaebexp[2] = %d ,aeCb.capaebagc[2] = %d \033[0m\n",aeCb.capaebexp[2],aeCb.capaebagc[2]);

		diffEV = aeCb.capaebagc[2] - aeCb.capaebagc[0] + aeCb.capaebexp[0] - aeCb.capaebexp[2];
		diffEV = diffEV*10/16;		
		printf("\033[32m diffEV = %d\033[0m\n",diffEV);
		#endif		
			
			if((aePara.cap_tv - targetEvBias) < capLongestShutter){				
				if(aePara.cap_sv <= ((aeIso[ISO_NUM-2] - targetEvBias)+ (aePara.cap_tv - capLongestShutter))){
					printf("[HDR] case 1\n");					
					aeCb.capaebexp[1] = aePara.cap_tv + targetEvBias -(aePara.cap_tv - capLongestShutter);
					aeCb.capaebagc[1] = aePara.cap_sv + targetEvBias -(aePara.cap_tv - capLongestShutter);

					aeCb.capaebexp[0] = aeCb.capaebexp[1]+(targetEvBias/2);
					aeCb.capaebagc[0] = aeCb.capaebagc[1];
					
					aeCb.capaebexp[2] = aeCb.capaebexp[1]-(targetEvBias/2);
					aeCb.capaebagc[2] = aeCb.capaebagc[1];
				}
				else{
					printf("[HDR] case 2\n");

					aeCb.capaebexp[1] = aePara.cap_tv + (aeIso[ISO_NUM-2] - aePara.cap_sv) ;
					aeCb.capaebagc[1] = aeIso[ISO_NUM-2];
				
					if(aeCb.capaebexp[1] - (targetEvBias/2) < capLongestShutter){
						tmpDiff = aeCb.capaebexp[1] - capLongestShutter;
					}
					else tmpDiff = targetEvBias/2;
						
					aeCb.capaebexp[0] = aeCb.capaebexp[1] + tmpDiff;
					aeCb.capaebagc[0] = aeCb.capaebagc[1];
					
					aeCb.capaebexp[2] = aeCb.capaebexp[1] - tmpDiff;
					aeCb.capaebagc[2] = aeCb.capaebagc[1];
				}
			}
			#if 0
			else if((aePara.cap_tv + targetEvBias) >  capLongestShutter){
				printf("[HDR] case 3\n");
				aeCb.capaebexp[0] = aePara.cap_tv - targetEvBias;
				aeCb.capaebagc[0] = aePara.cap_sv;
				aeCb.capaebexp[1] = aePara.cap_tv;
				aeCb.capaebagc[1] = aeCb.capaebagc[0];
				aeCb.capaebexp[2] = aePara.cap_tv + (capLongestShutter - aePara.cap_tv);
				aeCb.capaebagc[2] = aeCb.capaebagc[0];
			}
			#endif
			else{
				printf("[HDR] case 4\n");
				aeCb.capaebexp[0] = aePara.cap_tv + targetEvBias/2;
				aeCb.capaebagc[0] = aePara.cap_sv;
				aeCb.capaebexp[1] = aePara.cap_tv;
				aeCb.capaebagc[1] = aeCb.capaebagc[0];
				aeCb.capaebexp[2] = aePara.cap_tv - targetEvBias/2;
				aeCb.capaebagc[2] = aeCb.capaebagc[0];
			}		
		}
		
		printf("\033[32m [HDR] aeCb.capaebexp[0] = %d ,aeCb.capaebagc[0] = %d \033[0m\n",aeCb.capaebexp[0],aeCb.capaebagc[0]);
		printf("\033[32m [HDR] aeCb.capaebexp[1] = %d ,aeCb.capaebagc[1] = %d \033[0m\n",aeCb.capaebexp[1],aeCb.capaebagc[1]);
		printf("\033[32m [HDR] aeCb.capaebexp[2] = %d ,aeCb.capaebagc[2] = %d \033[0m\n",aeCb.capaebexp[2],aeCb.capaebagc[2]);						
		diffEV = aeCb.capaebagc[2] - aeCb.capaebagc[0] + aeCb.capaebexp[0] - aeCb.capaebexp[2];
		printf("\033[32m diffEV = %d\033[0m\n",diffEV);
		diffEV = diffEV*10/16;
		sp5kStillCapAdvCfgSet( SP5K_CAPTURE_HDR_EV_BIAS, diffEV);
		printf("\033[32m diffEVBias = %d\033[0m\n",diffEV);
	#else
		
		UINT32 HDR_EvBias[4]={16,21,27,32}; /* 1,1.3,1.7,2*/
		UINT32 targetEvBias;
		UINT32 diffEV,tmpDiff;
		UINT32 normalCase;

		normalCase = 1;
		targetEvBias = HDR_EvBias[0];

		printf("[HDR] target EV bias:%d\n",targetEvBias);	
		printf("\033[32m aePara.cap_tv = %d ,aePara.cap_sv = %d\033[0m\n",aePara.cap_tv , aePara.cap_sv); 

		#if 1
		if( (aeFlickerSel == 0 && aePara.cap_tv <= CAP_EXP_50HZ_1_50) || (aeFlickerSel == 1 && aePara.cap_tv <= CAP_EXP_60HZ_1_60)){/*flicker case*/
			if(aeFlickerSel == 0){/*50Hz*/
				if(( aePara.cap_tv - CAP_EXP_50HZ_1_25) +  (UINT32)(aeIso[ISO_NUM-1] - aePara.cap_sv) > targetEvBias){
					aeCb.capaebexp[1] = CAP_EXP_50HZ_1_50;
					aeCb.capaebagc[1] = aePara.cap_sv + targetEvBias - ( aePara.cap_tv - CAP_EXP_50HZ_1_25);

					aeCb.capaebexp[0] = CAP_EXP_50HZ_1_100;
					aeCb.capaebagc[0] = aeCb.capaebagc[1];	

					aeCb.capaebexp[2] = CAP_EXP_50HZ_1_25;
					aeCb.capaebagc[2] = aeCb.capaebagc[1];	

					normalCase = 0;
				}
				
			}else{/*60Hz*/
					if(( aePara.cap_tv - CAP_EXP_60HZ_1_30) +  (UINT32)(aeIso[ISO_NUM-1] - aePara.cap_sv) > targetEvBias){
					aeCb.capaebexp[1] = CAP_EXP_60HZ_1_60;
					aeCb.capaebagc[1] = aePara.cap_sv + targetEvBias - ( aePara.cap_tv - CAP_EXP_60HZ_1_30);

					aeCb.capaebexp[0] = CAP_EXP_60HZ_1_120;
					aeCb.capaebagc[0] = aeCb.capaebagc[1];	

					aeCb.capaebexp[2] = CAP_EXP_60HZ_1_30;
					aeCb.capaebagc[2] = aeCb.capaebagc[1];	
					
					normalCase = 0;
				}		
			}
		}
		#endif
		if(normalCase){/*Normal case , No flicker*/	
			if((aePara.cap_tv - (SINT32)targetEvBias) < capLongestShutter){ 			
				if(aePara.cap_sv <= ((aeIso[ISO_NUM-1] - (SINT32)targetEvBias)+ (aePara.cap_tv - capLongestShutter))){
					printf("[HDR] case 1\n");					
					aeCb.capaebexp[1] = aePara.cap_tv + targetEvBias -(aePara.cap_tv - capLongestShutter);
					aeCb.capaebagc[1] = aePara.cap_sv + targetEvBias -(aePara.cap_tv - capLongestShutter);

					aeCb.capaebexp[0] = aeCb.capaebexp[1]+targetEvBias;
					aeCb.capaebagc[0] = aeCb.capaebagc[1];
					
					aeCb.capaebexp[2] = aeCb.capaebexp[1]-targetEvBias;
					aeCb.capaebagc[2] = aeCb.capaebagc[1];
				}
				else{
					printf("[HDR] case 2\n");

					aeCb.capaebexp[1] = aePara.cap_tv + (aeIso[ISO_NUM-1] - aePara.cap_sv) ;
					aeCb.capaebagc[1] = aeIso[ISO_NUM-1];
				
					if(aeCb.capaebexp[1] - (SINT32)(targetEvBias) < capLongestShutter){
						tmpDiff = aeCb.capaebexp[1] - capLongestShutter;
					}
					else{
						tmpDiff = targetEvBias;
					}
						
					aeCb.capaebexp[0] = aeCb.capaebexp[1] + tmpDiff;
					aeCb.capaebagc[0] = aeCb.capaebagc[1];
					
					aeCb.capaebexp[2] = aeCb.capaebexp[1] - tmpDiff;
					aeCb.capaebagc[2] = aeCb.capaebagc[1];
				}
			}
			else{
				printf("[HDR] case 4\n");
				aeCb.capaebexp[0] = aePara.cap_tv + targetEvBias;
				aeCb.capaebagc[0] = aePara.cap_sv;
				aeCb.capaebexp[1] = aePara.cap_tv;
				aeCb.capaebagc[1] = aeCb.capaebagc[0];
				aeCb.capaebexp[2] = aePara.cap_tv - targetEvBias;
				aeCb.capaebagc[2] = aeCb.capaebagc[0];
			}		

		}	
		
		printf("\033[32m [HDR] aeCb.capaebexp[0] = %d ,aeCb.capaebagc[0] = %d \033[0m\n",aeCb.capaebexp[0],aeCb.capaebagc[0]);
		printf("\033[32m [HDR] aeCb.capaebexp[1] = %d ,aeCb.capaebagc[1] = %d \033[0m\n",aeCb.capaebexp[1],aeCb.capaebagc[1]);
		printf("\033[32m [HDR] aeCb.capaebexp[2] = %d ,aeCb.capaebagc[2] = %d \033[0m\n",aeCb.capaebexp[2],aeCb.capaebagc[2]);						
		diffEV = aeCb.capaebagc[2] - aeCb.capaebagc[0] + aeCb.capaebexp[0] - aeCb.capaebexp[2];
		printf("\033[32m diffEV = %d\033[0m\n",diffEV);
		diffEV = diffEV*10/16;
		sp5kStillCapAdvCfgSet( SP5K_CAPTURE_HDR_EV_BIAS, diffEV);
		printf("\033[32m diffEVBias = %d\033[0m\n",diffEV);
	#endif
	}
	else if(IsHDRNightScene){ /*night scene*/
		UINT32 exp_limit = EXP_1_08; /* night scene nWL1/8s */
		printf("\033[32m [HDRNightScene] aePara.cap_tv = %d ,aePara.cap_sv = %d \033[0m\n",aePara.cap_tv,aePara.cap_sv);
		if(aePara.cap_tv < (SINT32)exp_limit){
			aePara.cap_sv = aePara.cap_sv + (exp_limit - aePara.cap_tv);
			aePara.cap_tv = exp_limit;
			if(aePara.cap_sv >= aeIso[ISO_NUM]) {
				aePara.cap_sv = aeIso[ISO_NUM];
			}			
			printf("\033[32m [HDRNightScene]adj aePara.cap_tv = %d ,aePara.cap_sv = %d \033[0m\n",aePara.cap_tv,aePara.cap_sv);
		}
	}
	/*-- evdiff
	 * evdiffOOASM Moden
	 * |PGthEVC
	 * WuM-Mode|i{b]w|P
	 * AEGtZhAHKHvC
	 * -->> aeBV + aePara.cap_sv - (aePara.cap_av + aePara.cap_tv).
	 * evdiff > 0 : Capture will be over-exposured.
	 * evdiff < 0 : Capture will be under-exposured.
	 */
	aeCb.evdiff = (SINT32)_capture_ev_diff_calc(aePara.cap_sv, aePara.cap_tv, aePara.cap_av);

	//dbgOsd_Print(7, "%d", aeCb.evdiff);

	printf_t("\n*** cap_calc: evdiff(%d), av = %d tv = %d sv = %d\n\n",
				aeCb.evdiff, aePara.cap_av,aePara.cap_tv,aePara.cap_sv);
	aeCalcCnt=0;

}
/*-------------------------------------------------------------------------
 *  Function Name : _capturePASMSet
 *------------------------------------------------------------------------*/
static void _capturePASMSet(void)
{
	switch (aeCb.aeset.pasm)
	{
	case PASM_PROGRAM:
	case VIDEO_MODE:
		if(aeCb.aeset.iso == UI_ISO_AUTO)
		{
			_captureParaCalc(AE_IRIS_AUTO, AE_ISO_AUTO, AE_SHUTTER_AUTO);

		}
		else
		{
			_captureParaCalc(AE_IRIS_AUTO, aeCb.aeset.iso, AE_SHUTTER_AUTO);

		}
		break;
	case PASM_APERTURE:
		if(aeCb.aeset.iso == UI_ISO_AUTO)
		{
			_captureParaCalc(aeCb.aeset.iris, AE_ISO_AUTO, AE_SHUTTER_AUTO);

		}
		else
		{
			_captureParaCalc(aeCb.aeset.iris, aeCb.aeset.iso, AE_SHUTTER_AUTO);

		}
		break;
   case PASM_SHUTTER:
		if(aeCb.aeset.iso == UI_ISO_AUTO)
		{
			_captureParaCalc(AE_IRIS_AUTO, AE_ISO_AUTO, aeCb.aeset.shutter);
		}
		else
		{
			_captureParaCalc(AE_IRIS_AUTO, aeCb.aeset.iso, aeCb.aeset.shutter);
		}
		break;
   case PASM_MANUAL:
		if(aeCb.aeset.iso == UI_ISO_AUTO)
		{
			_captureParaCalc(aeCb.aeset.iris, AE_ISO_AUTO, aeCb.aeset.shutter);
		}
		else
		{
			_captureParaCalc(aeCb.aeset.iris, aeCb.aeset.iso, aeCb.aeset.shutter);
		}
		break;
	}
}

/*-------------------------------------------------------------------------
 * Function : appAeFastAdjust
 *------------------------------------------------------------------------*/
static void _aeFastViewSet(void)
{
	SINT32 expidx, agcidx;
    UINT32 currMode;

	expidx = (SINT32)aeCb.expidx;
	agcidx = (SINT32)aeCb.agcidx;

  	sp5kModeGet(&currMode);
    if(currMode == SP5K_MODE_VIDEO_PREVIEW)
        aeCb.evdiff = 0;

	expidx -= aeCb.evdiff;
	if (aeCb.evdiff > 0)
	{
		//printf("fastAdj (B): V > C ... expidx(%d), agcidx(%d), evdiff(%d) \n", expidx, agcidx, aeCb.evdiff);
		if (is_ae_exceed_longest_shutter(expidx))
		{
			agcidx += (aeLongestShutter - expidx);
			ae_set_longest_shutter(&expidx);
			//printf("fastAdj (B-1): expidx(%d), agcidx(%d), evdiff(%d) \n", expidx, agcidx, aeCb.evdiff);

			if (is_ae_exceed_max_gain(agcidx))
			{
				ae_set_max_gain(&agcidx);
			}
			//printf("fastAdj (B-2): expidx(%d), agcidx(%d), evdiff(%d) \n", expidx, agcidx, aeCb.evdiff);
		}
		//printf("fastAdj (BB): expidx(%d), agcidx(%d), evdiff(%d) \n", expidx, agcidx, aeCb.evdiff);
	}
	else if (aeCb.evdiff < 0)
	{
		//printf("fastAdj (C): V < C ... expidx(%d), agcidx(%d), evdiff(%d) \n", expidx, agcidx, aeCb.evdiff);
		if (is_ae_exceed_longest_shutter(expidx))
		{
			agcidx -= (expidx - aeLongestShutter);
			ae_set_longest_shutter(&expidx);
			//printf("fastAdj (C-1): expidx(%d), agcidx(%d), evdiff(%d) \n", expidx, agcidx, aeCb.evdiff);

			if (is_ae_exceed_min_gain(agcidx))
			{
				ae_set_min_gain(&agcidx);
			}
			//printf("fastAdj (C-2): expidx(%d), agcidx(%d), evdiff(%d) \n", expidx, agcidx, aeCb.evdiff);
		}
		//printf("fastAdj (CC): expidx(%d), agcidx(%d), evdiff(%d) \n", expidx, agcidx, aeCb.evdiff);
	}

	/*----- Set last AE prior capture !!
	 */
	printf_t("_aeFastViewSet: expidx(%d), agcidx(%d) \n", expidx, agcidx);
#if !CAPTURE_EQUAL_PREVIEW
sp5kPreviewExpAgcSet(expidx, (UINT32)agcidx);
#endif

	aePara.tv = pv_expidx_to_tvidx(expidx);
	aePara.sv = pv_agcidx_to_svidx(agcidx);
}


/*-------------------------------------------------------------------------
 *  Function Name : _capture_DistExpRecommandCalc
 *------------------------------------------------------------------------*/
#ifdef HW_DIST 
static SINT32 _capture_DistExpRecommandCalc (void)
{
	sp5kStillDistGmvInfo_t *distInfo = NULL;
   	UINT32 pvexpIdx,pvagcIdx;

	UINT32 ret, distEntry=0,LatestEntry=0;
	SINT32 disStep=0;

	UINT8 i=0;

   	sp5kPreviewExpAgcGet(&pvexpIdx, &pvagcIdx);
	ret = sp5kStillCapDistGmvInfoGet(&distInfo,&distEntry);
	if(ret == SUCCESS)  /*add for mantis bug 0047634*/
	{
		LatestEntry = distEntry%64;
		for (i = 0; i < 16; i++)
		{
			if (LatestEntry==0)
			{
				LatestEntry=64;
			}
			else
			{
				LatestEntry--;
			}

			if (pv_expidx_to_tvidx(pvexpIdx)>=EXP_1_32)
			{
				distInfo[LatestEntry].gmvx=distInfo[LatestEntry].gmvx*2;
				distInfo[LatestEntry].gmvy=distInfo[LatestEntry].gmvy*2;
			}
			else if (pv_expidx_to_tvidx(pvexpIdx)<=EXP_1_16)
			{
				distInfo[LatestEntry].gmvx=distInfo[LatestEntry].gmvx/2;
				distInfo[LatestEntry].gmvy=distInfo[LatestEntry].gmvy/2;
			}

		}

		sp5kStillCapDistExpStepGet(distEntry,&disStep);
	}

	appStill_SetDist(0);

	return disStep;


}
#endif

/*-------------------------------------------------------------------------
 *  Function Name : appAeCaptureSet
 *------------------------------------------------------------------------*/
void appAeCaptureSet(UINT8 imgId)
{

	UINT8 dist;
#if CAPTURE_EQUAL_PREVIEW
		UINT32 exp;
    UINT32 agc;
#endif
	extern UINT8 IsHDR;
	appAeDistStatusGet(&dist);
	#ifdef HW_DIST
	SINT32 RecomStep=0;
	if (dist ==TRUE)
	{
		RecomStep=_capture_DistExpRecommandCalc();
		//printf("\n***@@@@@RecomStep:%d***\n",RecomStep);

	}
	#endif

	printf_t("@@@@@@@@@@@@@@\n");
	printf_t("appAeCaptureSet\n");

	if(aeCb.aeset.aeb && imgId < 3)
	{
		printf("\n\033[32m*** AEB %d ***\033[0m\n",imgId);

		aePara.cap_tv = aeCb.capaebexp[imgId];
		aePara.cap_sv = aeCb.capaebagc[imgId];
		aeCb.capexp = cap_tvidx_to_expidx(aePara.cap_tv);
		aeCb.capagc = cap_svidx_to_agcidx(aePara.cap_sv);
		if(imgId == 0)
		{
			aeCb.capav = aePara.cap_av;
			appAeIrisSet(aePara.ui_iris);

			#if LENS_MOTOR_DRV_MD3_IN4
			APP_SLEEP_MS(40);
			#endif
		}
	}
	else if(IsHDR && imgId < 3)
	{
		printf_t("\n*** HDR %d ***\n",imgId);

		aePara.cap_tv = aeCb.capaebexp[imgId];
		aePara.cap_sv = aeCb.capaebagc[imgId];
		aeCb.capexp = cap_tvidx_to_expidx(aePara.cap_tv);
		aeCb.capagc = cap_svidx_to_agcidx(aePara.cap_sv);
		if(imgId == 0)
		{
			aeCb.capav = aePara.cap_av;
			appAeIrisSet(aePara.ui_iris);

			#if LENS_MOTOR_DRV_MD3_IN4
			APP_SLEEP_MS(40);
			#endif
		}
	}
	else
	{
		printf("<lester> appAeCaptureSet \n");
		aeCb.capexp = cap_tvidx_to_expidx(aePara.cap_tv);
		aeCb.capagc = cap_svidx_to_agcidx(aePara.cap_sv);
		aeCb.capav = aePara.cap_av;

		appAeIrisSet(aePara.ui_iris);

		#if LENS_MOTOR_DRV_MD3_IN4
		APP_SLEEP_MS(40);
		#endif
	}
	appLensMShutLmiModeSet(1); /* msh off */
	printf("\033[32mcapset : ape = %d exp = %d agc = %d step = %d \033[0m\n",aeCb.capav,aeCb.capexp,aeCb.capagc,aeCb.aeStep);
	
	printf_t("******************************************\n");
	printf_t("aePara: tvidx(%d), svidx(%d) avidx(%d)\n", aePara.cap_tv, aePara.cap_sv, aePara.cap_av);
	printf_t("capset : ape = %d exp = %d agc = %d\n",aeCb.capav,aeCb.capexp,aeCb.capagc);
	printf_t("evdiff = %d\n",aeCb.evdiff);
	printf_t("******************************************\n");
#if CAPTURE_EQUAL_PREVIEW
	sp5kPreviewExpAgcGet(&exp,&agc);
	sp5kStillCapExpAgcSet((SINT32)exp, (UINT32)agc);
#else
	sp5kStillCapExpAgcSet((SINT32)aeCb.capexp, (UINT32)aeCb.capagc);
#endif

	fAeLock = 0;
}

/*-------------------------------------------------------------------------
 * Function : appAeCaptureFlashAeOverrideSet
 *------------------------------------------------------------------------*/
void appAeCaptureFlashAeOverrideSet(void)
{
	SINT32 flash_short_exp;
	appPrefhCb_t* pprefhCb;
#ifdef FLASH_ROLLING
	SINT16 delta;
#endif
	printf_t("@@@@@@@@@@@@@@\n");
	printf_t("appAeCaptureFlashAeOverrideSet\n");

	pprefhCb = appPrefhCbGet();
	flash_short_exp = aeshut[pprefhCb->ShutterLimmit-1];

	aePara.save_tv = aePara.cap_tv;
	aePara.save_sv = aePara.cap_sv;
	aePara.save_ui_iso = aePara.ui_iso;

	#if 0
	aePara.cap_tv = pv_expidx_to_tvidx(pprefhCb->prefhExp);
	aePara.cap_sv = pv_agcidx_to_svidx(pprefhCb->prefhAgc);
	aePara.ui_iso = svidx_to_aeIso_tblidx(aePara.cap_sv);
	#else
	/*
	if(aeCb.aeset.flash != UI_FLASH_SLOW_SYNC) {
		aePara.cap_tv = pv_expidx_to_tvidx(pprefhCb->prefhExp);
		//aePara.cap_sv = pv_agcidx_to_svidx(pprefhCb->prefhAgc);
		aePara.ui_iso = svidx_to_aeIso_tblidx(aePara.cap_sv);
	}
	*/
	#endif

//lester 20120612 s
#ifdef FLASH_ROLLING

	delta = aePara.cap_tv - aePara.cap_sv;

	aePara.cap_tv = STD_EXP_1_10;
	
#if 0	
	if (delta < -65) /* LV <4.5 */
		aePara.cap_sv = STD_ISO_400;
	else if (delta >=-65 && delta < -49) /* LV <5.5 */
		aePara.cap_sv = STD_ISO_400;
	else if (delta >=-49 && delta < -33) /* LV <6.5 */
		aePara.cap_sv = STD_ISO_200;
	else if (delta >=-33 && delta < -17) /* LV <7.5 */
		aePara.cap_sv = STD_ISO_100;
#endif

	aePara.cap_sv = STD_ISO_100;
	aePara.ui_iso = svidx_to_aeIso_tblidx(aePara.cap_sv);

	if (aeCb.aeset.iso != UI_ISO_AUTO)
	{
		aePara.cap_tv = STD_EXP_1_10;
		switch (aeCb.aeset.iso){
			case UI_ISO_100:
				aePara.cap_sv = STD_ISO_100;
/*				printf(" ISO 100 \n"); */
				break;
			case UI_ISO_200:
				aePara.cap_sv = STD_ISO_200;
/*				printf(" ISO 200 \n"); */
				break;
			case UI_ISO_400:
				aePara.cap_sv = STD_ISO_400;
/*				printf(" ISO 400 \n"); */
				break;
			case UI_ISO_800:
				aePara.cap_sv = STD_ISO_800;
/*				printf(" ISO 800 \n"); */
				break;
			default:
				break;
		}
		aePara.ui_iso = svidx_to_aeIso_tblidx(aePara.cap_sv);		
	}

	printf("<lester> appAeCaptureFlashAeOverrideSet delta = %d, cap_sv=%d aeset=%d \n",delta, aePara.cap_sv, aeCb.aeset.iso);
#else
	if(flash_short_exp > aePara.cap_tv)
	{
		aePara.cap_tv = pv_expidx_to_tvidx(flash_short_exp);
	}
	aePara.cap_sv = pv_agcidx_to_svidx(pprefhCb->prefhAgc);
	aePara.ui_iso = svidx_to_aeIso_tblidx(aePara.cap_sv);
	#endif

//lester 20120612 e

	#if 1
	printf("\n+++++++ CAP-FLASH Adjust ++++++++++++\n");
	printf("Calc CAP tv(%d), sv(%d), ui_iso(%d) \n", aePara.save_tv, aePara.save_sv, aePara.save_ui_iso);
	printf("Adj FLASH tv(%d), sv(%d), ui_iso(%d) \n\n", aePara.cap_tv, aePara.cap_sv, aePara.ui_iso);
	#endif
}

/*-------------------------------------------------------------------------
 * Function : appAeFastAdjust
 *------------------------------------------------------------------------*/
UINT8
appAeFastAdjust(
	UINT32 param
)
{
	static UINT8 fastAeCnt = 0;
	view_param_t* puiView;
	UINT8 ret;
	UINT8 uiFlash;
	UINT32 currMode;
#ifdef FLASH_ROLLING
	SINT16 delta;
#endif
	if(appAeStableGet()== TRUE)
	{
		aeCb.mode = 0;
	}
	else
	{
		aeCb.mode = 1;
		appAePreviewAdjust(param);
			/*-- Set mode=1 to ask PreviewAdjust to approach AE with
			 * full aeStep.
			 */
	}

	fastAeCnt++;
    
	sp5kModeGet(&currMode);
	if(currMode == SP5K_MODE_VIDEO_PREVIEW){
        if(pUiSetting->usbMode < USB_UVCH264) //for pccam capture
            #if SP5K_SENSOR_OV8810
                return 0xf0; 	    
            #else		 
    	     	return 0xff; 
            #endif
	}

	if(aeCb.mode == 1 && fastAeCnt <= FAST_AE_DO_NUM) 
	{
		/*-- AE_FASTAE_RUNNING */
        fAeLock = 0;
		printf_t("\n---> fastAe running !!\n\n");
		return 0xff;
	}

	/*-- Preview AE has converged or
 	 * fastAeCnt max effort completes !!
	 */

	/********************************************
	 * Spy flash settings
	 ********************************************/
	puiView = appViewParamGet();
	aeCb.aeset.flash = uiFlash = puiView->flash;

	if(fAeEnable)
	{
        
		fAeLock = 1;
		aeCb.mode = fastAeCnt = 0;

		/********************************************
		 * Capture PASM Adjustment
		 ********************************************/
		_capturePASMSet();

		/********************************************
		 * Fast PASM View Mimic
		 ********************************************/
	//	_aeFastViewSet();        
	}

	/**********************************************************
	 * Check up safeshut to decide if Flash compensation needed
	 **********************************************************/
	ret = FALSE;

	//lester 20120612 s
#ifdef FLASH_ROLLING
	delta =aePara.cap_tv - aePara.cap_sv;
	printf("<lester> appAeFastAdjust =%d \n",delta);
	if (delta < -20)
#else
	if(aePara.cap_tv < aesafeshut[aeCb.zml])
#endif
	//lester 20120612 e
	{
		/*-- SLOW Shutter
		 */
		if (uiFlash!=UI_FLASH_OFF)
		{
			appAeCaptureFlashAeOverrideSet();
			ret = aePara.cap_flash = TRUE; /*-- AE_FASTAE_OK_FLASH_ON */
			printf("<lester> appAeFastAdjust flash on \n");
		}
		else 
		{
			ret = aePara.cap_flash = FALSE; /*-- AE_FASTAE_OK_FLASH_OFF */
		}
	} 
	else 
	{
		/*-- SAFE Shutter
		 */
		if (uiFlash==UI_FLASH_ON) 
		{
			/* not yet ready */
//lester 20120612 s
#ifdef FLASH_ROLLING
			aePara.cap_flash = FAKE; /*-- AE_FASTAE_OK_FLASH_OFF */
			ret= FALSE;
			printf("<lester> appAeFastAdjust flash FAKE \n");
#else
			ret = aePara.cap_flash = FALSE; /*-- AE_FASTAE_OK_FLASH_OFF */
#endif
//lester 20120612 e
		} 
		else
		{
			ret = aePara.cap_flash = FALSE; /*-- AE_FASTAE_OK_FLASH_OFF */
		}
	}
	return ret;
}

//lester 20120612 s
#ifdef FLASH_ROLLING
/* Eric 110823 determine need flash or not in AE */
/*-------------------------------------------------------------------------
 * Function : appAeFlashNeedGet
 *------------------------------------------------------------------------*/
UINT8 appAeFlashNeedGet(void){
/*0 :Not have Flash*/
/*1 :Need Flash*/
/*2 :Fake Flash*/
/*	printf(" cap_flash %d\n", aePara.cap_flash);*/
	return aePara.cap_flash;
}
#endif
//lester 20120612 e

/*-------------------------------------------------------------------------
 * Function : appAeGetCurrentExpIsoUiIdx
 *------------------------------------------------------------------------*/
void appAeGetCurrentExpIsoUiIdx(UINT16* ui_exp_idx, UINT16* ui_iso_idx)
{
	SINT32 exp;
	UINT32 agc;

	sp5kStillCapExpAgcGet(&exp, &agc);

	printf("%d %d evUnit.evUnit(%d) \n", exp, agc, evUnit.evUnit);

	*ui_exp_idx = (UINT16)cap_tvidx_to_ui_shutter_idx(cap_expidx_to_tvidx(exp));
	*ui_iso_idx = (UINT16)svidx_to_aeIso_tblidx(cap_agcidx_to_svidx(agc)) /*+ UI_ISO_50*/;// just start from different element.
}

/*-------------------------------------------------------------------------
 * Function : appAeFlashAdjust
 *------------------------------------------------------------------------*/
void
appAeFlashAdjust(
	aeResult_t* pAePar,
	SINT32* ae_suggest_exp,
	UINT32* ae_suggest_iso,
	UINT32 sh_long,
	UINT32 sh_short
)
{
	UINT32 backup[2];
#if 1
	profLogAdd(0, "appAeFlashAdjust -s");

	printf_t("@@@@@@@@@@@@@@\n");
	printf_t("appAeFlashAdjust\n");


	/*-- Retrieve aeResult parameters
	 */
	expidx = pAePar->evInfo.expIdx;
	agcidx = pAePar->evInfo.agcIdx;
	apeidx = pAePar->evInfo.aperIdx;
	aeCb.expidx = expidx;
	aeCb.agcidx = agcidx;
	aeCb.aeStep = step = pAePar->aeStep;
	aeCb.luma = pAePar->aeLuma;

	printf("exp %d, agc %d, iris %d, step %d\n",expidx,agcidx,apeidx,step);
	/***************************************************
	 * TOO DARK Adjustment
	 ***************************************************/
	if (step < 0)
	{
		//printf("--- DARK (%d)\n",step);

		_aeTooDarkAdjust();
	}
	/***************************************************
	 * TOO BRIGHT Adjustment
	 ***************************************************/
	else if (step > 0)
	{
		//printf("--- BRIGHT (%d)\n",step);
		_aeTooBrightAdjust();
	}
	/***************************************************
	 * Converged
	 ***************************************************/
	else
	{
		/*s Modify by Aries 10/02/04*/
		/*printf_t("--- Converged!!!\n");*/
		/*e Modify by Aries 10/02/04*/
	}

	/***************************************************
	 * transfer to cap ae.
	 ***************************************************/
	backup[0] = capShortestShutter;
	backup[1] = capLongestShutter;
	capShortestShutter = aeshut[sh_short-1];
	capLongestShutter = aeshut[sh_long-1];

	_capturePASMSet();
	capShortestShutter = backup[0];
	capLongestShutter = backup[1];

	*ae_suggest_exp = aePara.cap_tv;
	*ae_suggest_iso = aePara.cap_sv;
#endif
}
/*-------------------------------------------------------------------------
 *  Function Name : aeExif_DbgLogInit
 *------------------------------------------------------------------------*/
void aeExif_DbgLogInit(void)
{
	appExif_MN_BufClear(EXIF_MN_AE);
}
/*-------------------------------------------------------------------------
 *  Function Name : aeExif_DbgLogSave
 *------------------------------------------------------------------------*/
void aeExif_DbgLogSave(void)
{
	appAeCb_t *paeCb;
	appCalibData_t *pcalib;
	appAePara_t *paePara;

	  SINT32 expIdx,snapexpIdx;
	UINT32 agcIdx,snapagcIdx;

	sp5kPreviewExpAgcGet(&expIdx, &agcIdx);
	//printf("sp5k view (exp=%d, agc=%d)\n", expIdx, agcIdx);

	sp5kStillCapExpAgcGet(&snapexpIdx, &snapagcIdx);
	//printf("sp5k cap (exp=%d, agc=%d)\n", expIdx, agcIdx);


	paeCb = appAeCbGet();
	paePara = appAeParaGet();
	pcalib = appCalibDataGet();

	appExif_MN_Printf(EXIF_MN_AE, "lv%d ", paeCb->lvidx);
	appExif_MN_Printf(EXIF_MN_AE, "vav%d ", paePara->av);
	appExif_MN_Printf(EXIF_MN_AE, "vtv%d ", paePara->tv);
	appExif_MN_Printf(EXIF_MN_AE, "vsv%d ", paePara->sv);
	appExif_MN_Printf(EXIF_MN_AE, "cav%d ", paePara->cap_av);
	appExif_MN_Printf(EXIF_MN_AE, "ctv %d ", paePara->cap_tv);
	appExif_MN_Printf(EXIF_MN_AE, "csv%d ", paePara->cap_sv);
	appExif_MN_Printf(EXIF_MN_AE, "evdiff%d ", paeCb->evdiff);

	appExif_MN_Printf(EXIF_MN_AE, "xfh%d ", paePara->cap_flash);
	appExif_MN_Printf(EXIF_MN_AE, "xiso%d ", paePara->ui_iso);
	appExif_MN_Printf(EXIF_MN_AE, "xiris%d ", paePara->ui_iris);

	appExif_MN_Printf(EXIF_MN_AE, "vIso%d ", pcalib->PvIso);
	appExif_MN_Printf(EXIF_MN_AE, "cIso%d ", pcalib->CapIso);
	
	appExif_MN_Printf(EXIF_MN_AE, "pvexp=%d  ",expIdx);
	appExif_MN_Printf(EXIF_MN_AE, "pvagc=%d ", agcIdx);
	appExif_MN_Printf(EXIF_MN_AE, "capExp=%d ",snapexpIdx);
	appExif_MN_Printf(EXIF_MN_AE, " capAgc=%d ", snapagcIdx);
	appExif_MN_Printf(EXIF_MN_AE, " step=%d ", lester_step);
	appExif_MN_Printf(EXIF_MN_AE, " lv=%d ", lester_lv);

#if 0
	/*-- for uParser test */
	appExif_MN_Printf(EXIF_MN_AE, "uptest");
	appExif_MN_WriteUID(EXIF_MN_AE, 0x050a0001);
	appExif_MN_Write16(EXIF_MN_AE, 0xaabb);
	appExif_MN_WriteUID(EXIF_MN_AE, 0x050a0002);
	appExif_MN_Write16(EXIF_MN_AE, (UINT16)(-9130));
	appExif_MN_WriteUID(EXIF_MN_AE, 0x050a0003);
	appExif_MN_Write32(EXIF_MN_AE, (UINT32)(-15361));
	appExif_MN_WriteUID(EXIF_MN_AE, 0x050a0004);
	appExif_MN_Write32(EXIF_MN_AE, (UINT32)0x12345678);
	appExif_MN_WriteUID(EXIF_MN_AE, 0x050a0105);
	char sz_test[]="Viva! Viva!~~~";
	appExif_MN_WriteBytes(EXIF_MN_AE, (UINT8 *)sz_test, strlen(sz_test)+1);
#endif
}

/*-------------------------------------------------------------------------
 *  Function Name : appAeFaceCfg
 *------------------------------------------------------------------------*/
void
appAeFaceCfg(
	 void
)
{
#if FACE_WITH_AE

	UINT32 i,j;
	UINT16 x0, y0, x1, y1;
	static UINT16 count=0;
	UINT8 pweight[] = 
	{15,15,2,  //hgrid, vgrid, ngroup
       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
       0, 10 }; /*weight of group*/
	appFdFaceDataGetEx(&Aefd);

	if(Aefd.totalFaceNum) 
	{
		i = Aefd.mainFace;
		
		x0 = (Aefd.rectFace[i]).nStartX;
		y0 = (Aefd.rectFace[i]).nStartY;
		x1 = x0 + (Aefd.rectFace[i]).nSize;
		y1 = y0 + (Aefd.rectFace[i]).nSize;

		x0 = x0*17/320;
		x1 = x1*17/320;
		y0 = y0*17/240;
		y1 = y1*17/240;

		x0 = x0? x0-1: 0;
		x1 = x1? x1-1: 0;
		y0 = y0? y0-1: 0;
		y1 = y1? y1-1: 0;

		if(x1-x0 >3)
		{
			x0 = x0 <14 ? x0+1: 0;
		}	
		
		for(i=y0; i<y1; i++) 
		{
			for(j=x0; j<x1; j++) 
			{
				pweight[i*pweight[0] + j + 3] = 1; 
			}
		}	
		count =0 ;
		sp5kAeWeightCfgSet(pweight);
		
			  /*	printf("__Atfaeface(%d,%d,%d,%d)\n", x0,y0,x1,y1);	*/
	}
	else 
	{
		if(++count >4)
		{
			sp5kAeWeightResourceSet(aeCb.aeset.meter);
			count =0 ;
		}	
		/*printf("__aeface(noface)\n"); */
	}
#endif
}

void
cmdAE(
	UINT32 argc,
	UINT8 *arg[],
	UINT32 v[]
)
{
	SINT32 exp;
	UINT32 agc;
	if (argc==1) 
	{
		printf("ae usage:\n"
			" ae 0|1 : disable/enable AE\n"
			" ae target LUMA : set ae target\n"
			" ae info 0|1 : disable/enable AE info\n"
			" ae exp IDX : set preview exp\n"
			" ae agc IDX : set preview agc\n"
			" ae cexp IDX : set capture exp\n"
			" ae cagc IDX : set capture agc\n"
			" ae win 0|1 : show aewin \n"
			" ae report : show aeInitReport \n"
			" ae freq 0|1 : control freqDbg \n"
		);
	}
	else if (strcmp(arg[1], "info")==0)
	{
		appAeInfoEnable(v[2]);
		printf("ae info %d\n",v[2]);
		printf("expCap Max=%d,expLimitPv=%d,SysMin=%d,TblMin=%d\n",expLimitCap.expIdxMax,expLimitCap.expIdxShortMin,expLimitCap.expIdxSysMin,expLimitCap.expIdxTblMin);
		printf("agcCap Max=%d,Min=%d\n",agcLimitCap.agcIdxMax,agcLimitCap.agcIdxMin);
		printf("expPv Max=%d,expLimitPv=%d,SysMin=%d,TblMin=%d\n",expLimitPv.expIdxMax,expLimitPv.expIdxShortMin,expLimitPv.expIdxSysMin,expLimitPv.expIdxTblMin);
		printf("agcPv Max=%d,Min=%d\n",agcLimitPv.agcIdxMax,agcLimitPv.agcIdxMin);
		printf("evUnit evUnit=%d,agcIdx0Unit=%d aperIdx0Unit=%d expIdx0Unit=%d\n",evUnit.evUnit,evUnit.agcIdx0Unit,evUnit.aperIdx0Unit,evUnit.expIdx0Unit);
	} 
	else if (strcmp(arg[1], "target")==0)
	{
		sp5kAeParamSet(SP5K_AE_TARGET_LUMA, v[2]);
		printf("ae target %d\n",v[2]);
	} 
	else if (strcmp(arg[1], "exp")==0)
	{
		sp5kPreviewExpAgcGet(&exp, &agc);
		if (argc<3) 
		{ 
			v[2]=exp; 
		}
		sp5kPreviewExpAgcSet(v[2], agc);
		printf("exp/agc: %d->%d, %d\n", exp, v[2], agc);
	} 
	else if (strcmp(arg[1], "tv")==0)
	{
		UINT32 exp1;
		sp5kPreviewExpAgcGet(&exp, &agc);
		exp1 = TV_TO_EXPIDX(v[2]);
		sp5kPreviewExpAgcSet(exp1, agc);
		printf("set tv=%d/%d exp/agc: %d->%d, %d\n", v[2], evUnit.evUnit, exp, exp1, agc);
	}
	else if (strcmp(arg[1], "cexp")==0) 
	{
		sp5kStillCapExpAgcGet(&exp, &agc);
		sp5kStillCapExpAgcSet(v[2], agc);
		printf("exp/agc: %d->%d, %d\n", exp, v[2], agc);
	}
	else if (strcmp(arg[1], "agc")==0) 
	{
		sp5kPreviewExpAgcGet(&exp, &agc);
		if (argc<3) { v[2]=agc; 	}
		sp5kPreviewExpAgcSet(exp, v[2]);
		printf("exp/agc: %d, %d->%d\n", exp, agc, v[2]);
	}
	else if (strcmp(arg[1], "sv")==0) 
	{
		UINT32 agc1;
		sp5kPreviewExpAgcGet(&exp, &agc);
		agc1 = SV_TO_VIEW_AGCIDX(v[2]);
		sp5kPreviewExpAgcSet(exp, agc1);
		printf("set sv=%d/%d exp/agc: %d, %d->%d(%d)\n", v[2], evUnit.evUnit, exp, agc, agc1,(v[2]*evUnit.evUnit-evUnit.agcIdx0Unit-VIEW_AGCIDX_OFS));
	} 
	else if (strcmp(arg[1], "cagc")==0) 
	{
		sp5kStillCapExpAgcGet(&exp, &agc);
		sp5kStillCapExpAgcSet(exp, v[2]);
		printf("exp/agc: %d, %d->%d\n", exp, agc, v[2]);
	}
	else if (strcmp(arg[1], "iris")==0)
	{
		appAeIrisSet(v[2]);
		printf("iris: %d avidx: %d\n", v[2],aeIris[v[2]]);
	}
	else if (strcmp(arg[1], "pasm")==0) 
	{
		printf("pasm = %d iso = %d\n", v[2],v[3]);
		aeCb.aeset.pasm=v[2];
		aeCb.aeset.iris = v[3];
		aeCb.aeset.shutter=v[4];
		aeCb.aeset.iso=v[5];
		_aePASMSet();
	}
	else if (strcmp(arg[1], "pasminfo")==0)
	{
		printf("pasm = %d iris = %d shutter = %d iso = %d\n",aeCb.aeset.pasm,aeCb.aeset.iris,aeCb.aeset.shutter,aeCb.aeset.iso);
	}
	else if (strcmp(arg[1], "bias")==0) 
	{
		printf("bias = %d iso = %d\n", v[2],aebiascmp[v[2]]);
		appAeEvBiasSet(v[2]);
	}
	else if (strcmp(arg[1], "fast")==0) 
	{
		printf("fast ae\n");
		appAeFastAdjust(0);
	}
	else if (strcmp(arg[1], "cappara")==0) 
	{
		printf("fast cappara\n");
		SINT16 iris,shutter,iso;
		appAeCapParaGet(&iris,&shutter,&iso);
	}
	else if (strcmp(arg[1], "win")==0) 
	{
		printf("ae win %d\n", v[2]);
		sp5kAeCfgSet(SP5K_AE_WIN_POS_TEST, !!v[2]);
	}
	else if (strcmp(arg[1], "report")==0)
	{
		printf("ae report \n");
		_aeInitReport();
	}
	else if (strcmp(arg[1], "freq")==0) 
	{
		printf("ae freq %d \n", v[2]);
		aeFreqDbg = !!v[2];
	}
	else if (strcmp(arg[1], "osd")==0) 
	{
		appAeInfo();
	}
	else if (strcmp(arg[1], "snap")==0) 
	{
		printf("ae snap %d \n", v[2]);
		//sp5kStillCapExpAgcSet(112, v[2]);
		//appIrisLargeSet();
		sp5kTimeDelay(SP5K_TIME_DELAY_1MS, 100);
		appStillUtil_CaptureSet();
	}
	else if (strcmp(arg[1], "t1")==0) 
	{
		UINT32 agc1;
		UINT32 exp1;
		appAeIrisSet(0);
		sp5kPreviewExpAgcGet(&exp, &agc);
		exp1 = TV_TO_EXPIDX(5);
		agc1 = SV_TO_VIEW_AGCIDX(5);
		sp5kPreviewExpAgcSet(exp1, agc1);
		appAeInfoEnable(1);
		appAeEnable(v[1]);
	}
	else
	{
		appAeEnable(v[1]);
	}
}
void appAeTablePrint(UINT32 fps,UINT32 flicker)
{
	UINT32 i;//junqiong.hu@20121107
	aeExpAgcIdx_t *pAeTbl;
	UINT32 aeTblSize;
	
	pAeTbl = NULL;
	if(fps == 30){
		if(flicker == 60){
			pAeTbl = ae30Fps60HzExpAgcSet;
			aeTblSize = sizeof(ae30Fps60HzExpAgcSet)/sizeof(ae30Fps60HzExpAgcSet[0]);
			printf("30Fps 60Hz Table:\n");
		}
		else{
			printf("30Fps 50Hz Table:\n");
			pAeTbl = ae30Fps50HzExpAgcSet;
			aeTblSize = sizeof(ae30Fps50HzExpAgcSet)/sizeof(ae30Fps50HzExpAgcSet[0]);
		}
	}
	else if(fps == 60){
		if(flicker == 60){
			pAeTbl = ae60Fps60HzExpAgcSet;
			aeTblSize = sizeof(ae60Fps60HzExpAgcSet)/sizeof(ae60Fps60HzExpAgcSet[0]);
			printf("60Fps 60Hz Table:\n");
		}
		else{
			printf("60Fps 50Hz Table:\n");
			pAeTbl = ae60Fps50HzExpAgcSet;
			aeTblSize = sizeof(ae60Fps50HzExpAgcSet)/sizeof(ae60Fps50HzExpAgcSet[0]);
		}
	}
	else if(fps == 120){
			printf("120Fps  Table:\n");
			pAeTbl = ae120Fps60HzExpAgcSet;
			aeTblSize = sizeof(ae120Fps60HzExpAgcSet)/sizeof(ae120Fps60HzExpAgcSet[0]);
	}
	if(pAeTbl != NULL){
		for(i = 0 ; i < aeTblSize ; i++){
			SINT32 interIdx = ((SINT32)(pAeTbl[i+1].expidx -pAeTbl[i].expidx) - (SINT32)(pAeTbl[i+1].agcidx - pAeTbl[i].agcidx));
			if(i < aeTblSize -1 && (interIdx != 1 || pAeTbl[i].agcidx < PRV_AGC_MIN_IDX)){
				printf("\033[32mAE table error in index %d, Interval: %d\033[0m\n",i,interIdx);
			}
			printf("%d\t%d\t%d\n",i,pAeTbl[i].expidx,pAeTbl[i].agcidx);
		}
	}

}
void appAeFlickerTableExpAgcIdxGet(UINT32 fps,UINT32 flicker,UINT16 tblIdx,UINT16 *expIdx,UINT16 *agcIdx)
{
	/*UINT16 idx;*///junqiong.hu@20121107
	if(fps == 30){
		switch(flicker)
		{
			case 60:
				if(tblIdx < sizeof(ae30Fps60HzExpAgcSet)/sizeof(ae30Fps60HzExpAgcSet[0]))
				{
					*expIdx = pv_tvidx_to_expidx(ae30Fps60HzExpAgcSet[tblIdx].expidx);
					*agcIdx = pv_svidx_to_agcidx(ae30Fps60HzExpAgcSet[tblIdx].agcidx);
				}
				break;
			case 50:
				if(tblIdx < sizeof(ae30Fps50HzExpAgcSet)/sizeof(ae30Fps50HzExpAgcSet[0]))
				{
					*expIdx = pv_tvidx_to_expidx(ae30Fps50HzExpAgcSet[tblIdx].expidx);
					*agcIdx = pv_svidx_to_agcidx(ae30Fps50HzExpAgcSet[tblIdx].agcidx);
				}
				break;
		}
	}
	else if(fps == 60){
		switch(flicker)
		{
			case 60:
				if(tblIdx < sizeof(ae60Fps60HzExpAgcSet)/sizeof(ae60Fps60HzExpAgcSet[0]))
				{
					*expIdx = pv_tvidx_to_expidx(ae60Fps60HzExpAgcSet[tblIdx].expidx);
					*agcIdx = pv_svidx_to_agcidx(ae60Fps60HzExpAgcSet[tblIdx].agcidx);
				}
				break;
			case 50:
				if(tblIdx < sizeof(ae60Fps50HzExpAgcSet)/sizeof(ae60Fps50HzExpAgcSet[0]))
				{
					*expIdx = pv_tvidx_to_expidx(ae60Fps50HzExpAgcSet[tblIdx].expidx);
					*agcIdx = pv_svidx_to_agcidx(ae60Fps50HzExpAgcSet[tblIdx].agcidx);
				}
				break;
		}
	}
	else if(fps == 120){
		switch(flicker)
		{
			case 60:
				if(tblIdx < sizeof(ae120Fps60HzExpAgcSet)/sizeof(ae120Fps60HzExpAgcSet[0]))
				{
					*expIdx = pv_tvidx_to_expidx(ae120Fps60HzExpAgcSet[tblIdx].expidx);
					*agcIdx = pv_svidx_to_agcidx(ae120Fps60HzExpAgcSet[tblIdx].agcidx);
				}
				break;
			case 50:
				if(tblIdx < sizeof(ae120Fps50HzExpAgcSet)/sizeof(ae120Fps50HzExpAgcSet[0]))
				{
					*expIdx = pv_tvidx_to_expidx(ae120Fps50HzExpAgcSet[tblIdx].expidx);
					*agcIdx = pv_svidx_to_agcidx(ae120Fps50HzExpAgcSet[tblIdx].agcidx);
				}
				break;
		}
	}

}

void appAeFlickerTableExpAgcIdxSet(UINT32 tblIdx)
{
	SINT32 expIdx,agcIdx;
	
	expIdx = pv_tvidx_to_expidx(paeIdx[tblIdx].expidx);
	agcIdx = pv_svidx_to_agcidx(paeIdx[tblIdx].agcidx);
	
	sp5kPreviewExpAgcSet(expIdx, agcIdx);
	printf("Table Index: %d , exp: %d , agc: %d\n",tblIdx,expIdx,agcIdx);

}

UINT8 appAeCapPASMGet()
{
	return aeCb.aeset.pasm;
}

UINT8 appAeCapIsoGet()
{
	return aeCb.aeset.iso;
}

UINT8 appAeCapIrisGet()
{
	return aeCb.aeset.iris;
}

UINT8 appAeCapShutterGet()
{
	return aeCb.aeset.shutter;
}

UINT8 appAeCapZmlGet()
{
	return aeCb.zml;
}

UINT8 appAeAgc0UnitGet()
{
	return evUnit.agcIdx0Unit;
}

SINT8 appAeExp0UnitGet()
{
	return evUnit.expIdx0Unit;
}

UINT8 appAeAper0UnitGet()
{
	return evUnit.aperIdx0Unit;
}

UINT8 appAeAgcIdxMinGet()
{
	return agcLimitPv.agcIdxMin;
}

UINT8 appAeAgcIdxMaxGet()
{
	return agcLimitPv.agcIdxMax;
}

void appAeCbSet(UINT32 expidx, UINT32 agcidx, SINT32 lvidx, UINT32 luma, SINT16 step)
{
	aeCb.expidx = (SINT16)expidx;
	aeCb.agcidx = (SINT16)agcidx;
	aeCb.lvidx = (SINT16)lvidx;
	aeCb.luma = (UINT16)luma;
	aeCb.aeStep = (SINT16)step;	
}

void appAeCbCapSet(UINT32 expidx, UINT32 agcidx)
{
	aeCb.capexp = (SINT32)expidx;
	aeCb.capagc = (SINT32)agcidx;
}

UINT8 appAeExpLightFrequencyGet()
{
	return pUiSetting->lightFrequency;
}

void appAeParaSet(SINT16 iris, SINT32 shutter, SINT16 iso)
{
	aePara.ui_iris = iris;
	aePara.cap_tv = shutter;
	aePara.ui_iso = iso;
}

void appAeExpAgcEntryOffsetSet(SINT32 offset)
{
	nextEntry += offset;
	aeExpAgcEntry = nextEntry;
}
